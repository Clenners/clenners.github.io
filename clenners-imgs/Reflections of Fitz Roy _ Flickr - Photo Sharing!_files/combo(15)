YUI.add("flickr-products-books-creator",function(e,t){"use strict";function n(t){var n={};return t=t||{},n=t,n.cacheBust=Date.now(),n.extras=e.APIHelper.request.getRebootPhotoExtras(),n}function r(t,n){var r,i;return r={pageModelRegistry:t.pageModelRegistry,bookModelRegistry:t.bookModelRegistry,pagePhotoModelRegistry:t.pagePhotoModelRegistry,photoModelRegistry:t.photoModelRegistry,personRegistry:t.personRegistry,photoEngagementRegistry:t.photoEngagementRegistry,photoStatsRegistry:t.photoStatsRegistry},i=e.ProductsAPIHelper.parseBook(t.response.book,r),i}function i(n,r){var i=this;return(new e.FlickrPromise({response:r.callAPI("flickr.products.books.create",this._processParams(n)),pageModelRegistry:r.getModelRegistry("page-models"),bookModelRegistry:r.getModelRegistry("book-models"),pagePhotoModelRegistry:r.getModelRegistry("book-page-photo-models"),photoModelRegistry:r.getModelRegistry("photo-models"),personRegistry:r.getModelRegistry("person-models"),photoEngagementRegistry:r.getModelRegistry("photo-engagement-models"),photoStatsRegistry:r.getModelRegistry("photo-stats-models")})).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelCreators")["flickr-products-books-creator"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper","products-api-helper"],optional:["page-models","book-models","book-page-photo-models","photo-models","person-models","photo-engagement-models"]});
YUI.add("book-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-products-books"].run(t,this.appContext)},update:function(t,n){return"title"in n?e.ModelUpdaters["flickr-products-books-editBook"].run({bookId:t,title:n.title.newVal},this.appContext):e.ModelUpdaters["flickr-products-books-updateBook"].run({bookId:t},this.appContext)},create:function(t){return e.ModelCreators["flickr-products-books-creator"].run(t,this.appContext)}},movePage:function(e,t,n,r){var i,s,o,u;return i=this.getValue(e,"pageOrder"),s=i.length,t<s&&n<s&&(r?u=i.splice(t,2):u=i.splice(t,1)[0],o=[n,0].concat(u),Array.prototype.splice.apply(i,o)),this.setValue(e,"pageOrder",i),i},addPage:function(e,t,n){var r,i;return r=this.getValue(e,"pageOrder"),i=r.length,n<=i&&r.splice(n+1,0,t),this.setValue(e,"pageOrder",r),r},removePage:function(e,t){var n,r,i,s;return n=this.getValue(e,"pageOrder"),s=n.length,r=n.indexOf(t),r<s&&(i=n.splice(r,1),this.setValue(e,"pageOrder",n)),n},attributes:{title:{},owner:{},pageOrder:{},coverPage:{isModel:!0},totalPhotos:{},price:{},lastPageViewed:{},created:{getter:function(e){return parseInt(e,10)}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-products-books-fetcher","flickr-products-books-updateBook-updater","flickr-products-books-editBook-updater","flickr-products-books-creator"]});
YUI.add("flickr-products-books-addPage-creator",function(e,t){"use strict";function n(t){var n={book_id:t.bookId};return t.photoIds&&(n.photo_ids=t.photoIds.join(","),n.extras=e.APIHelper.request.getRebootPhotoExtras()),e.Lang.isNumber(t.templateId)&&(n.template_id=t.templateId),t.backgroundColor&&(n.background_color=t.backgroundColor),n}function r(t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3],a=t[4],f=t[5],l=t[6],c=[],h,p=i.page,d,v;return p.photo&&e.Array(p.photo).forEach(function(t){var r,i,s,f,h;h=p.id+"_"+t.position,r={id:h,bookId:n.bookId,position:t.position,cropX:t.cropX/100,cropY:t.cropY/100,cropW:t.cropW/100,cropH:t.cropH/100,invalidForPrintReason:t.invalidForPrintReason,isInvalidForPrint:t.isInvalidForPrint},i=e.APIHelper.response.parsePhoto(t),s=i.owner,f=i.engagement,d=s.id,a.exists(d)?(delete s.id,a.setValues(d,s)):a.add(s),i.owner=a.proxy(d),d=f.id,l.exists(d)?(delete f.id,l.setValues(d,f)):l.add(f),i.engagement=l.proxy(d),d=i.id,u.exists(d)?(delete i.id,u.setValues(d,i)):u.add(i),r.photo=u.proxy(d),d=r.id,o.exists(d)?(delete r.id,o.setValues(d,r)):o.add(r),c.push(o.proxy(d))}),v=e.APIHelper.response.parsePage(p),v.pagePhotos=c,v.bookId=n.bookId,d=v.id,s.exists(d)?(delete v.id,s.setValues(d,v),h=s.proxy(d)):h=s.add(v),f.proxy(n.bookId).getValue("pages").appendToList(h),h}function i(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.products.books.addPage",this._processParams(n)),r.getModelRegistry("page-models"),r.getModelRegistry("book-page-photo-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("person-models"),r.getModelRegistry("book-models"),r.getModelRegistry("photo-engagement-models")]).then(function(e){return i._processResponse(e,n,r)},e.FetcherErrorLogger(t))}e.namespace("ModelCreators")["flickr-products-books-addPage"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["page-models","book-models","book-page-photo-models","photo-models","person-models","photo-engagement-models"]});
YUI.add("flickr-products-books-removePage-deletor",function(e,t){"use strict";function n(e,t){var n=e[1],r=e[0],i=n.book,s;i&&(s={id:i.id,price:i.price},r.exists(s.id)&&r.setValues(s.id,{price:s.price}))}function r(n,r,i){var s={},o=this;return s.page_id=n,s.book_id=r,e.Promise.all([i.getModelRegistry("book-models"),i.callAPI("flickr.products.books.removePage",s)]).then(function(e){return o._processResponse(e)},e.FetcherErrorLogger(t))}e.namespace("ModelDeletors")["flickr-products-books-removePage"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("page-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-products-books-getPage"].run(t,this.appContext)},update:function(t,n){return e.ModelUpdaters["flickr-products-books-updateBook"].run({bookId:this.getValue(t,"bookId")},this.appContext)},create:function(t){return e.ModelCreators["flickr-products-books-addPage"].run(t,this.appContext)},"delete":function(t){return e.ModelDeletors["flickr-products-books-removePage"].run(t,this.getValue(t,"bookId"),this.appContext)}},forceUpdate:function(t){return e.ModelUpdaters["flickr-products-books-updateBook"].run({bookId:this.getValue(t,"bookId")},this.appContext)},attributes:{bookId:{getter:function(e){return parseInt(e,10)},validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},backgroundColor:{defaultValue:"255,255,255"},pageNumber:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},template:{getter:function(e){return parseInt(e,10)},validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},countPhotos:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},pagePhotos:{isListProxy:!0}}})},"@VERSION@",{requires:["flickr-products-books-editPage-updater","flickr-products-books-getPage-fetcher","flickr-products-books-addPage-creator","flickr-products-books-removePage-deletor","flickr-model-registry","flickr-promise"]});
YUI.add("flickr-products-books-fetcher",function(e,t){"use strict";function n(t){t.page=t.page||1,t.perPage=t.perPage||100;var n;return n={book_id:t.id,extras:e.APIHelper.request.getRebootPhotoExtras()},n}function r(t,n){var r,i;return r={pageModelRegistry:t.pageModelRegistry,bookModelRegistry:t.bookModelRegistry,pagePhotoModelRegistry:t.pagePhotoModelRegistry,photoModelRegistry:t.photoModelRegistry,personRegistry:t.personRegistry,photoEngagementRegistry:t.photoEngagementRegistry,photoStatsRegistry:t.photoStatsRegistry},i=e.ProductsAPIHelper.parseBook(t.response.book,r),i}function i(n,r){var i=this;return(new e.FlickrPromise({response:r.callAPI("flickr.products.books.getBook",this._processParams(n)),pageModelRegistry:r.getModelRegistry("page-models"),bookModelRegistry:r.getModelRegistry("book-models"),pagePhotoModelRegistry:r.getModelRegistry("book-page-photo-models"),photoModelRegistry:r.getModelRegistry("photo-models"),personRegistry:r.getModelRegistry("person-models"),photoEngagementRegistry:r.getModelRegistry("photo-engagement-models"),photoStatsRegistry:r.getModelRegistry("photo-stats-models")})).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-products-books"]={run:i,_processResponse:r,_processParams:n}},"@VERSION@",{requires:["flickr-promise","api-helper","products-api-helper"],optional:["page-models","book-models","book-page-photo-models","photo-models","person-models","photo-engagement-models"]});
YUI.add("basic-book-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{title:{},owner:{},coverPhoto:{isModel:!0},coverPhotoDeleted:{defaultFn:function(){return!1}},cropW:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},cropH:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},cropX:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},cropY:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},totalPages:{},created:{getter:function(e){return parseInt(e,10)}},updated:{getter:function(e){return parseInt(e,10)}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-products-books-fetcher","flickr-products-books-updateBook-updater","flickr-products-books-editBook-updater"]});
YUI.add("flickr-creations-fetcher",function(e,t){"use strict";function n(t){var n={extras:e.APIHelper.request.getRebootPhotoExtras()};return n}function r(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=[],d=[],v=[];return r&&r.stat==="ok"&&(p=Object.keys(r.wallart_ids).map(function(e){return r.wallart_ids[e]}),e.Array.each(p,function(t,n){if(t.photoSource===2)return;var r,i,s,u=[],p=!1,v,m,g,y={};r=a.addOrUpdate({id:t.owner}),t.photo.id?(y={photos:[t.photo],personModelRegistry:a,photoModelRegistry:f,photoEngagementModelRegistry:l,photoStatsModelRegistry:c,photoCurationModelRegistry:h},t.photo.ownerId&&(y.ownerID=t.photo.ownerId),i=e.APIHelper.response.parsePhotos(y)[0]):p=!0,t.orders&&typeof t.orders=="object"&&(s=Object.keys(t.orders).map(function(e){return t.orders[e]}),e.Array.each(s,function(e){u.push({orderId:e.orderId,orderStatus:e.order.statusOrder,dateCreate:e.dateCreate,dateUpdate:e.dateUpdate})})),t.skuId.substr(-2)==="CC"?(v=t.skuId.slice(0,-3),m=!0):t.skuId.substr(-2)==="MK"?(v=t.skuId.slice(0,-3),g=!0):v=t.skuId,d.push(o.addOrUpdate({id:t.wallartId,owner:r,photo:i,photoDeleted:p,skuId:v,isCC:m,isMK:g,orientation:t.orientation,price:t.price,cropW:t.photo.cropW,cropH:t.photo.cropH,cropX:t.photo.cropX,cropY:t.photo.cropY,isEditable:t.isEditable,isLowQuality:t.isLowQuality,created:t.dateCreate,updated:t.dateUpdate,orders:u,photoSource:t.photoSource}))})),i&&i.stat==="ok"&&e.Array.each(i.books.book,function(t,n){var r=!1,i,s;i=a.addOrUpdate({id:t.owner}),t.coverPhoto.id?s=e.APIHelper.response.parsePhotos({photos:[t.coverPhoto],personModelRegistry:a,photoModelRegistry:f,photoEngagementModelRegistry:l,photoStatsModelRegistry:c})[0]:r=!0,v.push(u.addOrUpdate({id:t.id,title:t.title,owner:i,coverPhoto:s,coverPhotoDeleted:r,totalPages:t.countPages,created:t.dateCreate,updated:t.dateUpdate,cropW:t.coverPhoto.cropW/100,cropH:t.coverPhoto.cropH/100,cropX:t.coverPhoto.cropX/100,cropY:t.coverPhoto.cropY/100}))}),s.addOrUpdate({id:n.id,wallarts:d,books:v}),{wallarts:d,books:v}}function i(n,r){var i=this,s=this._processParams(n);return e.Promise.all([r.callAPI("flickr.products.wallart.getList",s,!0),r.callAPI("flickr.products.books.getList",s,!0),r.getModelRegistry("creations-models"),r.getModelRegistry("wallart-models"),r.getModelRegistry("basic-book-models"),r.getModelRegistry("person-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("photo-engagement-models"),r.getModelRegistry("photo-stats-models"),r.getModelRegistry("photo-curation-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ListFetchers")["flickr-creations"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["creations-models","wallart-models","basic-book-models","person-models","photo-models","photo-engagement-models","photo-stats-models","photo-curation-models"]});
YUI.add("creations-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-creations"].run(t,this.appContext)}},removeCreations:function(t,n){var r=this;n.wallarts&&e.Array.each(n.wallarts,function(e,n){r.getValue(t,"wallarts").remove(e)}),n.books&&e.Array.each(n.books,function(e,n){r.getValue(t,"books").remove(e)})},appendCreations:function(t,n){var r=this;n.wallarts&&e.Array.each(n.wallarts,function(e,n){r.getValue(t,"wallarts").unshift(e)})},attributes:{wallarts:{isCollection:!0},books:{isCollection:!0}}})},"@VERSION@",{requires:["flickr-promise","model-proxy","flickr-model-registry","flickr-creations-fetcher"],optional:["wallart-models","basic-book-models"]});
YUI.add("flickr-products-wallart-create-creator",function(e,t){"use strict";function n(e){var t={};return e=e||{},t.photo_id=e.photoId,t.sku_id=e.skuId,t}function r(t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3],a=n.nsid,f,l,c,h,p=!1,d=!1,v=t[4],m,g;return i?(f=i.wallart,c=o.exists(a)?o.proxy(a):o.add({id:a}),l=u.exists(n.photoId)?u.proxy(n.photoId):u.add({id:n.photoId}),f.skuId.substr(-2)==="CC"?(h=f.skuId.slice(0,-3),p=!0):f.skuId.substr(-2)==="MK"?(h=f.skuId.slice(0,-3),d=!0):h=f.skuId,s.exists(f.wallartId)?(s.setValues(f.wallartId,{owner:c,photo:l,skuId:h,isCC:p,isMK:d,orientation:f.orientation,photoSource:f.photoSource}),g=s.proxy(f.wallartId)):g=s.add({id:f.wallartId,owner:c,photo:l,skuId:h,isCC:p,isMK:d,orientation:f.orientation,created:f.dateCreate,photoSource:f.photoSource}),v.exists(a)&&(m=v.proxy(a),m.appendCreations({wallarts:[s.proxy(f.wallartId)]}))):(e.Flog.warn("flickr-products-wallart-create-creator: No API response?"),g=this),g}function i(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.products.wallart.create",this._processParams(n)),r.getModelRegistry("wallart-models"),r.getModelRegistry("person-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("creations-models")]).then(function(e){return i._processResponse(e,n,r)},e.FetcherErrorLogger(t))}e.namespace("ModelCreators")["flickr-products-wallart-create"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","wallart-models","flog"],optional:["person-models","photo-models","creations-models"]});
YUI.add("flickr-products-wallart-editWallart-updater",function(e,t){"use strict";function n(e,t,n){var r=e.response,i=e.wallartModelRegistry;i.exists(t)&&i.setValue(t,"price",r.wallart.price);if(this.pendingUpdate)return this.pendingUpdate=!1,this.startNextUpdate(t,n)}function r(e,t){return t.getModel("wallart-models",e).then(function(e){var t,n,r,i,s;return n=e.getValue("photo"),i=e.getValue("isCC"),s=e.getValue("isMK"),r=e.getValue("skuId"),i===!0?r+="_CC":s===!0&&(r+="_MK"),t={wallart_id:e.id,photo:{id:n.getValue("id"),owner:n.getValue("owner").getValue("id"),crop_x:e.getValue("cropX"),crop_y:e.getValue("cropY"),crop_h:e.getValue("cropH"),crop_w:e.getValue("cropW")},sku_id:r,orientation:e.getValue("orientation"),is_low_quality:e.getValue("isLowQuality")},{wallart:JSON.stringify(t)}})}function i(n,r){var i=this;return this.serialize(n,r).then(function(s){return(new e.FlickrPromise({response:r.callAPI("flickr.products.wallart.update",s),wallartModelRegistry:r.getModelRegistry("wallart-models")})).then(function(e){return i.processResponse(e,n,r)},function(e){throw i.pendingUpdate&&(i.pendingUpdate=!1),e}).then(null,e.FetcherErrorLogger(t))})}function s(){return this.updateInFlight=null,!0}function o(e,t){return this.updateInFlight=this.callAPI(e,t).then(this.clearUpdateInFlight.bind(this),this.clearUpdateInFlight.bind(this)),this.updateInFlight}function u(e,t){return this.pendingUpdate=null,this.startUpdate(e,t)}function a(e,t){return this.pendingUpdate?this.updateInFlight:this.updateInFlight?(this.pendingUpdate=!0,this.updateInFlight):this.startUpdate(e,t)}e.namespace("ModelUpdaters")["flickr-products-wallart-editWallart"]={run:a,serialize:r,callAPI:i,clearUpdateInFlight:s,startUpdate:o,processResponse:n,startNextUpdate:u}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("wallart-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-products-wallart"].run(t,this.appContext)},create:function(t){return e.ModelCreators["flickr-products-wallart-create"].run(t,this.appContext)},update:function(t,n){return e.ModelUpdaters["flickr-products-wallart-editWallart"].run(t,this.appContext)}},attributes:{owner:{isModel:!0},photo:{isModel:!0},photoDeleted:{defaultFn:function(){return!1}},isCC:{defaultFn:function(){return!1}},isMK:{defaultFn:function(){return!1}},photoSource:{},skuId:{},orientation:{},price:{},cropW:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},cropH:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},cropX:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},cropY:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},isLowQuality:{defaultFn:function(){return 0}},isEditable:{defaultFn:function(){return!0}},isDeleted:{defaultFn:function(){return!1}},invalidForPrintReason:{},isInvalidForPrint:{},created:{getter:function(e){return parseInt(e,10)}},updated:{getter:function(e){return parseInt(e,10)}},orders:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-products-wallart-fetcher","flickr-products-wallart-create-creator","flickr-products-wallart-editWallart-updater"]});
YUI.add("flickr-products-wallart-fetcher",function(e,t){"use strict";function n(t){var n={wallart_id:t.id,return_deleted:1,extras:e.APIHelper.request.getRebootPhotoExtras()};return n}function r(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=r.wallart,c,h,p,d,v=!1,m=!1,g={};if(l)return p=s.addOrUpdate({id:l.owner}),g={photos:[l.photo],personModelRegistry:s,photoModelRegistry:o,photoEngagementModelRegistry:u,photoStatsModelRegistry:a,photoCurationModelRegistry:f},l.photo.ownerId&&(g.ownerID=l.photo.ownerId),h=e.APIHelper.response.parsePhotos(g)[0],l.skuId.substr(-2)==="CC"?(d=l.skuId.slice(0,-3),v=!0):l.skuId.substr(-2)==="MK"?(d=l.skuId.slice(0,-3),m=!0):d=l.skuId,c={id:l.wallartId,owner:p,photo:h,skuId:d,isCC:v,isMK:m,orientation:l.orientation,price:l.price,cropW:l.photo.cropW,cropH:l.photo.cropH,cropX:l.photo.cropX,cropY:l.photo.cropY,isEditable:l.isEditable,isDeleted:l.isDeleted,isLowQuality:l.isLowQuality,photoSource:l.photoSource,created:l.dateCreate},i.addOrUpdate(c),c}function i(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.products.wallart.getDetails",this._processParams(n)),r.getModelRegistry("wallart-models"),r.getModelRegistry("person-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("photo-engagement-models"),r.getModelRegistry("photo-stats-models"),r.getModelRegistry("photo-curation-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-products-wallart"]={run:i,_processResponse:r,_processParams:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["wallart-models","photo-models","person-models","photo-engagement-models","photo-stats-models","photo-curation-models"]});
YUI.add("photo-engagement-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.photoId=e.photoId,this.nsid=e.nsid,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.signinPendingQueue=e.signinPendingQueue,this},subviewConfig:{"fave-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,hideWhoFaved:!0},"photo-well-scrappy-edit-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"fluid-share-photo-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"vr-engagement-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.appContext.flipper.isFlipped("enable-vr")}}},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){var e,t=this.get("photo"),n=t.getValue("owner"),r;return r={"photo-well-scrappy-edit-view":this.subviews["photo-well-scrappy-edit-view"].get("container"),"fave-view":this.subviews["fave-view"].get("container"),"share-view":this.subviews["fluid-share-photo-view"]?this.subviews["fluid-share-photo-view"].get("container"):"",photoId:t.getValue("id"),isVideo:t.getValue("isVideo"),viewerIsOwner:n.getValue("isMe"),canCreateWallart:this.canCreateWallart(),isWallartLowQuality:this.isWallartLowQuality(),downloadingAvailable:!1,downloadLink:""},this.subviews["vr-engagement-view"]&&(r["vr-engagement-view"]=this.subviews["vr-engagement-view"].get("container")),t.getValue("isVideo")?(r.downloadLink="/video_download.gne?id="+t.getValue("id"),this.appContext.flipper.isFlipped("enable-album-download")&&(r.downloadingAvailable=t.getValue("engagement").getValue("canDownload")),n.getValue("isMe")&&(r.downloadingAvailable=!0)):(r.downloadLink=t.getValue("url")+"/sizes/l/",r.downloadingAvailable=!0),this.appContext.forceServerRender&&(r.downloadItems=this.getDownloadMenuItems()),e=this.templates("photo-engagement")(r),this.setContainerHTML(e),r.canCreateWallart&&this.get("container").addClass("has-wallart"),this.subviews["vr-engagement-view"]&&this.subviews["vr-engagement-view"].get("canVr")&&this.get("container").addClass("has-vr"),this},buildErrorContainer:function(){this.setContainerHTML("")},activate:function(){var e=this.get("photo").getValue("license"),t=e!==0&&e!==7&&e!==8&&e!==10,n=e===9,r=e===10,i=this.get("container");if(this.signinPendingQueue&&this.signinPendingQueue.length>0){var s=this.signinPendingQueue;for(var o=0;o<s.length;o++)s[o].key==="download"&&s[o].value&&s[o].value.id===this.photoId&&this.downloadItem(s[o].value.imageUrl)}return this.appContext.flipper.isFlipped("enable-signed-out-download-cta-test")&&!this.appContext.getViewer().signedIn&&!this.appContext.getUA().isBot&&this.get("photo").getValue("owner").getValue("isPro")!==!0&&!t&&!n&&!r&&this.get("photo").getValue("visibilitySource")!==2&&(this.signedOutTest=!0),this.createDownloadDialog(this.getDownloadMenuItems()),this.registerEventHandler(i.all(".sizes li a.download-image-size").on("click",this.handleDownloadItemClick,this)),this.attachKeyEvent("down:68",this.handleDownloadMenuButtonClick.bind(this)),this.registerEventHandler(i.delegate("click",this.handleDownloadMenuButtonClick.bind(this),".download a")),this.registerEventHandler(i.delegate("click",this.createWallartClick.bind(this),".wallart a")),this.registerEventHandler(this.get("photo").on("valuesChanged",function(e){e.isMarketplacePrintable&&e.isMarketplacePrintable.newVal===!0&&(this.buildContainer(),this.getDownloadMenuItems(),this.get("container").all(".sizes li a.download-image-size").on("click",this.handleDownloadItemClick,this))}.bind(this))),this.signedOutTest&&this.registerEventHandler(i.one(".all-sizes").on("click",function(e){e.halt(),this.signUpAndDownloadItem()}.bind(this))),this},canCreateWallart:function(){var e=!1,t,n=this.appContext.getViewer(),r,i,s,o,u;return t=this.get("photo"),t&&n&&(i=!1,r=t.getValue("owner").getValue("isMe"),s=t.getValue("isMarketplacePrintable"),u=t.getValue("safetyLevel")===0,o=!t.getValue("isVideo"),this.appContext.flipper.isFlipped("creative-commons-wallart")?r?this.appContext.getViewer().signedIn&&o&&(e=!0):i?this.appContext.getViewer().signedIn&&o&&u&&(e=!0):s&&this.appContext.getViewer().signedIn&&o&&u&&(e=!0):this.appContext.getViewer().signedIn&&r&&o&&(e=!0)),e},isWallartLowQuality:function(){var t=this.get("photo");return this.wallartHelper||(this.wallartHelper=new e.WallartHelper),this.wallartHelper.isPhotoWallartable(t).skus.length===0?!0:!1},createWallartClick:function(n){var r=this,i="/create/wallart/",s=this.get("photo"),o;n.halt(),e.rapidTracker.beacon(t,"createWallartClick");if(s.getValue("hasInvalidColorspaceForPrint"))return this.handleLacksWallartability("COLORSPACE");this.wallartHelper||(this.wallartHelper=new e.WallartHelper(this.appContext));if(this.wallartHelper.isPhotoWallartable(s).skus.length===0)return this.handleLacksWallartability("LOW_QUALITY");this.appContext.getModelRegistry("wallart-models").then(function(t){t.remoteCreate({nsid:r.appContext.getViewer().nsid,photoId:s.getValue("id")}).then(function(t){i+=t.getValue("id")+"/edit",YUI.Env.isServer||(!r.appContext.secure&&window.location.host===e.config.flickr.url.host?e.config.win.location.href=i:r.appContext.flapp.navigate(i))},function(t){o=new e.Views.FluidModal({appContext:r.appContext,darkOverlay:!0,dismissOnOverlayClick:!0,actionButtonLabel:r.intlMessage({intlName:"common.OK"}),title:r.intlMessage({intlName:"common.UPLOAD_ERROR_TITLE"}),message:"There was a problem creating your wall art. Please try again later."}),o.show(),e.Flog.warn("uh oh spaghettios")})})},handleLacksWallartability:function(t){var n,r;t==="LOW_QUALITY"?r="Looks like this photo doesn't meet the minimum requirements to get printed. Please choose a photo that's at least 975 &times; 825 pixels. Learn more about <a href='http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567'>requirements</a> for print products."
:t==="COLORSPACE"&&(r="Sorry, we cannot print photos with a CMYK or ProPhoto RGB colorspace. We recommend photos with an sRGB color space. <a href='https://help.yahoo.com/kb/flickr/creations-faq-sln22216.html?impressions=true#cont33'>Learn more</a>."),n=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,showCancelX:!0,title:"Try a different photo",message:r,classList:"lacks-wallartability"}),n.show()},getDownloadMenuItems:function(t){var n=e.clone(this.get("photo").toJSON()),r,i=[],s,o=this.get("photo").getValue("engagement").getValue("canDownload"),u=!1;n.sizes.q&&(n.sizes.q.label=this.intlMessage({intlName:"photo-page-scrappy.SQUARE"}),i.push(n.sizes.q)),n.sizes.s&&(n.sizes.s.label=this.intlMessage({intlName:"photo-page-scrappy.SMALL"}),i.push(n.sizes.s)),n.sizes.z&&(n.sizes.z.label=this.intlMessage({intlName:"photo-page-scrappy.MEDIUM"}),i.push(n.sizes.z)),n.sizes.k?(n.sizes.k.label=this.intlMessage({intlName:"photo-page-scrappy.LARGE"}),i.push(n.sizes.k)):n.sizes.h?(n.sizes.h.label=this.intlMessage({intlName:"photo-page-scrappy.LARGE"}),i.push(n.sizes.h)):n.sizes.l&&(n.sizes.l.label=this.intlMessage({intlName:"photo-page-scrappy.LARGE"}),i.push(n.sizes.l)),n.sizes.o&&(n.sizes.o.label=this.intlMessage({intlName:"photo-page-scrappy.ORIGINAL"}),i.push(n.sizes.o));for(s=0;s<i.length;s++)i[s].url=i[s].displayUrl.replace(/^(.+)(\..+)$/,"$1_d$2");return o&&(u=!0),r=this.templates("scrappy-download-menu")({photo:n,sizes:i,showDownloadSizes:u}),r},createDownloadDialog:function(t){var n=this.get("container"),r=this;this.downloadMenu=e.Views.dialog.getNewInstance("dialog-tooltip",{content:t,anchorTo:n.one(".download"),dropUp:!0,parent:this,positioning:!1,rootEl:n}),this.downloadMenu.render(),this.downloadMenu.on("toggle",function(e){e&&e.details&&e.details.length>0&&(e.details[0]?r.fire("subviewViewEvent","make in view",n):r.fire("subviewViewEvent","close in view"))})},handleDownloadMenuButtonClick:function(n){var r=this.get("photo"),i;n.target.ancestor(".download",!0).hasClass("disabled")&&n.preventDefault();if(r.getValue("isVideo")){if(!this.appContext.flipper.isFlipped("enable-album-download")){i=r.getValue("owner").getValue("isMe");if(!i)return n.preventDefault(),!1}}else n.halt(),this.downloadMenu.toggle();e.rapidTracker.beacon(t,"downloadDialogClick")},handleDownloadItemClick:function(n){n.preventDefault();var r;r=n.currentTarget.getAttribute("href"),this.signedOutTest?this.signUpAndDownloadItem(r):this.downloadItem(r),e.rapidTracker.beacon(t,"photoDownloadClick"),this.downloadMenu.hide()},downloadItem:function(e){document.location=e},signUpAndDownloadItem:function(t){var n=this,r=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_DOWNLOAD_TITLE"}),i=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_DOWNLOAD_MESSAGE"}),s,o;s=e.url(e.URLHelper.getPhotoPage({photoId:this.photoId,pathAlias:this.nsid})),o=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-download",signUpTitle:r,signUpMessage:i,beaconPrefix:"download"}),o.on("signUpClick",function(r){t?e.SigninHelper.signUpPendingDownload({id:n.photoId,imageUrl:t},{postLoginUrl:s}):e.SigninHelper._redirectToSignUp("download",{postLoginUrl:s+"sizes/l/"})}),o.on("signInClick",function(r){t?e.SigninHelper.addPendingDownload({id:n.photoId,imageUrl:t},{postLoginUrl:s}):e.SigninHelper._redirectToSignin("download",{postLoginUrl:s+"sizes/l/"})}),o.show()}})},"@VERSION@",{requires:["flickr-view","flog","hermes-template-photo-engagement","hermes-template-download-dialog","hermes-template-scrappy-download-menu","wallart-helper","photo-engagement-css","signup-modal-view","fluid-share-photo-view","vr-engagement-view","better-throttle"],optional:["photo-models","wallart-models"],langBundles:["common","photo-page-scrappy"]});
YUI.add("hermes-lang-attribution",function(e,t){e.Intl.add("hermes/attribution","en-US",{FOLLOW:["Follow"],FOLLOWING:["Following"],ERROR_SETTING_FRIEND:["There was a problem setting your friend relationship"],ERROR_SETTING_FAMILY:["There was a ",{type:"number",valueName:"POPULATION",format:"integer"}," problem setting your family relationship"],FRIEND:["Friend"],FAMILY:["Family"],UNFOLLOW:["Unfollow"],GO_TO_PHOTOSTREAM:["Go to ","${name}","'s photostream"],BY_USER:["By: ","${user}"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-head-meta",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function d(e,t){return'name="'}function v(e,t){return'property="'}function m(e,t){var n="";return n+='description="'+l(typeof e===f?e.apply(e):e)+'"',n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing,p=n.blockHelperMissing;s+="<meta ",o=n["if"].call(t,t.isName,{hash:{},inverse:c.program(3,v,i),fn:c.program(1,d,i),data:i});if(o||o===0)s+=o;(o=n.metaName)?o=o.call(t,{hash:{},data:i}):(o=t.metaName,o=typeof o===f?o.apply(t):o),s+=l(o)+'" content="',a={hash:{},data:i},s+=l((o=n.renderMetaInfo||t.renderMetaInfo,o?o.call(t,t.metaValue,a):h.call(t,"renderMetaInfo",t.metaValue,a)))+'" ',a={hash:{},inverse:c.noop,fn:c.program(5,m,i),data:i},(u=n.metaDescription)?u=u.call(t,a):(u=t.metaDescription,u=typeof u===f?u.apply(t):u),n.metaDescription||(u=p.call(t,u,a));if(u||u===0)s+=u;return s+=' data-dynamic="true">\n',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/head-meta",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-head-link",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i;return r+='id="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function h(e,t){var r="",i;return r+='rev="',(i=n.rev)?i=i.call(e,{hash:{},data:t}):(i=e.rev,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function p(e,t){var r="",i;return r+='rel="',(i=n.rel)?i=i.call(e,{hash:{},data:t}):(i=e.rel,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function d(e,t){var r="",i;return r+='type="',(i=n.type)?i=i.call(e,{hash:{},data:t}):(i=e.type,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function v(e,t){var r="",i;return r+='media="',(i=n.media)?i=i.call(e,{hash:{},data:t}):(i=e.media,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function m(e,t){var r="",i;return r+='href="',(i=n.href)?i=i.call(e,{hash:{},data:t}):(i=e.href,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function g(e,t){var r="",i,s;return r+='data-dynamic-added-by="',s={hash:{},data:t},r+=a((i=n.obfuscateInternals||e.obfuscateInternals,i?i.call(e,e.addedBy,s):f.call(e,"obfuscateInternals",e.addedBy,s)))+'"',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;s+="<link ",o=n["if"].call(t,t.id,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.rev,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.rel,{hash:{},inverse:l.noop,fn:l.program(5,p,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.type,{hash:{},inverse:l.noop,fn:l.program(7,d,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.media,{hash:{},inverse:l.noop,fn:l.program(9,v,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.href,{hash:{},inverse:l.noop,fn:l.program(11,m,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.addedBy,{hash:{},inverse:l.noop,fn:l.program(13,g,i),data:i});if(o||o===0)s+=o;return s+=' data-dynamic="true" />',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/head-link",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-head-meta-view",function(e){var t=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this},subviewConfig:{},buildContainer:function(){return this},loadState:function(){var t=this;return e.Promise.all([t.appContext.getModel("photo-head-meta-models",t._params.photoId),t.appContext.getModel("photo-models",t._params.photoId),t.appContext.getModel("photo-privacy-models",t._params.photoId)]).then(function(e){t.set("photo-meta",e[0]),t.set("photo",e[1]),t.set("photo-privacy",e[2])})},buildHeadContainer:function(){var t=this.get("photo-meta"),n=this.get("photo"),r=this.get("photo-privacy"),i=e.url(),s=t.getFieldsForDisplay(),o="",u=this,a=[{id:"canonicalurl",rel:"canonical",href:i+n.getValue("url")},{rel:"alternative",type:"application/json+oembed",href:i+"/services/oembed?url="+encodeURI(i+n.getValue("url"))+"&format=json",title:n.getValue("title")},{rel:"alternative",type:"text/xml+oembed",href:i+"/services/oembed?url="+encodeURI(i+n.getValue("url"))+"&format=xml",title:n.getValue("title")},{rel:"alternative",media:"only screen and (max-width: 640px)",href:"https://m.flickr.com"+encodeURI(n.getValue("url")+"/")}];s["al:ios:url"]||(s["al:ios:url"]="flickr://flickr.com"+n.getValue("url")),o+=this.templates("head-meta")({isName:!0,metaName:"description",metaValue:n.getValue("description")||n.getValue("title")})+"\n";var f="noarchive";return r.getValue("isPublic")||(f+=", noindex"),o+=this.templates("head-meta")({isName:!0,metaName:"robots",metaValue:f}),o+=this.templates("head-meta")({isName:!0,metaName:"googlebot",metaValue:f}),Object.keys(s).forEach(function(e){typeof s[e]=="object"&&e==="pinterest"?o+=u.templates("head-meta")({metaName:e,noPin:!0,metaValue:s[e].nopin,metaDescription:s[e].reason,isName:!0})+"\n":e==="og:description"?o+=u.templates("head-meta")({metaName:e,metaValue:s[e]})+"\n":e==="title"?o+=u.templates("head-meta")({isName:!0,metaName:"title",metaValue:s[e]})+"\n":e==="keywords"?o+=u.templates("head-meta")({isName:!0,metaName:e,metaValue:s[e]})+"\n":e==="noindexfollow"?s[e]&&(s[e]>0||s[e]!=="")&&(o+=u.templates("head-meta")({isName:!0,metaName:"robots",metaValue:"noindex,follow"})+"\n",o+=u.templates("head-meta")({isName:!0,metaName:"googlebot",metaValue:"noindex,follow"})+"\n"):o+=u.templates("head-meta")({metaName:e,metaValue:s[e]})+"\n"}),a.forEach(function(e){e.addedBy=u.name,o+=u.templates("head-link")(e)+"\n"}),this.set("headContainer",o),YUI.Env.isServer||this.updateHead(),this}});return e.mix(t.prototype,e.Seo),t},"@VERSION@",{requires:["flickr-view","hermes-template-head-meta","hermes-template-head-link"],optional:["photo-head-meta-models","photo-route","url","seo"],langBundles:["meta","common","attribution","share-modal"]});
YUI.add("hermes-lang-meta",function(e,t){e.Intl.add("hermes/meta","en-US",{PHOTOSTREAM:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"photo on Flickr!",other:"${#} photos on Flickr!"}}],PHOTOSTREAM_NO_PHOTOS:["Explore ","${username}","'s photos on Flickr!"],ALBUMS_LIST:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"album on Flickr!",other:"${#} albums on Flickr!"}}],ALBUMS_LIST_NO_ALBUMS:["Explore ","${username}","'s albums on Flickr!"],FAVORITES:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"favorites on Flickr!",other:"${#} favorites on Flickr!"}}],FAVORITES_NO_PHOTOS:["Explore ","${username}","'s favorites on Flickr!"],META_DESCRIPTION_BY_USER_ON_FLICKR:["By ","${username}"," on Flickr"],PHOTOSTREAM_ATOM_TITLE:["Flickr: ","${username}","'s Photostream Atom feed"],FAVORITES_ATOM_TITLE:["Flickr: ","${username}","'s Favorites Atom feed"],GROUP_POOL_ATOM_TITLE:["Flickr: ","${groupName}","'s Photos Atom feed"],GROUP_DISCUSSIONS_ATOM_TITLE:["Flickr: ","${groupName}","'s Discussions Atom feed"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-global-nav",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n			<li role="menuitem" class="gn-signup">\n				<a data-track="gnSignupClick" class="gn-title butt" href="/signup">',s={hash:{intlName:"common.SIGN_UP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n			</li>\n		",r}function d(e,t){var r="",i,s,o;r+='\n			<li role="menuitem" data-context="you">\n				<a data-track="gnYouMainClick" class="gn-title you" href="'+l((i=(i=e.viewer,i==null||i===!1?i:i.url),typeof i===c?i.apply(e):i))+'" aria-haspopup="true">',o={hash:{intlName:"common.YOU"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a class="server-only-link" data-track="gnYouCameraRollClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.cameraroll),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"global-nav.CAMERAROLL"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'<span class="label-beta">',o={hash:{intlName:"common.BETA"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</span></a></li>\n					<li class="menuitem"><a data-track="gnYouPhotostreamClick" href="'+l((i=(i=e.viewer,i==null||i===!1?i:i.url),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.PHOTOSTREAM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouSetsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.albums),typeof i===c?i.apply(e):i))+'">',s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.set_not_album),{hash:{},inverse:h.program(6,m,t),fn:h.program(4,v,t),data:t});if(s||s===0)r+=s;r+='</a></li>\n					<li class="menuitem"><a data-track="gnYouMapClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.map),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.MAP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouFavoritesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.favorites),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.FAVORITES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouGalleriesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.galleries),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"common.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouRecentActivityClick" href="/activity">',o={hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.stats),{hash:{},inverse:h.noop,fn:h.program(8,g,t),data:t});if(s||s===0)r+=s;return r+='\n					<li class="menuitem"><a data-track="gnYouOrganizeClick" href="/photos/organize">',o={hash:{intlName:"global-nav.ORGANIZE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li class="menuitem"><a class="server-only-link" data-track="gnYouCreationsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.creations),typeof i===c?i.apply(e):i))+'">',o={hash:{intlName:"global-nav.CREATIONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n				</ul>\n			</li>\n		",r}function v(e,t){var r,i;return i={hash:{intlName:"common.SETS"},data:t},l((r=n.intlMessage||e.intlMessage,r?r.call(e,i):f.call(e,"intlMessage",i)))}function m(e,t){var r,i;return i={hash:{intlName:"common.ALBUMS"},data:t},l((r=n.intlMessage||e.intlMessage,r?r.call(e,i):f.call(e,"intlMessage",i)))}function g(e,t){var r="",i,s;return r+='<li class="menuitem"><a data-track="gnYouStatsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.stats),typeof i===c?i.apply(e):i))+'">',s={hash:{intlName:"global-nav.STATS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>",r}function y(e,t){var r="",i,s;return r+='\n			<li class="toplink">\n				<a data-track="gnYouMainClick" class="gn-link" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.photostream),typeof i===c?i.apply(e):i))+'"><span>',s={hash:{intlName:"global-nav.YOUR_PHOTOSTREAM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</span></a>\n			</li>\n		",r}function b(e,t){var r="",i,s;return r+='\n			<li role="menuitem" data-context="contacts">\n				<a data-track="gnContactsMainClick" class="gn-title contacts" href="/photos/friends" aria-haspopup="true">',s={hash:{intlName:"global-nav.PEOPLE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a data-track="gnContactsRecentPhotosClick" href="/photos/friends">',s={hash:{intlName:"global-nav.PHOTOS_FROM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsPhotosOfContactsClick" href="/photosof/contacts">',s={hash:{intlName:"global-nav.PHOTOS_OF"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsContactListClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.list),typeof i===c?i.apply(e):i))+'">',s={hash:{intlName:"global-nav.LIST"},data:t},r+=l((i=
n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsAddContactsClick" href="/import/people">',s={hash:{intlName:"global-nav.FIND_FRIENDS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>\n				</ul>\n			</li>\n		",r}function w(e,t){var r="",i,s;return r+='\n			<li role="menuitem" data-context="groups">\n				<a data-track="gnGroupsMainClick" class="gn-title groups" href="/groups" aria-haspopup="true">',s={hash:{intlName:"global-nav.GROUPS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a data-track="gnGroupsGroupsListClick" href="/groups">',s={hash:{intlName:"global-nav.GROUPS_LIST"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnGroupsRecentDiscussionsClick" href="/recent.gne">',s={hash:{intlName:"global-nav.RECENT_DISCUSSIONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a></li>\n					<li class="menuitem"><a data-track="gnGroupsCreateAGroupClick" href="/groups_create.gne">',s={hash:{intlName:"global-nav.CREATE_A_GROUP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>\n				</ul>\n			</li>\n		",r}function E(e,t){var r="",i,s,o;r+='\n			<li role="menuitem" data-context="explore">\n				<a data-track="gnExploreMainClick" class="gn-title explore" href="/explore" aria-haspopup="true">',o={hash:{intlName:"common.EXPLORE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li role="menuitem"><a data-track="gnExploreRecentPhotosClick" href="/explore">',o={hash:{intlName:"global-nav.RECENT_PHOTOS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreTheCommonsClick" href="/commons">',o={hash:{intlName:"global-nav.THE_COMMONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExplore20under20Click" href="/20under20">20under20</a></li>\n					<li role="menuitem"><a data-track="gnExploreGalleriesClick" href="/galleries">',o={hash:{intlName:"global-nav.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreWorldMapClick" href="/map">',o={hash:{intlName:"global-nav.WORLD_MAP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreAppGardenClick" href="/services">',o={hash:{intlName:"global-nav.APP_GARDEN"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreCameraFinderClick" href="/cameras">',o={hash:{intlName:"global-nav.CAMERA_FINDER"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.weekly_flickr),{hash:{},inverse:h.noop,fn:h.program(17,S,t),data:t});if(s||s===0)r+=s;return r+='\n					<li role="menuitem"><a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">',o={hash:{intlName:"global-nav.FLICKR_BLOG"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n				</ul>\n			</li>\n		",r}function S(e,t){var r="",i,s;return r+='<li role="menuitem"><a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">',s={hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>",r}function x(e,t){var r="",i,s;return r+='\n			<li role="menuitem" class="gn-create">\n				<a data-track="gnCreateMainClick" class="gn-title" href="/create">',s={hash:{intlName:"global-nav.CREATE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n			</li>\n		",r}function T(e,t){var r="",i,s;return r+='\n			<li role="menuitem" data-context="create">\n				<a data-track="gnCreateMainClick" class="gn-title create" href="/create" aria-haspopup="true">',s={hash:{intlName:"global-nav.CREATE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<!-- <li class="menuitem"><a data-track="gnCreateFooClick" href="/foo">',s={hash:{intlName:"global-nav.FOO"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li> -->\n				</ul>\n			</li>\n		",r}function N(e,t){var r="",i,s;return r+='\n			<li role="menuitem" class="gn-upload">\n				<a data-track="gnUploadMain" class="gn-title" href="/upload">',s={hash:{intlName:"global-nav.UPLOAD"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n			</li>\n		",r}function C(e,t){var r="",i;r+="\n			",i=n["if"].call(e,e.showAutosuggest,{hash:{},inverse:h.program(28,L,t),fn:h.program(26,k,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function k(e,t){var r="",i,s;return r+='\n				<li role="menuitem">\n					',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["autosuggest-view"],s):f.call(e,"outlet",e["autosuggest-view"],s)))+"\n				</li>\n			",r}function L(e,t){var r="",i;r+="\n				",i=n["if"].call(e,e.showSmartSearchBar,{hash:{},inverse:h.program(31,O,t),fn:h.program(29,A,t),data:t});if(i||i===0)r+=i;return r+="\n			",r}function A(e,t){var r="",i,s;return r+='\n					<li role="menuitem">\n						',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["search-bar-view"],s):f.call(e,"outlet",e["search-bar-view"],s)))+"\n					</li>\n				"
,r}function O(e,t){var r="",i,s;return r+='\n					<li role="menuitem">\n						<form method="get" role="search">\n							<input type="text" name="text" value="',(i=n.searchValue)?i=i.call(e,{hash:{},data:t}):(i=e.searchValue,i=typeof i===c?i.apply(e):i),r+=l(i)+'" id="gn-search-field" autocomplete="off" aria-label="Search" role="textbox">\n							<input type="submit" data-track="gnSearchSearchIcon" class="search-icon" tabindex="-1" aria-label="',s={hash:{intlName:"global-nav.SEARCH"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'" role="button">\n						</form>\n					</li>\n				',r}function M(e,t){var r="",i,s;return r+='\n			<li role="menuitem">\n				',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["notifications-menu-view"],s):f.call(e,"outlet",e["notifications-menu-view"],s)))+"\n			</li>\n		",r}function _(e,t){var r="",i,s;return r+='\n			<li role="menuitem">\n				',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["account-menu-view"],s):f.call(e,"outlet",e["account-menu-view"],s)))+"\n			</li>\n		",r}function D(e,t){var r="",i,s;return r+='\n			<li role="menuitem" class="gn-signin">\n				<a data-track="gnSignin" class="gn-title" href="/signin">',s={hash:{intlName:"global-nav.SIGN_IN"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n			</li>\n		",r}function P(e,t){var r="",i,s;return r+="\n	",s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["browser-upgrade-banner-view"],s):f.call(e,"outlet",e["browser-upgrade-banner-view"],s)))+"\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["mobile-app-upsell-view"],a):f.call(t,"outlet",t["mobile-app-upsell-view"],a)))+'\n\n<div class="global-nav-old">\n<div class="global-nav-shim"></div>\n<div class="global-nav-content styleguide-global-nav fluid">\n	<a href="/" class="main-logo" data-track="gnLogoClick" title="',a={hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):f.call(t,"intlMessage",a)))+'"></a>\n\n	<ul class="nav-menu" role="menubar">\n\n		',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signup_link),{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_menu),{hash:{},inverse:h.noop,fn:h.program(3,d,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_link),{hash:{},inverse:h.noop,fn:h.program(10,y,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.contacts_menu),{hash:{},inverse:h.noop,fn:h.program(12,b,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.groups_menu),{hash:{},inverse:h.noop,fn:h.program(14,w,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.explore_menu),{hash:{},inverse:h.noop,fn:h.program(16,E,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.create_link),{hash:{},inverse:h.noop,fn:h.program(19,x,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.create_menu),{hash:{},inverse:h.noop,fn:h.program(21,T,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.upload_link),{hash:{},inverse:h.noop,fn:h.program(23,N,i),data:i});if(u||u===0)s+=u;s+='\n	</ul>\n\n	<ul class="gn-tools">\n		',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.search_bar),{hash:{},inverse:h.noop,fn:h.program(25,C,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,t.showNotificationsMenu,{hash:{},inverse:h.noop,fn:h.program(33,M,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.account_menu),{hash:{},inverse:h.noop,fn:h.program(35,_,i),data:i});if(u||u===0)s+=u;s+="\n\n		",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signin_link),{hash:{},inverse:h.noop,fn:h.program(37,D,i),data:i});if(u||u===0)s+=u;s+="\n	</ul>\n</div>\n\n",u=n["if"].call(t,t["show-browser-upgrade-banner"],{hash:{},inverse:h.noop,fn:h.program(39,P,i),data:i});if(u||u===0)s+=u;return s+="\n\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["person-menu-view"],a):f.call(t,"outlet",t["person-menu-view"],a)))+"\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["group-menu-view"],a):f.call(t,"outlet",t["group-menu-view"],a)))+"\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/global-nav",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-global-nav-restyle",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i,s;r+="\n			",s=n.unless.call(e,(i=e.elements,i==null||i===!1?i:i.right_side_signup),{hash:{},inverse:c.noop,fn:c.program(2,d,t),data:t});if(s||s===0)r+=s;return r+="\n			",r}function d(e,t){var r="",i,s;return r+='\n				<li role="menuitem" class="gn-signup">\n					<a data-track="gnSignupClick" class="gn-title butt" href="/signup">',s={hash:{intlName:"common.SIGN_UP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n				</li>\n			",r}function v(e,t){var r="",i,s,o;r+='\n				<li role="menuitem" data-context="you">\n					<a data-track="gnYouMainClick" class="gn-title you" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.cameraroll),typeof i===h?i.apply(e):i))+'" aria-haspopup="true">',o={hash:{intlName:"common.YOU"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a>\n					<ul class="gn-submenu" role="menu">\n						<li class="menuitem"><a data-track="gnYouCameraRollClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.cameraroll),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"global-nav.CAMERAROLL"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'<span class="label-beta">',o={hash:{intlName:"common.BETA"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</span></a></li>\n						<li class="menuitem"><a data-track="gnYouPhotostreamClick" href="'+l((i=(i=e.viewer,i==null||i===!1?i:i.url),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.PHOTOSTREAM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li class="menuitem"><a data-track="gnYouSetsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.albums),typeof i===h?i.apply(e):i))+'">',s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.set_not_album),{hash:{},inverse:c.program(7,g,t),fn:c.program(5,m,t),data:t});if(s||s===0)r+=s;r+='</a></li>\n						<li class="menuitem"><a data-track="gnYouFavoritesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.favorites),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.FAVORITES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li class="menuitem"><a data-track="gnYouGroupsClick" href="/groups">',o={hash:{intlName:"global-nav.GROUPS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li class="menuitem"><a data-track="gnYouCreationsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.creations),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"global-nav.CREATIONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li class="menuitem"><a data-track="gnYouPeopleClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.people),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.PEOPLE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li class="menuitem"><a data-track="gnYouRecentActivityClick" href="/activity">',o={hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n						",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.stats),{hash:{},inverse:c.noop,fn:c.program(9,y,t),data:t});if(s||s===0)r+=s;return r+='\n						<li class="menuitem"><a data-track="gnYouOrganizeClick" href="/photos/organize">',o={hash:{intlName:"global-nav.ORGANIZE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					</ul>\n				</li>\n			",r}function m(e,t){var r,i;return i={hash:{intlName:"common.SETS"},data:t},l((r=n.intlMessage||e.intlMessage,r?r.call(e,i):f.call(e,"intlMessage",i)))}function g(e,t){var r,i;return i={hash:{intlName:"common.ALBUMS"},data:t},l((r=n.intlMessage||e.intlMessage,r?r.call(e,i):f.call(e,"intlMessage",i)))}function y(e,t){var r="",i,s;return r+='<li class="menuitem"><a data-track="gnYouStatsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.stats),typeof i===h?i.apply(e):i))+'">',s={hash:{intlName:"global-nav.STATS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>",r}function b(e,t){var r="",i,s;return r+='\n				<li class="toplink">\n					<a data-track="gnYouMainClick" class="gn-link" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.cameraroll),typeof i===h?i.apply(e):i))+'"><span>',s={hash:{intlName:"global-nav.CAMERAROLL"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</span></a>\n				</li>\n			",r}function w(e,t){var r="",i,s,o;r+='\n				<li role="menuitem" data-context="explore">\n					<a data-track="gnExploreMainClick" class="gn-title explore" href="/explore" aria-haspopup="true">',o={hash:{intlName:"common.EXPLORE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a>\n					<ul class="gn-submenu" role="menu">\n						<li role="menuitem"><a data-track="gnExploreRecentPhotosClick" href="/explore">',o={hash:{intlName:"global-nav.RECENT_PHOTOS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n						",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.show_tags_menu_link),{hash:{},inverse:c.noop,fn:c.program(14,E,t),data:t});if(s||s===0)r+=s;r+='\n						<li role="menuitem"><a data-track="gnExploreTheCommonsClick" href="/commons">',o={hash:{intlName:"global-nav.THE_COMMONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li role="menuitem"><a data-track="gnExplore20under20Click" href="/20under20">20under20</a></li>\n						<li role="menuitem"><a data-track="gnExploreGalleriesClick" href="/galleries">'
,o={hash:{intlName:"global-nav.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li role="menuitem"><a data-track="gnExploreWorldMapClick" href="/map">',o={hash:{intlName:"global-nav.WORLD_MAP"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li role="menuitem"><a data-track="gnExploreAppGardenClick" href="/services">',o={hash:{intlName:"global-nav.APP_GARDEN"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></li>\n						<li role="menuitem"><a data-track="gnExploreCameraFinderClick" href="/cameras">',o={hash:{intlName:"global-nav.CAMERA_FINDER"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n						",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.weekly_flickr),{hash:{},inverse:c.noop,fn:c.program(16,S,t),data:t});if(s||s===0)r+=s;return r+='\n						<li role="menuitem"><a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">',o={hash:{intlName:"global-nav.FLICKR_BLOG"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></li>\n					</ul>\n				</li>\n			",r}function E(e,t){var r="",i,s;return r+='\n							<li role="menuitem"><a data-track="gnExploreTagsClick" href="/photos/tags">',s={hash:{intlName:"common.TRENDING"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>\n						",r}function S(e,t){var r="",i,s;return r+='<li role="menuitem"><a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">',s={hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li>",r}function x(e,t){var r="",i,s;return r+='\n				<li role="menuitem" class="gn-create">\n					<a data-track="gnCreateMainClick" class="gn-title" href="/create">',s={hash:{intlName:"global-nav.CREATE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n				</li>\n			",r}function T(e,t){var r="",i,s;return r+='\n				<li role="menuitem" data-context="create">\n					<a data-track="gnCreateMainClick" class="gn-title create" href="/create" aria-haspopup="true">',s={hash:{intlName:"global-nav.CREATE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</a>\n					<ul class="gn-submenu" role="menu">\n						<!-- <li class="menuitem"><a data-track="gnCreateFooClick" href="/foo">',s={hash:{intlName:"global-nav.FOO"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></li> -->\n					</ul>\n				</li>\n			",r}function N(e,t){return" with-upload-icon"}function C(e,t){var r="",i,s;return r+='\n				<li role="menuitem" class="gn-upload">\n					<a data-track="gnUploadMain" class="gn-title" href="/upload">',s={hash:{intlName:"global-nav.UPLOAD"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n				</li>\n			",r}function k(e,t){var r="",i;r+='\n				<li role="menuitem" class="gn-search-box">\n\n					<svg class="icon icon-search mobile-search-button"><use xlink:href="#icon-search"></use></svg>\n\n					',i=n["if"].call(e,e.enableNewAutosugest,{hash:{},inverse:c.program(29,A,t),fn:c.program(27,L,t),data:t});if(i||i===0)r+=i;return r+='\n\n					<svg class="mobile-search-close-button"><use xlink:href="#icon-close"></use></svg>\n\n				</li>\n			',r}function L(e,t){var r="",i,s;return r+="\n							",s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["search-autosuggest-field-view"],s):f.call(e,"outlet",e["search-autosuggest-field-view"],s)))+"\n					",r}function A(e,t){var r="",i;r+="\n						",i=n["if"].call(e,e.showSmartSearchBar,{hash:{},inverse:c.program(32,M,t),fn:c.program(30,O,t),data:t});if(i||i===0)r+=i;return r+="\n					",r}function O(e,t){var r="",i,s;return r+="\n							",s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["search-bar-view"],s):f.call(e,"outlet",e["search-bar-view"],s)))+"\n						",r}function M(e,t){var r="",i,s,o;return r+='\n							<form method="get" role="search">\n								<input type="text" placeholder="',o={hash:{intlName:"search.PHOTOS_PEOPLE_OR_GROUPS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'" name="text" value="',(s=n.searchValue)?s=s.call(e,{hash:{},data:t}):(s=e.searchValue,s=typeof s===h?s.apply(e):s),r+=l(s)+'" id="gn-search-field" autocomplete="off" aria-label="Search" role="textbox">\n								<label data-track="gnSearchSearchIcon" aria-label="',o={hash:{intlName:"global-nav.SEARCH"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'">\n									'+'\n									<svg class="search-icon" style="width: 22px; height: 22px;" data-track="gnSearchSearchIcon" aria-label="',o={hash:{intlName:"global-nav.SEARCH"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'"><use xlink:href="#icon-search"></use></svg>\n\n									<input type="submit" data-track="gnSearchSearchIcon" class="search-icon-button" tabindex="-1" aria-label="',o={hash:{intlName:"global-nav.SEARCH"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'" role="button">\n								</label>\n							</form>\n						',r}function _(e,t){var r="",i,s;return r+='\n				<li role="menuitem" class="gn-upload">\n					<a data-track="gnUploadIconMain" class="gn-title" href="/upload"><i class="upload-icon" title="',s={hash:{intlName:"global-nav.UPLOAD"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'">',s={hash:{intlName:"global-nav.UPLOAD"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</i></a>\n				</li>\n			",r}function D(e,t){var r="",i,s;return r+='\n				<li role="menuitem">\n					',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call
(e,e["notifications-menu-view"],s):f.call(e,"outlet",e["notifications-menu-view"],s)))+"\n				</li>\n			",r}function P(e,t){var r="",i,s;return r+='\n				<li role="menuitem">\n					',s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["account-menu-view"],s):f.call(e,"outlet",e["account-menu-view"],s)))+"\n				</li>\n			",r}function H(e,t){var r="",i,s;return r+='\n				<li role="menuitem" class="gn-signin">\n					<a data-track="gnSignin" class="gn-title" href="/signin">',s={hash:{intlName:"global-nav.SIGN_IN"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n				</li>\n			",r}function B(e,t){var r="",i,s;r+="\n			",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.right_side_signup),{hash:{},inverse:c.noop,fn:c.program(2,d,t),data:t});if(s||s===0)r+=s;return r+="\n			",r}function j(e,t){return"extended"}function F(e,t){var r="",i,s,o;r+='\n				<div class="mobile-nav-column">\n					<div class="mobile-nav-menu-item mobile-nav-menu-title">',o={hash:{intlName:"common.YOU"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouCameraRollClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.cameraroll),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"global-nav.CAMERAROLL"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'<span class="label-beta">',o={hash:{intlName:"common.BETA"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</span></a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouPhotostreamClick" href="'+l((i=(i=e.viewer,i==null||i===!1?i:i.url),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.PHOTOSTREAM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouSetsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.albums),typeof i===h?i.apply(e):i))+'">',s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.set_not_album),{hash:{},inverse:c.program(7,g,t),fn:c.program(5,m,t),data:t});if(s||s===0)r+=s;r+='</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouFavoritesClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.favorites),typeof i===h?i.apply(e):i))+'">',o={hash:{intlName:"common.FAVORITES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouGroupsClick" href="/groups">',o={hash:{intlName:"global-nav.GROUPS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></div>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.stats),{hash:{},inverse:c.noop,fn:c.program(47,I,t),data:t});if(s||s===0)r+=s;return r+="\n				</div>\n			",r}function I(e,t){var r="",i,s;return r+='<div class="mobile-nav-menu-item"><a data-track="gnYouStatsClick" href="'+l((i=(i=(i=e.viewer,i==null||i===!1?i:i.urls),i==null||i===!1?i:i.stats),typeof i===h?i.apply(e):i))+'">',s={hash:{intlName:"global-nav.STATS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></div>",r}function q(e,t){var r="",i,s,o;r+='\n				<div class="mobile-nav-column">\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreMainClick" class="explore" href="/explore" aria-haspopup="true">',o={hash:{intlName:"common.EXPLORE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreRecentPhotosClick" href="/explore">',o={hash:{intlName:"global-nav.RECENT_PHOTOS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></div>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.show_tags_menu_link),{hash:{},inverse:c.noop,fn:c.program(50,R,t),data:t});if(s||s===0)r+=s;r+='\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreTheCommonsClick" href="/commons">',o={hash:{intlName:"global-nav.THE_COMMONS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnExplore20under20Click" href="/20under20">20under20</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreGalleriesClick" href="/galleries">',o={hash:{intlName:"global-nav.GALLERIES"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></div>\n					",s=n["if"].call(e,(i=e.elements,i==null||i===!1?i:i.weekly_flickr),{hash:{},inverse:c.noop,fn:c.program(52,U,t),data:t});if(s||s===0)r+=s;return r+='\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">',o={hash:{intlName:"global-nav.FLICKR_BLOG"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</a></div>\n				</div>\n			",r}function R(e,t){var r="",i,s;return r+='\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreTagsClick" href="/photos/tags">',s={hash:{intlName:"common.TRENDING"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></div>\n					",r}function U(e,t){var r="",i,s;return r+='<div class="mobile-nav-menu-item"><a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">',s={hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></div>",r}function z(e,t){var r="",i,s;return r+="\n	",s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["browser-upgrade-banner-view"],s):f.call(e,"outlet",e["browser-upgrade-banner-view"],s)))+"\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=
i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["mobile-app-upsell-view"],a):f.call(t,"outlet",t["mobile-app-upsell-view"],a)))+'\n\n<div class="global-nav-restyle">\n<div class="global-nav-shim"></div>\n<div class="global-nav-content styleguide-global-nav fluid sohp-mobile-navable">\n	<div class="global-nav-container fluid-centered">\n\n\n		<div class="mobile-nav-toggle"><span></span></div>\n\n		<div class="flickr-logo-container">\n			<a href="https://www.flickr.com" class="main-logo" data-track="gnLogoClick" title="',a={hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):f.call(t,"intlMessage",a)))+'"><svg class="icon-flickr"><use xlink:href="#icon-flickr_logo"></use></svg></a>\n		</div>\n\n		<ul class="nav-menu" role="menubar">\n			',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signup_link),{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_menu),{hash:{},inverse:c.noop,fn:c.program(4,v,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_link),{hash:{},inverse:c.noop,fn:c.program(11,b,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.explore_menu),{hash:{},inverse:c.noop,fn:c.program(13,w,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.create_link),{hash:{},inverse:c.noop,fn:c.program(18,x,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.create_menu),{hash:{},inverse:c.noop,fn:c.program(20,T,i),data:i});if(u||u===0)s+=u;s+='\n\n		</ul>\n\n		<ul class="gn-tools',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.upload_icon),{hash:{},inverse:c.noop,fn:c.program(22,N,i),data:i});if(u||u===0)s+=u;s+='">\n			',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.upload_link),{hash:{},inverse:c.noop,fn:c.program(24,C,i),data:i});if(u||u===0)s+=u;s+="\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.search_bar),{hash:{},inverse:c.noop,fn:c.program(26,k,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.upload_icon),{hash:{},inverse:c.noop,fn:c.program(34,_,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,t.showNotificationsMenu,{hash:{},inverse:c.noop,fn:c.program(36,D,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.account_menu),{hash:{},inverse:c.noop,fn:c.program(38,P,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signin_link),{hash:{},inverse:c.noop,fn:c.program(40,H,i),data:i});if(u||u===0)s+=u;s+="\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.signup_link),{hash:{},inverse:c.noop,fn:c.program(42,B,i),data:i});if(u||u===0)s+=u;s+='\n		</ul>\n\n\n		<div class="mobile-nav ',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.show_tags_menu_link),{hash:{},inverse:c.noop,fn:c.program(44,j,i),data:i});if(u||u===0)s+=u;s+='">\n			',u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.you_menu),{hash:{},inverse:c.noop,fn:c.program(46,F,i),data:i});if(u||u===0)s+=u;s+="\n\n			",u=n["if"].call(t,(o=t.elements,o==null||o===!1?o:o.explore_menu),{hash:{},inverse:c.noop,fn:c.program(49,q,i),data:i});if(u||u===0)s+=u;s+="\n		</div>\n	</div>\n</div>\n\n",u=n["if"].call(t,t["show-browser-upgrade-banner"],{hash:{},inverse:c.noop,fn:c.program(54,z,i),data:i});if(u||u===0)s+=u;return s+="\n\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["person-menu-view"],a):f.call(t,"outlet",t["person-menu-view"],a)))+"\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["group-menu-view"],a):f.call(t,"outlet",t["group-menu-view"],a)))+"\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["signup-rail-view"],a):f.call(t,"outlet",t["signup-rail-view"],a)))+"\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/global-nav-restyle",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("search-helper",function(e){function y(e){return!e[n.userId]&&!e[n.groupId]&&!e[n.tags]&&!e[n.text]&&!e[n.license]&&!e[n.faves]&&!e[n.contacts]&&!e[n.getty]&&!e[n.commons]&&!e[n.minTakenDate]&&!e[n.maxTakenDate]&&!e[n.minUploadDate]&&!e[n.maxUploadDate]&&!e[n.hasGeo]&&!e[n.boundingBox]&&!e[n.woeId]&&!e[n.camera]&&!e[n.minExposure]&&!e[n.maxExposure]&&!e[n.minAperture]&&!e[n.maxAperture]&&!e[n.minFocalLength]&&!e[n.maxFocalLength]&&!e[n.foursquareWoeId]&&!e[n.foursquareVenueId]&&!e[o.username]}function b(e,t){var n;for(n in l){if(!t&&n===e)return l[n];if(t&&l[n]===e)return n}}function w(t){var r={nsid_or_path_alias:"userId",group_id:"groupId",set_id:"setId",page_number:"page",tag_list:"tags",location:"text",slideshow_start_id:"slideshowStartId"},i,s={};for(i in r)t[i]&&(s[n[r[i]]]=t[i]);return s[n.groupId]&&!e.TypeValidator.matches.nsid(s[n.groupId])&&(s[n.groupPathAlias]=s[n.groupId],delete s[n.groupId]),s}function E(e,t){var n={},i=null,u=t.getViewer();e=e||{},e.q&&(n[o.username]=e.q);if(e.s)switch(e.s){case"age":n[o.sort]=r.oldestJoined;break;case"pho":n[o.sort]=r.mostPhotos}e.see&&e.see.toString().toLowerCase()==="all"&&u.signedIn&&(n[o.userId]=u.nsid),e.m&&(e.m.toString().toLowerCase()==="extras",e.m.toString().toLowerCase()==="names");for(i in e)s.indexOf(i)===-1&&(n[i]=e[i]);return n}function S(e,t){var n={},i=null,s;e=e||{},s=e.m&&e.m.toString().toLowerCase()==="discuss",e.q&&(n[a.text]=e.q),s;if(e.s)switch(e.s){case"act":s?n[a.sort]=r.discussionActivity:n[a.sort]=r.activity;break;case"siz":n[a.sort]=r.size;break;case"age":n[a.sort]=r.newest;break;case"rep":}for(i in e)u.indexOf(i)===-1&&(n[i]=e[i]);return n}function x(i,s){if(!i)return{};var o={},u,a,f=s.getViewer(),c=i.l,h=i.s,p=i.w,d,v=i.m,m=i.q,g;i.d&&typeof i.d=="string"&&(d=i.d.split("-")),i.q&&(o[n.text]=i.q),typeof i["ss"]!="undefined"&&(o[n.safeSearch]=parseInt(i.ss,10)+1),typeof i["ct"]!="undefined"&&(o[n.contentType]=parseInt(i.ct,10)+1),typeof i["mt"]!="undefined"&&(o[n.mediaType]=i.mt),i.b&&(o[n.boundingBox]=i.b),i.a&&(o[n.accuracy]=i.a),i.e&&(o[n.woeId]=i.e),i.g&&(o[n.groupId]=i.g),i.cm&&(o[n.camera]=i.cm),typeof i["xel"]!="undefined"&&(o[n.minExposure]=i.xel),typeof i["xeh"]!="undefined"&&(o[n.maxExposure]=i.xeh),typeof i["xal"]!="undefined"&&(o[n.minAperture]=i.xal),typeof i["xah"]!="undefined"&&(o[n.maxAperture]=i.xah),typeof i["xfl"]!="undefined"&&(o[n.minFocalLength]=i.xfl),typeof i["xfh"]!="undefined"&&(o[n.maxFocalLength]=i.xfh),i.eui&&(o[n.excludeUserId]=i.eui);if(typeof c!="undefined")switch(c){case"cc":case"comm":case"deriv":case"commderiv":o[n.license]=l[c];break;default:a=parseInt(c,10),a>=0&&a<=10&&(o[n.license]=a)}if(h)switch(h){case"rec":o[n.sort]=r.recent;break;case"rel":o[n.sort]=r.relevant;break;case"int":o[n.sort]=r.interesting;break;default:}i.hd&&(o[n.media]="hdvideo");if(p&&typeof p=="string")if(p.indexOf("faves")!==-1)g=p.split("-"),o[n.faves]=1,g.length>1?o[n.userId]=g[1]:f.signedIn&&(o[n.userId]=f.nsid);else if(e.TypeValidator.matches.nsid(p))v==="pool"?o[n.groupId]=p:o[n.userId]=p;else switch(p){case"contacts":o[n.contacts]="all";break;case"ff":o[n.contacts]="ff";break;case"getty":o[n.getty]="true";break;case"commons":o[n.commons]="true";break;case"usg":o[n.license]=8;break;case"all":default:}if(d)switch(d[0]){case"taken":d[1]&&(o[n.minTakenDate]=e.flutil.parseYYYYMMDDDatestamp(d[1])/1e3),d[2]&&(o[n.maxTakenDate]=e.flutil.parseYYYYMMDDDatestamp(d[2])/1e3);break;case"posted":d[1]&&(o[n.minUploadDate]=e.flutil.parseYYYYMMDDDatestamp(d[1])/1e3),d[2]&&(o[n.maxUploadDate]=e.flutil.parseYYYYMMDDDatestamp(d[2])/1e3);break;default:}if(v&&m)switch(v){case"tags":o=e.merge(o,this.processTags(m)),delete o[n.text];break;default:}for(u in i)t.indexOf(u)===-1&&(o[u]=i[u]);return o}function T(e){var t={},r=e[n.userId];return e[n.text]?t.q=e[n.text]:e[n.tags]&&(t.q=e[n.tags]),e[n.faves]?r?t.w="faves-"+r:t.w="faves":r?t.w=r:e[n.contacts]==="all"?t.w="contacts":e[n.contacts]==="ff"?t.w="ff":e[n.getty]==="true"?t.w="getty":e[n.commons]==="true"?t.w="commons":parseInt(e[n.license],10)===8&&(t.w="usg"),e[n.license]&&(t.l=b(e[n.license],!0)),t}function N(e,t){e[n.license]&&(e[n.license]===l.all||e[n.license]==="")&&delete e[n.license]}function C(e){}function k(e){}function L(e,t){for(var n in e)t.indexOf(n)===-1&&delete e[n]}function A(e){this.clearParams(e,m)}function O(e){this.clearParams(e,v)}function M(t){var n=e.clone(t)||{};return delete n.page,delete n.method,delete n.extras,e.QueryString.stringify(n)}function _(t){var r=t[n.groupId],i=t[n.tags],s=t[n.text];YUI.Env.isServer&&(r&&(t[n.groupId]=e.flutil.unescape(r)),i&&(t[n.tags]=e.flutil.unescape(i)),s&&(t[n.text]=e.flutil.unescape(s)))}function D(e){var t=0;return e.photos&&!e.screenshots&&!e.other?t=1:!e.photos&&e.screenshots&&!e.other?t=2:!e.photos&&!e.screenshots&&e.other?t=3:e.photos&&e.screenshots&&!e.other?t=4:!e.photos&&e.screenshots&&e.other?t=5:e.photos&&!e.screenshots&&e.other?t=6:e.photos&&e.screenshots&&e.other&&(t=7),t}function P(e){var t={},n=parseInt(e,10);switch(n){case 1:t.photos=!0;break;case 2:t.screenshots=!0;break;case 3:t.other=!0;break;case 4:t.photos=!0,t.screenshots=!0;break;case 5:t.other=!0,t.screenshots=!0;break;case 6:t.photos=!0,t.other=!0;break;default:t.photos=!0,t.screenshots=!0,t.other=!0}return t}function H(t){var n=e.AttributeHelpers.coerceInteger(t);return e.AttributeHelpers.coerceString(n+1)}function B(t,r){var i=r.getViewer(),s;return t[n.userId]?i&&i.signedIn&&i.nsid===t[n.userId]?t[n.faves]?e.Promise.resolve({intlName:"search.VIEWER_FAVES"}):e.Promise.resolve({intlName:"search.YOUR_PHOTOS"}):(e.TypeValidator.matches.nsid(t[n.userId])?s=t[n.userId]:s={pathAlias:t[n.userId]},r.getModel("person-models",s).then(function(e){var r;return t[n.faves]?r="search.FAVES_POSSESSIVE":r="search.PHOTOS_POSSESSIVE",{intlName:r,name:e.getValue("displayname")}})):t[n.contacts]?e.Promise.resolve({intlName:"search.FROM_PEOPLE_YOU_FOLLOW"}):t[n.groupId]||t[n.groupPathAlias]?(t[n.groupId]?s={id:t[n.groupId]}:s={pathAlias:t[n.groupPathAlias
]},r.getModel("group-info-models",s).then(function(e){return{intlName:"search.IN_GROUP_POOL",name:e.getValue("group").getValue("title")}})):t[n.faves]?e.Promise.resolve({intlName:"search.VIEWER_FAVES"}):e.Promise.resolve({intlName:"search.EVERYONES_PHOTOS"})}function j(t,r){var i=r.getViewer(),s;if(t[n.userId])return i&&i.signedIn&&i.nsid===t[n.userId]?e.Promise.resolve({intlName:"search.PEOPLE_YOU_FOLLOW"}):(e.TypeValidator.matches.nsid(t[n.userId])?s=t[n.userId]:s={pathAlias:t[n.userId]},r.getModel("person-models",s).then(function(e){return{intlName:"search.CONTACTS_POSSESSIVE",name:e.getValue("username")}}))}function F(t,r){var i=r.getViewer(),s;if(t[n.userId])return i&&i.signedIn&&i.nsid===t[n.userId]?e.Promise.resolve({intlName:"search.YOUR_GROUPS"}):(e.TypeValidator.matches.nsid(t[n.userId])?s=t[n.userId]:s={pathAlias:t[n.userId]},r.getModel("person-models",s).then(function(e){return{intlName:"search.GROUPS_POSSESSIVE",name:e.getValue("username")}}))}function I(e){e||(e={});var t=null,r=e[n.license];if(r&&r.length===1)switch(parseInt(r,10)){case 1:t="search.CC_BY_NC_SA";break;case 2:t="search.CC_BY_NC";break;case 3:t="search.CC_BY_NC_ND";break;case 4:t="search.CC_BY";break;case 5:t="search.CC_BY_SA";break;case 6:t="search.CC_BY_ND"}return t?{intlName:t}:null}function q(t,n,r){var i,s,o=this;return t===n?!0:r<=0?!1:(r=r||1,!e.Lang.isObject(t)||!e.Lang.isObject(n)?!1:(i=Object.keys(t),s=Object.keys(n),i.length!==s.length?!1:i.every(function(e){return o.objectsAreEquivalentToDepth(t[e],n[e],r-1)})))}function R(e,t){if(!e||typeof e!="string")return{};var r={},i=/(["'])(\\?.)*?\1/g,s=/[,\+\s]/,o=/^([,\+]|AND|OR)$/,u=/[\+\s]OR[\+\s]/,a,f,l,c;return a=e.match(i)||[],f=e.replace(i,""),l=f.split(s),l=l.map(function(e){return e.trim()}).filter(function(e){return e&&!o.test(e)}),c=a.concat(l),r[n.tags]=c.join(","),t==="any"||t==="all"?r[n.tagMode]=t:u.test(e)?(r[n.tagMode]="any",c.length=Math.min(c.length,11)):r[n.tagMode]="all",r}var t=["q","ss","ct","mt","l","s","w","d","m","hd","b","a","g","e","cm","xel","xeh","xal","xah","xfl","xfh","eui"],n={userId:"user_id",groupId:"group_id",groupPathAlias:"group_path_alias",setId:"set_id",page:"page",text:"text",tags:"tags",tagMode:"tag_mode",sort:"sort",safeSearch:"safe_search",contentType:"content_type",mediaType:"media",license:"license",faves:"faves",contacts:"contacts",getty:"is_getty",commons:"is_commons",marketplace:"marketplace_licensable",minTakenDate:"min_taken_date",maxTakenDate:"max_taken_date",minUploadDate:"min_upload_date",maxUploadDate:"max_upload_date",hasGeo:"has_geo",boundingBox:"bbox",accuracy:"accuracy",woeId:"woe_id",camera:"camera",minExposure:"exif_min_exposure",maxExposure:"exif_max_exposure",minAperture:"exif_min_aperture",maxAperture:"exif_max_aperture",minFocalLength:"exif_min_focallen",maxFocalLength:"exif_max_focallen",excludeUserId:"exclude_user_id",foursquareWoeId:"foursquare_woeid",foursquareVenueId:"foursquare_venueid",slideshowStartId:"jump_to",height:"height",width:"width",dimensionSearchMode:"dimension_search_mode",orientation:"orientation",colorCodes:"color_codes",styles:"styles"},r={relevant:"relevance",recent:"date-posted-desc",interesting:"interestingness-desc",name:"exact-name-match-first",activity:"most-activity",size:"most-members",oldest:"oldest-first",newest:"recent-first",oldestJoined:"age",mostPhotos:"pho",dateUploaded:"date-posted-desc",dateTaken:"date-taken-desc"},i={portrait:"portrait",square:"square",landscape:"landscape",panorama:"panorama"},s=["s","q","see","m"],o={username:"username",userId:"user_id",sort:"sort"},u=["q","s","m"],a={text:"text",sort:"sort",safeSearch:"safe_search",userId:"user_id",subscriptionTypes:"subscription_types",filterInactive:"filter_inactive_groups"},f={safe:1,all:2,eighteenPlusOnly:3},l={all:"0,1,2,3,4,5,6,7,8,9,10",cc:"1,2,3,4,5,6,9",deriv:"1,2,4,5,9,10",comm:"4,5,6,9,10",commderiv:"4,5,9,10"},c={viewAll:"view_all",viewType:"view_type",advanced:"advanced",albums:"album_search"},h=[n.tags,n.tagMode,n.mediaType,n.minTakenDate,n.maxTakenDate,n.minUploadDate,n.maxUploadDate,n.height,n.width,n.dimensionSearchMode,n.orientation,n.marketplace,n.excludeUserId],p=[n.colorCodes,n.styles],d=[n.sort,n.safeSearch,n.license],v=[n.userId,n.groupId,n.faves,n.contacts,n.commons,"m","w"],m=[n.userId,n.groupId,n.faves,n.contacts,n.safeSearch,n.sort,n.license,n.tags,n.text],g={sort:r.relevant,parse_tags:"1",content_type:"7"};e.SearchHelper={API:n,PEOPLE_SEARCH_API:o,GROUPS_SEARCH_API:a,GROUPS_SAFE_SEARCH_SETTINGS:f,API_SORT_OPTIONS:r,API_ORIENTATION_OPTIONS:i,LICENSE_TYPE:l,UNIFIED_STATE_PARAMS:c,UNIFIED_ADVANCED_PARAMS:h,UNIFIED_QUICK_FILTER_PARAMS:p,UNIFIED_TOOLBAR_PARAMS:d,SEARCH_SCOPE_PARAMS:v,UNIFIED_DEFAULT_PARAMS:g,decodeContentType:P,encodeContentType:D,isParameterlessSearch:y,mapRouteParamsToAPI:w,convertLicenseTypeValue:b,mapClassicSearchToAPI:x,mapClassicPeopleSearchToAPI:E,mapClassicGroupSearchToApi:S,mapAPIParamsToAdvancedSearchQuery:T,deriveScopeTitle:B,derivePeopleScopeTitle:j,deriveGroupsScopeTitle:F,deriveCCLicenseString:I,addParamDefaults:N,addGroupsParamDefaults:C,addPeopleParamDefaults:k,clearParams:L,clearAdvancedSearchParams:A,clearParamsExceptSearchScope:O,generateQueryString:M,convertSafeSearchPrefsToApi:H,unescapeParameters:_,objectsAreEquivalentToDepth:q,processTags:R}},"@VERSION@",{requires:["type-validator","flutil"]});
YUI.add("search-url",function(e){function s(e){return typeof e=="number"?e.toString():typeof e=="boolean"?e?"1":"0":typeof e=="string"?e:undefined}var t,n,r=/^\/search(?:\/.*)?$/,i=/^bw|blackandwhite$/;YUI.Env.isServer?t=require("querystring").stringify:t=e.QueryString.stringify,n=function(t,r,i){var o,u,a,f,l;this.appContext=r;if(typeof t=="string"){l=t.split("?"),i?this.searchType=i:(u=l[0].split("/"),u[0].indexOf("http")!==-1?a=3:a=1,f="/"+u.slice(a).join("/"),this.searchType=this.getSearchTypeFromPathname(f)),l=l.length>1?l[1]:"",this.params={};if(l)try{l=e.QueryString.parse(l),this.params=e.SearchHelper.mapClassicSearchToAPI(l,r)}catch(c){e.Flog.warn("[SearchUrl] malformed query:",l)}}else this.params=e.merge(t),this.searchType=i;for(o in this.params)this.params.hasOwnProperty(o)&&(this.params[o]=s(this.params[o]));this.params.color_codes&&(this.colors=this.params.color_codes.toString().split(",")),this.searchType||this.setSearchType(n.searchTypes.UNDEFINED)},n.prototype.setSearchType=function(t){var n=this.getSearchTerm();return this.searchType=t,this.params=this.validateParams(this.params,this.searchType),this.params=e.merge(this.getDefaultParams(this.searchType),this.params),n&&this.setSearchTerm(n),this},n.prototype.getSearchTypeFromPathname=function(e){e=e||this.pathname,e=e.toLowerCase(),e=e.split("/").join("");switch(e){case"searchpeople":return n.searchTypes.PEOPLE;case"searchgroups":return n.searchTypes.GROUPS;case"search":default:return n.searchTypes.PHOTOS}},n.prototype.getPathname=function(){var e="/search/";switch(this.searchType){case n.searchTypes.PEOPLE:e+="people/";break;case n.searchTypes.GROUPS:e+="groups/";break;case n.searchTypes.CLASSIC_GROUPS:e="/search_groups.gne";break;case n.searchTypes.PHOTOS:default:}return e},n.prototype.validateParams=function(t,r){var i,s={},o,u;t=e.merge(t);switch(r){case n.searchTypes.PEOPLE:i=e.merge(e.SearchHelper.PEOPLE_SEARCH_API),i.text="text";break;case n.searchTypes.GROUPS:i=e.merge(e.SearchHelper.GROUPS_SEARCH_API);break;case n.searchTypes.PHOTOS:i=e.merge(e.SearchHelper.API,e.SearchHelper.UNIFIED_STATE_PARAMS);break;case n.searchTypes.UNDEFINED:default:return t}if(i)for(o in i)u=i[o],typeof t[u]!="undefined"&&(s[u]=t[u]);return s},n.prototype.getDefaultParams=function(t){var r={};switch(t){case n.searchTypes.PEOPLE:e.SearchHelper.addPeopleParamDefaults(r);break;case n.searchTypes.GROUPS:e.SearchHelper.addGroupsParamDefaults(r);break;case n.searchTypes.PHOTOS:e.SearchHelper.addParamDefaults(r);break;case n.searchTypes.UNDEFINED:default:}return r},n.prototype.getAPIParams=function(){return e.merge(this.params)},n.prototype.getAPIParam=function(e){return this.params[e]},n.prototype.setAPIParam=function(e,t){return this.params[e]=s(t),this},n.prototype.removeAPIParam=function(e){return delete this.params[e],this},n.prototype.removeAllAPIParams=function(){return this.params={},this},n.prototype.getSearchTerm=function(){var t=this.params[this.getSearchTermKey(this.searchType)];return t||(t=this.params[e.SearchHelper.API.tags]),t||""},n.prototype.setSearchTerm=function(t){var n=this.getSearchTermKey(this.searchType);return delete this.params[e.SearchHelper.PEOPLE_SEARCH_API.username],delete this.params[e.SearchHelper.GROUPS_SEARCH_API.text],delete this.params[e.SearchHelper.API.text],delete this.params[e.SearchHelper.API.tags],delete this.params.q,this.params[n]=t,this},n.prototype.getSearchTermKey=function(t){switch(t){case n.searchTypes.PEOPLE:return e.SearchHelper.PEOPLE_SEARCH_API.username;case n.searchTypes.GROUPS:return e.SearchHelper.GROUPS_SEARCH_API.text;case n.searchTypes.PHOTOS:default:return this.params[e.SearchHelper.API.tags]||this.params[e.SearchHelper.API.tags]===""?e.SearchHelper.API.tags:e.SearchHelper.API.text}},n.prototype.removeScope=function(){return e.SearchHelper.SEARCH_SCOPE_PARAMS.forEach(function(e){this.removeAPIParam(e)}.bind(this)),this.removeAPIParam(e.SearchHelper.API.excludeUserId),this},n.prototype.resetToUnified=function(){return this.params[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]&&(this.removeAPIParam(e.SearchHelper.API.userId),this.removeAPIParam(e.SearchHelper.API.contacts),this.removeAPIParam(e.SearchHelper.API.groupId),this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.albums)),this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll),this},n.prototype.hasAdvancedParams=function(t){return Object.keys(this.params).some(function(n){return e.SearchHelper.UNIFIED_ADVANCED_PARAMS.indexOf(n)!==-1||!t&&e.SearchHelper.UNIFIED_QUICK_FILTER_PARAMS.indexOf(n)!==-1||!t&&e.SearchHelper.UNIFIED_TOOLBAR_PARAMS.indexOf(n)!==-1})},n.prototype.resetAdvancedParam=function(t,n){return this.hasAdvancedParams(t)?this.setAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.advanced,1):n||this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.advanced),this},n.prototype.createNewSearch=function(e){this.setSearchTerm(e),this.removeScope();if(this.searchType===n.searchTypes.UNDEFINED||this.searchType===n.searchTypes.PHOTOS)this.resetToUnified(),this.resetAdvancedParam();return this},n.prototype.getURL=function(){var e=this.getId(),t=this.getPathname();return e===n.EMPTY_SEARCH_ID?t:t+"?"+e},n.prototype.getId=function(){var r={},i,s=e.SearchHelper.API;for(i in this.params)s[i]?r[s[i]]=this.params[i]:r[i]=this.params[i];return t(r)||n.EMPTY_SEARCH_ID},n.prototype.clone=function(){var e=new n(this.params,this.appContext,this.searchType);return e},n.prototype.setMedia=function(t,n){var r;t||(t=!1),n||(n=!1),t&&n?r="all":t?r="photos":r="videos",this.setAPIParam(e.SearchHelper.API.mediaType,r)},n.prototype._syncColors=function(){this.colors&&this.colors.length>0?this.params.color_codes=this.colors.join(","):this.removeAPIParam("color_codes")},n.prototype.addColorCode=function(e){if(e&&e.match(i)){this.clearColorCodes(),this.colors=["bw"],this._syncColors();return}this.colors&&this.colors.indexOf("bw")!==-1&&(this.colors=[]),this.colors||(this.colors=[]),this.colors.indexOf(e)===-1&&(this.colors.push(e),this._syncColors
())},n.prototype.removeColorCode=function(e){var t;this.colors&&(t=this.colors.indexOf(e),t!==-1&&(this.colors.splice(t,1),this._syncColors()))},n.prototype.clearColorCodes=function(){this.colors=[],this._syncColors()},n.isSearchUrl=function(e){return r.test(e)},n.searchTypes={UNDEFINED:0,PHOTOS:1,PEOPLE:2,GROUPS:3,CLASSIC_GROUPS:4},n.EMPTY_SEARCH_ID="-1",e.SearchUrl=n},"@VERSION@",{requires:["search-helper","querystring-parse-simple","querystring-stringify-simple"]});
YUI.add("hermes-template-search-pill",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+='\n<li class="search-pill" ',i=n["if"].call(e,e.id,{hash:{},inverse:f.noop,fn:f.program(2,h,t),data:t});if(i||i===0)r+=i;return r+=">",o={hash:{},data:t},r+=a((i=n.truncate||e.truncate,i?i.call(e,e.name,20,o):l.call(e,"truncate",e.name,20,o)))+'<div class="search-pill-divider"></div>',(s=n.secondName)?s=s.call(e,{hash:{},data:t}):(s=e.secondName,s=typeof s===u?s.apply(e):s),r+=a(s)+'<i class="search-pill-remover"></i></li>\n',r}function h(e,t){var r="",i;return r+="id=",(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===u?i.apply(e):i),r+=a(i),r}function p(e,t){var r="",i,s;r+='\n<li class="search-pill" ',i=n["if"].call(e,e.id,{hash:{},inverse:f.noop,fn:f.program(2,h,t),data:t});if(i||i===0)r+=i;return r+=">",s={hash:{},data:t},r+=a((i=n.truncate||e.truncate,i?i.call(e,e.name,30,s):l.call(e,"truncate",e.name,30,s)))+'<i class="search-pill-remover"></i></li>\n',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;o=n["if"].call(t,t.combo,{hash:{},inverse:f.program(4,p,i),fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-pill",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
