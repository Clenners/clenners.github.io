YUI.add("flickr-photos-licenses-setLicense-updater",function(e,t){"use strict";function n(n,r){var i={};return n.fullResponse?(i.photo_ids=n.photoId,i.full_response=1):i.photo_id=n.photoId,i.license_id=n.license,r.callAPI("flickr.photos.licenses.setLicense",i).then(function(e){if("errors"in e)return e.api="setLicense",e},function(e){throw n.fullResponse&&(e.photoIds=n.photoId,e.returnApi="setLicense"),e}).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-photos-licenses-setLicense"]={run:n}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("flickr-photos-setSafetyLevel-updater",function(e,t){"use strict";function n(n,r){var i={};return n.fullResponse?(i.photo_ids=n.photoId,i.full_response=1):i.photo_id=n.photoId,i.safety_level=n.safetyLevel+1,r.callAPI("flickr.photos.setSafetyLevel",i).then(function(e){if("errors"in e)return e.api="setSafety",e},function(e){throw n.fullResponse&&(e.photoIds=n.photoId,e.returnApi="setSafety"),e}).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-photos-setSafetyLevel"]={run:n}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("photo-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)},update:function(t,n){var r=[];return("title"in n||"description"in n)&&r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title?n.title.newVal:this.getValue(t,"title"),description:n.description?n.description.newVal:this.getValue(t,"description")},this.appContext)),"license"in n&&r.push(e.ModelUpdaters["flickr-photos-licenses-setLicense"].run({photoId:t,license:n.license.newVal},this.appContext)),"safetyLevel"in n&&r.push(e.ModelUpdaters["flickr-photos-setSafetyLevel"].run({photoId:t,safetyLevel:n.safetyLevel.newVal},this.appContext)),e.Promise.all(r)},batchUpdate:function(t,n){var r=[];return"safetyLevel"in n&&r.push(e.ModelUpdaters["flickr-photos-setSafetyLevel"].run({photoId:t,safetyLevel:parseInt(n.safetyLevel,10),fullResponse:1},this.appContext)),"title"in n&&"description"in n?r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title,description:n.description,fullResponse:1},this.appContext)):"title"in n?r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,title:n.title,fullResponse:1},this.appContext)):"description"in n&&r.push(e.ModelUpdaters["flickr-photos-setMeta"].run({photoId:t,description:n.description,fullResponse:1},this.appContext)),"license"in n&&r.push(e.ModelUpdaters["flickr-photos-licenses-setLicense"].run({photoId:t,license:n.license,fullResponse:1},this.appContext)),e.Promise.all(r)}},getLargestSize:e.PhotoModelHelper.getLargestSize,getSizeToFit:e.PhotoModelHelper.getSizeToFit,getSizeIfExact:e.PhotoModelHelper.getSizeIfExact,isSizeSquare:e.PhotoModelHelper.isSizeSquare,isPhotoSquare:e.PhotoModelHelper.isPhotoSquare,getGuestpass:function(t){var n=this;return new e.Promise(function(e,r){n.getValue(t,"guestpass")?e():n.appContext.callAPI("flickr.sharing.createGuestpass",{photo:t}).then(function(r){n.setValue(t,"guestpass",r.guestpass.url),e()})})},attributes:{title:e.PhotoModelHelper.attributes.title,description:e.PhotoModelHelper.attributes.description,mediaType:e.PhotoModelHelper.attributes.mediaType,license:e.PhotoModelHelper.attributes.license,isVideo:e.PhotoModelHelper.attributes.isVideo,isOwner:e.PhotoModelHelper.attributes.isOwner,sizes:e.PhotoModelHelper.attributes.sizes,descendingSizes:e.PhotoModelHelper.attributes.descendingSizes,ascendingSizes:e.PhotoModelHelper.attributes.ascendingSizes,aspectRatio:e.PhotoModelHelper.attributes.aspectRatio,needsInterstitial:e.PhotoModelHelper.attributes.needsInterstitial,canComment:e.PhotoModelHelper.attributes.canComment,canPublicComment:e.PhotoModelHelper.attributes.canPublicComment,url:e.PhotoModelHelper.attributes.url,rotation:e.PhotoModelHelper.attributes.rotation,owner:{isModel:!0},engagement:{isModel:!0},isHD:{},secret:{},canAddMeta:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!0},isMarketplacePrintable:{defaultFn:function(e){return!1}},isMarketplaceLicensable:e.PhotoModelHelper.attributes.isMarketplaceLicensable,marketplaceLicensingUrl:e.PhotoModelHelper.attributes.marketplaceLicensingUrl,oWidth:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},oHeight:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},safetyLevel:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},guestpass:{},hasInvalidColorspaceForPrint:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},sizesForAlbum:{readOnly:!0,derivedBy:["sizes"],defaultFn:function(t){var n=this.getValue(t,"sizes");return e.Object.each(n,function(e,t){e.src=e.url}),n}},curation:{isModel:!0},visibilitySource:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:1}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","photo-model-helper","photo-curation-models","flickr-photos-getInfo-fetcher","flickr-photos-setPerms-updater","flickr-photos-setMeta-updater","flickr-photos-licenses-setLicense-updater","flickr-photos-setSafetyLevel-updater","attribute-helpers"]});
YUI.add("flickr-photos-getInfo-fetcher",function(e,t){"use strict";function n(t){var n,r;return n=["sizes","icon_urls","ignored","rev_ignored","venue","datecreate"].join(","),n=n+","+e.APIHelper.request.getRebootPhotoExtras(),r={datecreate:1,extras:n,photo_id:t.id,get_contexts:1,primary_photo_extras:"url_sq, url_t, url_s, url_m"},t.userId?r.user_id=t.userId:t.pathAlias&&(r.path_alias=t.pathAlias),t.context&&(r.context=t.context,r.num_prev=1,r.num_next=1),t.scrappy&&(e.APIHelper.request.addStaticMapsParams(r),delete r.get_contexts,delete r.primary_photo_extras,delete r.context),r}function r(t,n,r){var s=t.apiResponse,o=t.photoRegistry,u=t.personRegistry,a=t.personRelationshipRegistry,f=t.photoEngagementRegistry,l=t.photoStatsRegistry,c=t.photoPrivacyRegistry,h=t.photoNotesRegistry,p=t.noteRegistry,d=t.photoGeoRegistry,v=t.photoLocationRegistry,m=t.photoHeadMetaRegistry,g=t.groupRegistry,y,b={},w,E,S,x,T,N,C=[],k,L,A;w={id:s.photo.id,title:s.photo.title.content,description:s.photo.description.content,sizes:e.APIHelper.response.parsePhotoSize(s.photo.sizes.size,!0),needsInterstitial:s.photo.needsInterstitial,canComment:s.photo.editability.cancomment,canPublicComment:s.photo.publiceditability.cancomment,canAddMeta:s.photo.editability.canaddmeta,safetyLevel:s.photo.safetyLevel,license:s.photo.license,mediaType:s.photo.media,secret:s.photo.secret,isHD:e.APIHelper.response.isHD(s.photo.sizes.size),rotation:s.photo.rotation,hasInvalidColorspaceForPrint:s.photo.hasInvalidColorspaceForPrint,isMarketplacePrintable:s.photo.isMarketplacePrintable,isMarketplaceLicensable:s.photo.isMarketplaceLicensable?s.photo.isMarketplaceLicensable:!1,marketplaceLicensingUrl:s.photo.marketplaceLicensingUrl?s.photo.marketplaceLicensingUrl:"",oWidth:s.photo.oWidth?parseInt(s.photo.oWidth,10):"",oHeight:s.photo.oHeight?parseInt(s.photo.oHeight,10):"",visibilitySource:s.photo.visibilitySource},E={id:s.photo.owner.nsid,username:s.photo.owner.username,realname:s.photo.owner.realname,pathAlias:s.photo.owner.pathAlias,buddyicon:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(s.photo.owner.iconurls),isAdFree:s.photo.owner.isAdFree,isPro:s.photo.owner.ispro,dateCreated:s.photo.owner.datecreate,location:s.photo.owner.location},S={id:s.photo.owner.nsid,pathAlias:s.photo.owner.pathAlias,isContact:s.photo.contactIscontact,isFamily:s.photo.contactIsfamily,isFriend:s.photo.contactIsfriend,isIgnored:s.photo.owner.isignored,isIgnoredBy:s.photo.owner.revIgnored},x={id:s.photo.id,ownerNsid:s.photo.owner.nsid,isFaved:s.photo.isfavorite||!1,canShare:s.photo.usage.canshare,canDownload:s.photo.usage.candownload,commentCount:s.photo.comments.content,noteCount:s.photo.notes&&s.photo.notes.note&&s.photo.notes.note.length,faveCount:s.photo.countFaves,viewCount:s.photo.views},T={id:s.photo.id,dateTaken:s.photo.dates.taken,datePosted:s.photo.dates.posted,takenGranularity:s.photo.dates.takengranularity,isDateTakenUnknown:s.photo.datetakenunknown||s.photo.datetakenunknown==="1"||s.photo.datetakenunknown===1},k={id:s.photo.id,title:s.photo.HTMLMETA["og:title"],noindexfollow:s.photo.owner.noindexfollow,keywords:s.photo.HTMLMETA.keywords,"og:title":s.photo.HTMLMETA["og:title"],"og:description":s.photo.HTMLMETA["og:description"],"og:type":s.photo.HTMLMETA["og:type"],"og:url":s.photo.HTMLMETA["og:url"],"og:image":s.photo.HTMLMETA["og:image"],"og:image:width":s.photo.HTMLMETA["og:image:width"],"og:image:height":s.photo.HTMLMETA["og:image:height"],"flickr_photos:by":s.photo.HTMLMETA["flickr_photos:by"],"flickr_photos:camera":s.photo.HTMLMETA["flickr_photos:camera"],"flickr_photos:sets":s.photo.HTMLMETA["flickr_photos:sets"],"flickr_photos:groups":s.photo.HTMLMETA["flickr_photos:groups"],"flickr_photos:galleries":s.photo.HTMLMETA["flickr_photos:galleries"],"twitter:card":s.photo.HTMLMETA["twitter:card"],"twitter:description":s.photo.HTMLMETA["twitter:description"],"twitter:app:url:iphone":s.photo.HTMLMETA["twitter:app:url:iphone"],"twitter:creator":s.photo.HTMLMETA["twitter:creator"],pinterest:s.photo.HTMLMETA.pinterest},N={id:s.photo.id,isPublic:s.photo.visibility.ispublic,isVisibleByFriends:s.photo.visibility.isfriend,isVisibleByFamily:s.photo.visibility.isfamily,permAddMeta:s.photo.permissions?s.photo.permissions.permaddmeta:0,permComment:s.photo.permissions?s.photo.permissions.permcomment:0},s.photo&&s.photo.notes&&s.photo.notes.note&&e.Array(s.photo.notes.note).forEach(function(e){C.push(p.addOrUpdate({id:e.id,authorName:e.authorname,author:e.author,left:e.x,top:e.y,width:e.w,height:e.h,text:e.content}))}),L=e.ModelFetchers["flickr-photos-getLocation"].mapResponse(s,d),w.owner=u.addOrUpdate(E),w.engagement=f.addOrUpdate(x),a.addOrUpdate(S),A=o.addOrUpdate(w),s.photo.isMarketplacePrintable&&A.setValue("isMarketplacePrintable",!0),s.photo.isMarketplaceLicensable&&A.setValue("isMarketplaceLicensable",!0),l.addOrUpdate(T),c.addOrUpdate(N),h.addOrUpdate({id:w.id,notes:C}),m.addOrUpdate(k),v.addOrUpdate(L),s.photo.contexts&&(y=t.contextsRegistry,b.faves=t.favoriteRegistry,b.gallery=t.galleryRegistry,b.pool=t.groupsPoolRegistry,b.set=t.setRegistry,b.stream=t.photostreamRegistry,i({photoModel:A,contextRegistries:b,contextsResponse:s.photo.contexts,personRegistry:u,contextsRegistry:y,photoEngagementRegistry:f,photoStatsRegistry:l,groupRegistry:g,apiParams:r}))}function i(t){var n=t.photoModel,r=t.contextRegistries,i=t.contextsResponse,s=t.personRegistry,o=t.contextsRegistry,u=t.photoEngagementRegistry,a=t.photoStatsRegistry,f=t.photoCurationModelRegistry,l=t.groupRegistry,c=t.apiParams,h=[];e.Object.each(r,function(t,r){i[r]&&e.Array.each(i[r],function(r){e.APIHelper.response.addContextToRegistry(r,t,s,l),h.push(t.proxy(r.id)),c.context&&function(){var i,o,l,h,p,d,v,m,g;i=t.getValue(r.id,"photoContextList"),o=i.hasMinBoundary?i.hasMinBoundary():!1,l=i.hasMaxBoundary?i.hasMaxBoundary():!1,h=i.getList(),d=r.nextphotos,v=r.prevphotos,m=d?e.APIHelper.response.parsePhotos({photos:d.photo,personModelRegistry:s,photoModelRegistry:n.registry,photoEngagementModelRegistry
:u,photoStatsModelRegistry:a,photoCurationModelRegistry:f}):[],g=v?e.APIHelper.response.parsePhotos({photos:v.photo,personModelRegistry:s,photoModelRegistry:n.registry,photoEngagementModelRegistry:u,photoStatsModelRegistry:a,photoCurationModelRegistry:f}):[];if(g.length||m.length)p=e.APIHelper.response.addOrReplaceListByContext({model:n,next:m,prev:g.reverse(),current:h,hasMin:o,hasMax:l,numNext:c.num_next,numPrev:c.num_prev});t.setValue(r.id,"photoContextList",p)}()})}),o.exists(n.id)||(o.add({id:n.id,totalGroups:i.pool?i.pool.length:0,totalSets:i.set?i.set.length:0,totalGalleries:i.gallery?i.gallery.length:0}),o.setValue(n.id,"contexts",h))}function s(n,r){var i=this,s;return r.flipper.isFlipped("enable-scrappy-photo-page")&&(n.scrappy=!0),s=this._processParams(n),(new e.FlickrPromise({apiResponse:r.callAPI("flickr.photos.getInfo",s),photoRegistry:r.getModelRegistry("photo-models"),personRegistry:r.getModelRegistry("person-models"),personRelationshipRegistry:r.getModelRegistry("person-relationship-models"),photoEngagementRegistry:r.getModelRegistry("photo-engagement-models"),photoStatsRegistry:r.getModelRegistry("photo-stats-models"),photoCurationModelRegistry:r.getModelRegistry("photo-curation-models"),photoPrivacyRegistry:r.getModelRegistry("photo-privacy-models"),photoNotesRegistry:r.getModelRegistry("photo-notes-models"),noteRegistry:r.getModelRegistry("note-models"),photoGeoRegistry:r.getModelRegistry("photo-geo-models"),photoLocationRegistry:r.getModelRegistry("photo-location-models"),photoHeadMetaRegistry:r.getModelRegistry("photo-head-meta-models"),groupRegistry:r.getModelRegistry("group-models"),contextsRegistry:r.getModelRegistry("photo-contexts-models"),favoriteRegistry:r.getModelRegistry("favorite-models"),galleryRegistry:r.getModelRegistry("gallery-models"),groupsPoolRegistry:r.getModelRegistry("group-pool-models"),setRegistry:r.getModelRegistry("set-models"),photostreamRegistry:r.getModelRegistry("photostream-models")})).then(function(e){return i._processResponse(e,r.flipper,s)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-photos-getInfo"]={run:s,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper","flickr-photos-getLocation-fetcher"],optional:["photo-models","person-models","person-relationship-models","photo-engagement-models","photo-stats-models","photo-curation-models","photo-geo-models","photo-location-models","photo-head-meta-models","note-models","photo-notes-models","autotag-models","photo-autotags-models"]});
YUI.add("photo-geo-models",function(e){function r(e){r.superclass.constructor.call(this,e)}var t=1,n=16;e.Models[this.name]=r,e.extend(r,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext).then(function(e){return e},function(){})},update:function(t,n){var r={photo_id:t,lat:this.getValue(t,"latitude"),lon:this.getValue(t,"longitude")};n.hasOwnProperty("accuracy")&&(r.accuracy=this.getValue(t,"accuracy"));if(n.hasOwnProperty("isPublic")||n.hasOwnProperty("isContact")||n.hasOwnProperty("isFriend")||n.hasOwnProperty("isFamily"))r.is_public=Number(this.getValue(t,"isPublic")),r.is_contact=Number(this.getValue(t,"isContact")),r.is_friend=Number(this.getValue(t,"isFriend")),r.is_family=Number(this.getValue(t,"isFamily"));return e.ModelUpdaters["flickr-photos-geo-setLocation"].run(r,this.appContext)}},attributes:{hasGeo:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},latitude:{validator:function(t,n){return e.AttributeHelpers.validateFloat(t)},setter:function(t){return e.AttributeHelpers.coerceFloat(t)||undefined},defaultValue:undefined},longitude:{validator:function(t,n){return e.AttributeHelpers.validateFloat(t)},setter:function(t){return e.AttributeHelpers.coerceFloat(t)||undefined},defaultValue:undefined},accuracy:{validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(r){return e.AttributeHelpers.coerceInteger(Math.max(t,Math.min(r,n)))||undefined},defaultValue:t},isPublic:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isContact:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isFriend:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isFamily:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-getInfo-fetcher","attribute-helpers","flickr-photos-geo-setLocation-updater"]});
YUI.add("zoom-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,forceGpu:null,initializer:function(t){return this.photoId=t.photoId,this.disableIfSmall=!!t.disableIfSmall,YUI.Env.isServer||(e.config.win.location.search.indexOf("gpu=on")>-1?this.forceGpu=!0:e.config.win.location.search.indexOf("gpu=off")>-1&&(this.forceGpu=!1)),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){var e=this.templates("zoom")({})||"";return this.setContainerHTML(e),this},activate:function(){var t=this,n=t.getZoomKeyScope();return this.get("photo").getValue("needsInterstitial")||(this.parentViewContainer=this.get("container").ancestor(".view"),t.registerEventHandler(t.get("container").on("click",function(n){n.preventDefault(),t.cursorCoords=[n.pageX-e.config.win.pageXOffset,n.pageY-e.config.win.pageYOffset],e.rapidTracker.beacon(t.name,"zoomInClick"),t.zoomIn(t.cursorCoords)})),t.attachKeyEvent("down:90",e.betterThrottle(function(n){n.preventDefault(),e.rapidTracker.beacon(t.name,"zoomInKeyPress"),t.zoomIn()},100)),t.attachKeyEvent("down:90,27",e.betterThrottle(function(n){n.preventDefault(),e.rapidTracker.beacon(t.name,"zoomOutKeyPress"),t.zoomOut()},100),n),t.attachKeyEvent("down:37,38,39,40",e.betterThrottle(function(n){var r=[t.currentZoomRegion.left,t.currentZoomRegion.top],i=200;n.preventDefault();switch(n.button){case 37:r[0]+=i;break;case 38:r[1]+=i;break;case 39:r[0]-=i;break;case 40:r[1]-=i}e.rapidTracker.beacon(t.name,"zoomPanKeyPress"),t.panZoomNode(r)},16),n),t.registerEventHandler(t.appContext.flapp.before("activeViewChange",function(e){t.cleanUp()}))),this},getZoomEdgeMargin:function(){return 100},panZoomNodeToCurrentCoords:function(){if(!this.zoomedIn)return;var e=this.cursorCoords,t=this.getZoomPanCoordsForCursor(e);if(!t)return;this.panZoomNode(t)},panZoomNode:function(e){if(this.currentZoomRegion.left===e[0]&&this.currentZoomRegion.top===e[1])return;e=this.constrainPanCoords(e),this.currentZoomRegion.left=e[0],this.currentZoomRegion.top=e[1],this.pendingCoords=e},constrainPanCoords:function(e){var t,n,r,i,s=this.getZoomEdgeMargin(),o=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],u=[this.zoomImageFullWidth,this.zoomImageFullHeight],a=[u[0]+2*s,u[1]+2*s];return t=0,n=o[0]-u[0]-2*s,r=0,i=o[1]-u[1]-2*s,e[0]>t?e[0]=t:e[0]<n&&(e[0]=n),e[1]>r?e[1]=r:e[1]<i&&(e[1]=i),u[0]<o[0]&&(e[0]=.5*(o[0]-a[0])),u[1]<o[1]&&(e[1]=.5*(o[1]-a[1])),e},getZoomPanCoordsForCursor:function(e){if(!e)return;var t=this.getZoomEdgeMargin(),n=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],r=[this.zoomImageFullWidth,this.zoomImageFullHeight],i=[r[0]+2*t,r[1]+2*t],s=[e[0]/n[0],e[1]/n[1]],o=[s[0]*(n[0]-i[0]),s[1]*(n[1]-i[1])];return o},getZoomSmallRegion:function(){var t=this.get("container");return{left:t.getX()-e.config.win.pageXOffset-this.getZoomEdgeMargin(),top:t.getY()-e.config.win.pageYOffset-this.getZoomEdgeMargin(),width:parseInt(t.getStyle("width"),10),height:parseInt(t.getStyle("height"),10)}},resizeZoomNode:function(t,n){var r=this,i,s,o=e.config.win.performance&&e.config.win.performance.now;return n?new e.Promise(function(n,u){function a(e){var u=o?e-i:Date.now()-i,a=u/r.getZoomTransitionTime(),f;return a>=1?(f=t,r.isAnimatingZoom=!1,setTimeout(function(){n()},r.getZoomTransitionTime())):f={left:s.left+(t.left-s.left)*a,top:s.top+(t.top-s.top)*a,width:s.width+(t.width-s.width)*a,height:s.height+(t.height-s.height)*a},f}function f(n){var i=a(n);if(r.zoomingIn||r.zoomingOut)r.resizeZoomNode(i,!1),i!==t&&e.config.win.requestAnimationFrame(f)}r.isAnimatingZoom=!0,i=o?e.config.win.performance.now():Date.now(),s=r.currentZoomRegion,e.config.win.requestAnimationFrame(f)}):(this.currentZoomRegion=t,this.zoomPhotoContainerNode&&this.zoomPhotoContainerNode.setStyle("transform","translate("+t.left+"px, "+t.top+"px) scale("+t.width/this.zoomImageFullWidth+")"),e.Promise.resolve())},getZoomTransitionTime:function(){return 200},zoomOut:function(){var t=this,n=this.zoomNode;e.fire("flickr:removeKeyEventScope",this.getZoomKeyScope()),n.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach(function(e){e.detach()}),delete this.touchHandlers),this.resizeZoomNode(this.getZoomSmallRegion(),!0),n.addClass("hiding"),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!0,setTimeout(function(){t.zoomingOut&&n&&n._node&&(t.parentViewContainer.removeClass("zoomed"),n.removeClass("hiding"),n.addClass("hidden"),setTimeout(function(){t.zoomingOut&&(t.cleanUp(),this.zoomingOut=!1)},200))},this.getZoomTransitionTime()+0),delete this.pendingCoords,delete this.currentCoords},cleanUp:function(){this.zoomNode&&(this.zoomNode.remove(!0),delete this.zoomNode,delete this.zoomPhotoContainerNode,this.zoomAnimationHandle.detach())},isImageReadyToDisplay:function(e){var t;return e?(t=new Image,t.src=e,t.complete||t.naturalWidth):!1},getZoomKeyScope:function(){return this.name+this._yuid},zoomMouseMoveHandler:function(t){this.cursorCoords=[t.pageX-e.config.win.pageXOffset,t.pageY-e.config.win.pageYOffset],this.isAnimatingZoom||this.panZoomNodeToCurrentCoords()},zoomScrollWheelHandler:function(e){e.preventDefault();var t=e.wheelDeltaX,n=e.wheelDeltaY;t===undefined&&(t=-e.deltaX||0),n===undefined&&(n=-e.deltaY||0),this.panZoomNode([this.currentZoomRegion.left+t,this.currentZoomRegion.top+n])},getSizes:function(){var e=this.parentViewContainer.one(".low-res-photo"),t=this.parentViewContainer.one(".main-photo");return{small:e?e.getAttribute("src"):"",medium:t?t.getAttribute("src"):"",large:this.getLargestSize()}},getLargestSize:function(){var e=this.appContext.flipper.isFlipped("enable-zoom-proxy"),t=this.appContext.flipper.config["zoom-proxy-prefix"],n;return e&&t?(n=this.get("photo").getLargestSize({excludeSizes:[]}),n.key==="o"&&(console.log("proxyPrefix",t,"largestSize.displayUrl"
,n.displayUrl),n.displayUrl=n.url=t+"http:"+n.displayUrl,console.log("proxying original",n.url))):n=this.get("photo").getLargestSize(),n},zoomIn:function(t){var n=this,r,i,s=this.getSizes(),o=this.isImageReadyToDisplay(s.medium),u=this.isImageReadyToDisplay(s.large.url),a=this.getZoomPixelRatio(),f=this.getZoomSmallRegion(),l,c,h,p=this.maxMsgNode;if(this.disableIfSmall&&f.width>=s.large.width){p||(p=this.maxMsgNode=e.Node.create('<div class="zoom-max-message">'+n.intlMessage({intlName:"photo-page-scrappy.ZOOM_MAX_MESSAGE"})+"</div>")),this.get("container").contains(p)||(p.addClass("hidden"),this.get("container").append(p)),setTimeout(function(){p&&p.inDoc()&&(p.removeClass("hidden"),this.maxMsgNodeHidingTimer&&(clearTimeout(this.maxMsgNodeHidingTimer),delete this.maxMsgNodeHidingTimer),this.maxMsgNodeHidingTimer=setTimeout(function(){p&&p.inDoc()&&p.addClass("hidden")},3e3))},0);return}e.fire("flickr:setKeyEventScope",this.getZoomKeyScope()),this.zoomingIn=!0,this.zoomAnimationHandle=e.AnimationManager.subscribe(function(){var r=n.getDeteriorationRateForEasing(),i,s,o={x:0,y:0},u={x:0,y:0},a={x:0,y:0};if(n.pendingCoords){o.x=parseInt(n.pendingCoords[0],10),o.y=parseInt(n.pendingCoords[1],10),n.currentCoords?(u.x=n.currentCoords[0],u.y=n.currentCoords[1]):(i=n.getZoomPanCoordsForCursor(t),s=n.constrainPanCoords(i),u.x=parseInt(s[0],10),u.y=parseInt(s[1],10)),o.x<u.x?a.x=u.x-Math.abs(o.x-u.x)*r:a.x=u.x+Math.abs(o.x-u.x)*r,o.y<u.y?a.y=u.y-Math.abs(o.y-u.y)*r:a.y=u.y+Math.abs(o.y-u.y)*r,a.x=parseInt(a.x,10),a.y=parseInt(a.y,10),a.x===u.x&&(o.x<u.x?a.x=u.x-1:o.x>u.x&&(a.x=u.x+1)),a.y===u.y&&(o.y<u.y?a.y=u.y-1:o.y>u.y&&(a.y=u.y+1));if(a.x!==o.x||a.y!==o.y)(n.forceGpu===!0||e.config.win.devicePixelRatio>1)&&n.forceGpu!==!1?n.zoomPhotoContainerNode.setStyle("transform","translate3d("+a.x+"px, "+a.y+"px, 0)"):n.zoomPhotoContainerNode.setStyle("transform","translate("+a.x+"px, "+a.y+"px)");n.currentCoords=[a.x,a.y],a.x===o.x&&a.y===o.y&&delete n.pendingCoords}}),this.zoomNode?(this.zoomingOut=!1,r=this.zoomNode,r.removeClass("hiding"),r.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach(function(e){e.detach()}),delete this.touchHandlers)):r=this.zoomNode=e.Node.create(this.templates("zoom-modal")({smallSrc:o?s.medium:s.small,largeSrc:u?s.large.url:""})),i=this.zoomPhotoContainerNode=r.one(".zoom-photo-container"),this.zoomImageFullWidth=s.large.width/a,this.zoomImageFullHeight=s.large.height/a,t||(t=[this.appContext.viewportData.viewport.width/2,this.appContext.viewportData.viewport.height/2],n.cursorCoords=t),l=this.getZoomPanCoordsForCursor(t),l=this.constrainPanCoords(l),c={left:l[0],top:l[1],width:this.zoomImageFullWidth,height:this.zoomImageFullHeight},i.setStyle("transition","none"),this.resizeZoomNode(f,!1),r.on("click",function(t){if(n.zoomingIn)return;t.preventDefault(),e.rapidTracker.beacon(n.name,"zoomOutClick"),n.zoomOut()}),e.one("body").append(r),i.setStyle("width",c.width),i.setStyle("height",c.height),e.soon(function(){n.zoomingIn&&(r.removeClass("hidden"),i.setStyle("transition",""),"ontouchstart"in document?e.use("event-touch",function(){n.touchHandlers=[],n.touchHandlers.push(e.on("touchstart",function(e){e.changedTouches.length&&e.changedTouches.length===1&&(n.touching=[e.changedTouches[0].pageX,e.changedTouches[0].pageY])})),n.touchHandlers.push(e.on("touchmove",function(e){var t=e.pageX,r=e.pageY,i,s;n.touching&&e.changedTouches.length&&e.changedTouches.length===1&&(t=e.changedTouches[0].pageX,r=e.changedTouches[0].pageY,e.preventDefault(),i=t-n.touching[0],s=r-n.touching[1],n.touching=[t,r],n.panZoomNode([n.currentZoomRegion.left+i,n.currentZoomRegion.top+s]))})),n.touchHandlers.push(e.on("touchend",function(e){delete n.touching}))}):(r.on("mousemove",n.zoomMouseMoveHandler.bind(n)),n.mouseWheelHandler=function(){var e=n.zoomScrollWheelHandler.bind(n);return h="onwheel"in document.createElement("div")?"wheel":"mousewheel",document.addEventListener(h,e,!1),{detach:function(){document.removeEventListener(h,e,!1)}}}()),n.parentViewContainer.addClass("zoomed"),n.resizeZoomNode(c,!0).then(function(){n.zoomingIn&&(n.zoomingIn=!1,n.zoomedIn=!0,n.panZoomNodeToCurrentCoords(),u||i.append('<img src="'+s.large.url+'" class="zoom-large">'))}))})},getDeteriorationRateForEasing:function(){return.2},getZoomPixelRatio:function(){return 1}})},"@VERSION@",{requires:["flickr-view","better-throttle","flickr-promise","zoom-css","hermes-template-zoom","hermes-template-zoom-modal","animation-manager"],optional:["photo-models"],langBundles:["photo-page-scrappy"]});
YUI.add("hermes-lang-photo-page-scrappy",function(e,t){e.Intl.add("hermes/photo-page-scrappy","en-US",{PAGE_TITLE:["${title}"," | Flickr - Photo Sharing!"],BACK_TO:["Back to ","${entryType}"],COULDNT_UPDATE_SETTINGS:["We couldn't update your settings"],ADULT_CONTENT:["Adult Content"],MATURE_AUDIENCES:["This content is for mature audiences only."],USER_DISCRETION:["User discretion is advised."],SHOW_ME_THIS_CONTENT_TYPE:["Show Me This Content Type From Now On"],CHANGE_SAFE_SEARCH_IN_SETTINGS:['You can always change <a href="/account/prefs/safesearch/?from=privacy"  data-track="photoWellSafeSearchClick">SafeSearch settings</a> in your account preferences.'],SIGNED_IN_FOR_CONTENT:["You must be signed in to see this content."],VIDEO_COMING_SOON:["Video support coming soon"],FIND_OUT_MORE_AD:["Find out more at ","${brand}"],SHARE_THIS_PHOTO:["Share this photo"],DOWNLOAD_THIS_VIDEO:["Download this video"],DOWNLOAD_THIS_PHOTO:["Download this photo"],VIEW_ALL_SIZES:["View all sizes"],DOWNLOAD_PHOTO:["Download photo"],SOME_RIGHTS_RESERVED:["Some rights reserved"],DOWNLOAD:["Download"],ERROR_LOADING_CONTEXT:["Error loading context"],ADD_TITLE:["Add title"],ADD_DESCRIPTION:["Add description"],TITLE_DESCRIPTION_FAILURE:["We couldn't change the Title and Description at this time."],VIEW_PREVIOUS_COMMENT:["View previous comment"],VIEW_MORE_PREVIOUS_COMMENTS:["View ","${count}"," previous comments"],EMPTY_COMMENT_ERROR:["An empty comment box? That won't work!"],COMMENT_RATE_LIMIT_ERROR:["Slow down, partner! To protect the Flickr community against spam and spammy behavior we place a few restrictions on commenting."],COMMENT_POST_ERROR:["We couldn't post your comment."],MORE_COMMENTS_ERROR:["We couldn't get more comments."],COMMENT_PERMALINK_ERROR:["We were unable to find the specified comment on the photo."],DELETE_COMMENT:["Delete Comment"],COMMENT_DELETE_CONFIRMATION:["Are you sure you want to delete this comment?"],COMMENT_DELETE_ERROR:["We couldn't delete your comment."],COMMENT_LOADING_ERROR:["Error loading comments"],COMMENT:["Comment"],SHOW_MORE_COMMENTS:["${count}"," more"],REPLY:["Reply"],PERMALINK:["Permalink"],SINGLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAlias}",'/">',"${displayName}","</a> faved this"],DOUBLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a> and <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}","</a> faved this"],TRIPLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a>, and <a class="faved-by-person-link" href="/photos/',"${pathAliasThree}",'/">',"${displayNameThree}","</a> faved this"],MULTI_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> and <a class="remaining-faved-by" href="#">',"${count}"," more people</a> faved this"],RELATIONSHIP_FRIEND_ERROR:["There was a problem setting your friend relationship."],RELATIONSHIP_FAMILY_ERROR:["There was a problem setting your family relationship."],HIDE_EXIF:["Hide EXIF"],SHOW_EXIF:["Show EXIF"],EDIT_LOCATION:["Edit Location"],EDIT_LOCATION_ORGANIZR:["We\u2019re hard at work redesigning our brand new photo experience. For now, you can Edit Location in Organizr."],SAVE_LOCATION:["Save location"],APERTURE:["Aperture"],FOCAL_LENGTH:["Focal length"],EXPOSURE_TIME:["Exposure time"],FLASH_AUTO_FIRED:["Flash (auto, fired)"],FLASH_AUTO_NO_FIRE:["Flash (auto, did not fire)"],FLASH_ON_FIRED:["Flash (on, fired)"],FLASH_ON_NO_FIRE:["Flash (on, did not fire)"],FLASH_OFF:["Flash (off, did not fire)"],FLASH_SIMPLE_ON:["On"],FLASH_SIMPLE_OFF:["Off"],POWERED_BY:["POWERED BY"],FOURSQUARE:["FOURSQUARE"],ADD_PHOTO_TO_MAP:["Add this photo to your map"],SINGULAR_FAVE:["fave"],PLURAL_FAVE:["faves"],SINGULAR_VIEW:["view"],PLURAL_VIEW:["views"],SINGULAR_COMMENT:["comment"],PLURAL_COMMENT:["comments"],LICENSE_ERROR:["There was a problem changing your photo's license"],ALL_RIGHTS_RESERVED:["All rights reserved"],NO_RESTRICTIONS:["No known copyright restrictions"],PUBLIC_DOMAIN:["Public domain"],USA_GOV_WORK:["United States government work"],SAFETY_CHANGE_ERROR:["There was an error while changing your photo's safety level"],PRIVACY_CHANGE_ERROR:["There was a problem changing your photo's privacy"],COMMENT_PERM_CHANGE_ERROR:["There was an error while changing your photo's commenting permission"],FLAG_PHOTO:["Flag Photo"],MARK_FOR_REVIEW:["Mark for review"],ADDITIONAL_INFO:["Additional info"],VIEWING_THIS_PHOTO:["Viewing this photo"],PRIVACY_UPDATE_ERROR:["There was an error while updating the privacy. Please try again."],META_PERMS_UPDATE_ERROR:["There was an error while updating add meta permission. Please try again."],ADD_META_TO_THIS_PHOTO:["Add tags and people to this photo"],COMMENT_PERMS_UPDATE_ERROR:["There was an error while updating commenting permission. Please try again."],COMMENTING_ON_THIS_PHOTO:["Commenting on this photo"],SAFETY_UPDATE_ERROR:["There was an error while updating the safety level. Please try again."],SAFETY_LEVEL_OF_PHOTO:["Safety level of this photo"],FLAG_ERROR:["There was an error trying to flag this photo. Please try again."],PROVIDE_FEEDBACK:["Provide feedback on the new photo page"],ERROR_DELETING_AUTOTAG:["Error deleting Autotag"],AUTOTAGS:["Autotags"],CONTACT_LIST_ERROR:["An error occurred while trying to fetch your contact list. Please try again."],FAILED_TO_REMOVE_PERSON:["Failed to remove that person from the photo at this time."],PERSON_CANNOT_BE_TAGGED:["This person cannot be tagged."],PEOPLE_IN_PHOTO:["People in photo"],ADD_PEOPLE:["Add people"],ADD_PERSON:["Add a person"],ERROR_REMOVING_FROM_GROUP:["There was a problem removing this photo from the group"],ERROR_ACCEPTING_INVITATION:["There was a problem accepting the group invitation"
],SEARCH_GROUPS:["Search groups"],PHOTO_NOT_IN_GROUPS:["This photo is currently not in any groups"],ADD_TO_GROUP:["Add to group"],INVITE_TO_GROUP:["Invite to group"],ONE_GROUP_INVITATION:["You have 1 group invitation"],N_GROUP_INVITATIONS:["You have ","${count}"," group invitations"],VIEW_MORE_GROUPS:["View more groups"],ERROR_REMOVING_FROM_ALBUM:["There was a problem removing this photo from the album"],WARNING_REMOVE_LAST_PHOTO_FROM_ALBUM:["You're about to remove the last photo from an album, which will also delete the album."],REMOVE_PHOTO_AND_ALBUM:["Remove photo and delete album"],ADD_PHOTO_TO_ALBUM:["Add this photo to an album"],SEARCH_ALBUMS:["Search albums"],ADD_TO_ALBUM:["Add to album"],PHOTO_NOT_IN_ALBUMS:["This photo is currently not in any albums"],VIEW_MORE_ALBUMS:["View more albums"],PHOTO_IN_ONE_ALBUM:["This photo is in 1 album"],PHOTO_IN_N_ALBUMS:["This photo is in ","${count}"," albums"],INVITE_PENDING:["Invite pending"],CANCEL_INVITE:["Cancel invite"],ACCEPT_INVITE:["Accept invite"],ONE_ITEM:["1 item"],N_ITEMS:["${count}"," items"],ERROR_REMOVING_FROM_GALLERY:["There was a problem removing this photo from the gallery"],SEARCH_GALLERIES:["Search galleries"],ADD_TO_GALLERY:["Add to gallery"],PHOTO_NOT_IN_GALLERIES:["This photo is currently not in any galleries"],VIEW_MORE_GALLERIES:["View more galleries"],PHOTO_IN_ONE_GALLERY:["This photo is in 1 gallery"],PHOTO_IN_N_GALLERIES:["This photo is in ","${count}"," galleries"],DELETE_PHOTO:["Delete Photo"],PERMANTENTLY_DELETE:["Do you want to permanently delete this photo?"],EDIT_PHOTO:["Edit photo"],NO_VIDEOS_IN_AVIARY:["Videos cannot be edited in Aviary"],ENHANCE_WITH_AVIARY:["Enhance with Aviary"],NO_VIDEO_ROTATION:["Videos cannot be rotated"],ROTATE:["Rotate"],NO_VIDEO_REPLACE:["Videos cannot be replaced"],REPLACE:["Replace"],PHOTO_NAVIGATION:["Photo navigation"],THUMBNAIL_NAVIGATION:["Thumbnail navigation"],ZOOM:["Zoom"],VIEW_IN_LIGHTBOX:["View in light box"],BACK_TO_CONTEXT:["Back to context"],ADD_TAG:["Add tag"],GO_TO_ORGANIZER:["Go to Organizr"],ALBUM:["album"],ALBUMS:["albums"],ERROR_LOADING_ALBUMS:["There was a problem loading your albums"],ERROR_ADDING_PHOTO_TO_ALBUM:["There was a problem adding this photo to the album"],ERROR_REMOVING_PHOTO_FROM_ALBUM:["There was a problem removing this photo from the album"],ERROR_LOADING_GROUPS:["There was a problem loading the groups you can add photos to"],ERROR_ADDING_TO_GROUP:["There was a problem adding this photo to the group"],ERROR_ADDING_TO_GROUP_NOT_OWNER:["Sorry, the photo couldn't be added to the group because you don't own the photo."],ERROR_ADDING_TO_GROUP_NOT_MEMBER:["Sorry, the photo couldn't be added to the group. You are not a member of the group."],ERROR_ADDING_TO_GROUP_ALREADY_IN_POOL:["The photo is already in that group pool."],ERROR_ADDING_TO_GROUP_MAX_POOLS:["Sorry, the photo couldn't be added to the group because it is already in the maximum number of group pools."],ERROR_ADDING_TO_GROUP_MAX_PHOTOS_FROM_USER:["Sorry, the photo couldn't be added to the group. You have already added the maximum number of photos to the pool."],ERROR_ADDING_TO_GROUP_ADDED_TO_QUEUE:["Your photo has been added to the pending queue for the group."],ERROR_ADDING_TO_GROUP_ALREADY_IN_QUEUE:["Your photo is already in the pending queue for the group."],ERROR_ADDING_TO_GROUP_INVALID_CONTENT:["Sorry, the photo couldn't be added to the group. For more information, check the group requirements for media type, content type, safety level, and geo location."],ERROR_ADDING_TO_GROUP_MAX_IN_POOL:["Sorry, the photo couldn't be added to the group. The group has the maximum number of photos allowed in a pool."],ERROR_INVITING_TO_GROUP:["There was a problem inviting this photo to the group"],ERROR_CANCELING_GROUP_INVITIATON:["There was a problem canceling this photo's invitation to the group"],NO_MATCHES:["No matches"],CREATE_NEW:["Create new"],ERROR_LOADING_GROUP_INVITATIONS:["There was a problem loading this photo's group invitations"],NO_GROUP_INVITATIONS:["No pending group invitations"],PENDING_INVITATIONS_FOR_PHOTO:["Pending invitations for this photo"],LOADING_INVITATIONS:["Loading invitations"],ERROR_LOADING_GALLERIES:["There was a problem loading your galleries"],ERROR_ADDING_TO_GALLERY:["There was a problem adding this photo to the gallery"],ERROR_PHOTO_NOT_ALLOWED_IN_GALLERY:["The owner of this photo does not allow the photo to be added to your gallery"],ERROR_CREATING_GALLERY:["There was a problem creating your new gallery"],DATE_TAKEN_FORMAT:["The taken date must be in the MM/DD/YYYY hh:mm:ss format."],DATE_POSTED_FUTURE:["The posted date cannot be in the future."],DATE_UPLOADED_FUTURE:["The uploaded date cannot be in the future."],DATE_POSTED_FLICKR_JOIN:["Posted date must be after you joined Flickr."],DATE_UPLOADED_FLICKR_JOIN:["Uploaded date must be after you joined Flickr."],ERROR_SAVING_DATE:["Error saving dates"],DATE_INVALID:["One or more dates are invalid"],EDIT_DATES:["Edit Dates"],DATE_TAKEN_ON:["Date Taken On"],DATE_POSTED_ON:["Date Posted On"],DATE_UPLOADED_ON:["Date Uploaded On"],TAKEN_CIRCA:["Taken circa ","${intlDate}"],TAKEN_SOMETIME_IN:["Taken sometime in ","${intlDate}"],TAKEN_IN:["Taken in ","${intlDate}"],TAKEN_ON:["Taken on ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON:["Uploaded on ","${intlDate}"],SOMETHING_WENT_WRONG:["Something went wrong."],REFRESH_BROWSER:["Please refresh your browser and try again."],TWITTER_NOT_FOUND:["Twitter account not found on posting"],TUMBLR_NOT_FOUND:["Tumblr account not found on posting"],LINK:["Link"],LINK_TO_VIDEO:["Link to this video:"],LINK_TO_PHOTO:["Link to this photo:"],NO_LINKS_FOR_RESTRICTED_VIDEO:["Links are not available for restricted videos"],PRIVATE_VIDEO_SHARE:["This is a private video, do you still want to share it?"],NO_LINKS_FOR_RESTRICTED_PHOTO:["Links are not available for restricted photos"],PRIVATE_PHOTO_SHARE:["This is a private photo, do you still want to share it?"],SHARING_RESTRICTED_VIDEO:["Sharing is restricted for this video"
],SHARING_RESTRICTED_PHOTO:["Sharing is restricted for this photo"],EMBED:["Embed"],PUBLIC_TO_SHARE:["Please share this photo publicly to view embed code"],SIZE:["Size:"],TITLE_AND_OWNER_AT_START:["Display title and owner at start"],SHARE_NOW:["Share now!"],SHARE_PHOTO:["Share Photo"],SHARE_ON_TWITTER:["Share on Twitter"],AUTHORIZE_FOR_TWITTER:["please authorize Flickr to post on Twitter"],SHARE_ON_TUMBLR:["Share on Tumblr"],PUBLISH_NOW:["Publish now"],ADD_TO_QUEUE:["Add to queue"],SAVE_AS_DRAFT:["Save as draft"],AUTHORIZE_FOR_TUMBLR:["please authorize Flickr to post on Tumblr"],SHARE_VIA_MAIL:["Share via mail"],SCREEN_NAME_OR_EMAIL:["Screen name or email"],SQUARE:["Square"],SMALL:["Small"],MEDIUM:["Medium"],LARGE:["Large"],ORIGINAL:["Original"],DUPLICATE_TAG:["Duplicate Tag"],INVALID_TAG:["Invalid Tag"],MAXIMUM_TAG_LIMIT:["Maximum tag limit (76) reached"],MAX_TAG_LIMIT:["Maximum tag limit (75) reached"],ERROR_ADDING_TAG:["Error adding tag"],ERROR_DELETING_TAG:["Error deleting tag"],TAGS:["Tags"],ADD_TAGS:["Add tags"],ADD_A_TAG:["Add a tag"],PHOTO_IN_ONE_GROUP:["This photo is in 1 group"],PHOTO_IN_MANY_GROUPS:["This photo is in ",{type:"number",valueName:"count"}," groups"],PHOTO_IN_NO_GROUPS:["This photo is not in any groups"],ADD_A_COMMENT:["Add a comment"],COMMENT_TUTORIAL:["press Enter to post and Shift+Enter for newline"],SIGNED_IN_TO_POST_A_COMMENT:["You must be signed in to post a comment"],SHARE:["Share"],CODE:["Code"],INCLUDE_A_MESSAGE:["Include a message"],FOR_MORE_INFORMATION_SAFESEARCH:['For more information please read <a href="//www.flickr.com/help/photos/?search=flag#145">this FAQ</a>.'],FLAG_CONFIRMATION_SAFE_WITHIN:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">safe</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_SAFE_OUTSIDE:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">safe</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_MODERATE_WITHIN:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">moderate</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_MODERATE_OUTSIDE:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">moderate</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_RESTRICTED_WITHIN:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">restricted</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],FLAG_CONFIRMATION_RESTRICTED_OUTSIDE:['This photo is marked as <a href="//www.flickr.com/help/filters/#258">restricted</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'],PRIVATE_PHOTO:["Private photo"],PHOTO_UNFIT_FOR_YOUR_EYES:["Photo is unfit for your eyes. Have a kitten: (^._.^)\uff89"],NO_PHOTO_WITH_THAT_ID:["No photo found with id ","${photoId}"],NO_MEMBERS_FOUND:["No members found"],TAKEN_ON_INTL:["Taken on ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON_INTL:["Uploaded on ",{type:"date",valueName:"intlDate",format:"long"}],TAKEN_IN_MONTH:["Taken in ",{type:"date",valueName:"intlDate",format:"monthYear"}],VIEW_IN_LIGHTBOX_SHORTCUT:["View in light box"],ZOOM_MAX_MESSAGE:["Whoa there, tiger! This photo is already at maximum size."],CLICK_TO_FAVE_PHOTO:["Click here to fave this photo"],CLICK_TO_FAVE_VIDEO:["Click here to fave this video"],BACK_TO_ACTIVITY_FEED:["Back to activity feed"],BACK_TO_PHOTOSTREAM:["Back to photostream"],BACK_TO_SHARED_PHOTOS:["Back to shared photos"],BACK_TO_ALBUM:["Back to album"],BACK_TO_CONTACTS_LIST:["Back to contacts list"],BACK_TO_FAVORITES:["Back to favorites"],BACK_TO_GALLERY:["Back to gallery"],BACK_TO_PROFILE:["Back to profile"],BACK_TO_EXPLORE:["Back to explore"],BACK_TO_COMMONS:["Back to commons"],BACK_TO_GROUP:["Back to group"],BACK_TO_GROUPS:["Back to groups"],BACK_TO_MAP:["Back to map"],BACK_TO_SEARCH:["Back to search"],ERROR_ADDING_PHOTOS_TO_ALBUM:["There was a problem adding these photos to the album"],ERROR_REMOVING_PHOTOS_FROM_ALBUM:["There was a problem removing these photos from the album"],ERROR_CREATING_ALBUM:["There was a problem creating your new album"],STRICTER_PRIVACY_CHANGE_DIALOG_TITLE:["Changing to a stricter privacy level"],STRICTER_PRIVACY_CHANGE_DIALOG_MESSAGE:["Changing a photo to a stricter privacy level will remove any favorites that have accumulated. It will also change the URL of the photo."],TAGS_HELPER_TEXT:["Tags are keywords that make photos easier to find. Add as many as you like, and Flickr\u2019s friendly robots will try to help out by adding some for you."],TAGS_HELP_TEXT:["Tags are keywords that make photos easier to find in Flickr search. The ones you add will show up in dark gray. Flickr\u2019s friendly robots will try to help out by adding some for you; these will appear with just a gray outline."],PRIVATE_TAGS_OWNER_HELPER_TEXT:["This private tag is only visible to you and your friends and family who are allowed to see this photo."],PRIVATE_TAGS_FRIENDS_FAMILY_HELPER_TEXT:["This private tag is only visible to you because you are a friend or family of the photo\u2019s owner."],CREATE_WALLART_WITH_PHOTO:["Create wall art with this photo"],ERROR_ROTATING_PHOTO:["There was a problem rotating this photo, please close and retry."],ROTATE_PHOTO:["Rotate photo"],ERROR_REPLACING_PHOTO:["There was a problem replacing this photo, please close and retry."],REPLACE_PHOTO:["Replace photo"],PERMANENTLY_REPLACE:['Permanently replace this photo ("',"${photoTitle}",'" by ',"${username}",") with <em>","${fileName}","</em>?"],REPLACE_WARNING:["Replacing a photo can't be undone. Choose a file to replace this photo with."],REPLACE_UPLOADING:["Uploading <em>","${fileName}","</em>..."],ERROR_DELETING_PHOTO
:["There was a problem deleting this photo, please close and retry."],SHOW_MORE_STATS:["Show more stats"],SIGNUP_AND_DOWNLOAD_TITLE:["You found a photo to download!"],SIGNUP_AND_DOWNLOAD_MESSAGE:["Join Flickr to access billions of photos."],SIGNUP_AND_COMMENT_TITLE:["Comment on this photo!"],SIGNUP_AND_COMMENT_MESSAGE:["Join Flickr to leave a comment on this photo."],IMMERSIFY:["Immersify"],SIGNUP_FOOTER_MESSAGE:["Join Flickr to explore world class photos"]})},"@VERSION@",{requires:["intl"]});
YUI.add("photo-well-media-view",function(e){var t=500,n=500,r=100,i;i={photo:{render:function(){var t=this,n,i=this.get("photo"),s,o,u=new Date,a="";return t.preloadImage&&(t.preloadImage.onload=null),s=this.getPhotoForDisplay(),o=this.getPhotoForDisplay({includeSizes:["sq","q","t","s","n"]}),i.getValue("owner")&&(i.getValue("title").trim()===""?a=this.intlMessage({intlName:"common.UNTITLED"}):a=i.getValue("title"),a+=" | "+this.intlMessage({intlName:"common.BY_USER",user:i.getValue("owner").getValue("username")})),n=this.templates("photo-well-media")({width:s.width,height:s.height,src:o.url,highResSrc:s.url,imgAltText:a,needsInterstitial:i.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isVideo:i.getValue("isVideo"),isAd:this.isAd,"zoom-view":this.subviews["zoom-view"]?this.subviews["zoom-view"].get("container"):""}),this.setContainerHTML(n),this.fire("subviewViewEvent",s),YUI.Env.isServer?(this.serverWidth=s.width,this.serverHeight=s.height):i.getValue("needsInterstitial")||(t.preloadImage=new Image,t.preloadImage.onload=function(){if(this.onloadFired)return;if(!t.isActiveAndInDOM())return;this.onloadFired=!0,e.rapidTracker.beacon(this.name,"photoPageShowedSize"+(/(?:_([a-z]))?\.jpg/.exec(s.url)[1]||"\u00f8").toUpperCase());var n=t.get("container").one(".low-res-photo"),i=t.get("container").one(".main-photo"),o=new Date-u,a;o<r?(i.removeClass("is-hidden").show(),n.hide()):(i.setStyles({position:"absolute",left:0,top:0,opacity:0}),i.removeClass("is-hidden"),a=function(){i.removeAttribute("style"),n.hide()},e.UA.ie?a():e.use("transition",function(e){i.transition({duration:.25,opacity:1},a)}))},t.preloadImage.src=s.url,t.preloadImage.complete&&t.preloadImage.onload()),this}},video:{render:function(){var t,n=this,r=this.get("photo"),i=this.getPhotoForDisplay({excludeSizes:[]});return this.player?(this.player.resize(i.width,i.height),this):(t=this.templates("photo-well-media")({width:i.width,height:i.height,src:i.url,needsInterstitial:r.getValue("needsInterstitial"),isVideo:r.getValue("isVideo"),isSignedIn:this.appContext.getViewer().signedIn,"zoom-view":""}),this.setContainerHTML(t),this.fire("subviewViewEvent",i),YUI.Env.isServer?this:(this.player=new e.FlickrVideoPlayer({container:this.get("container").one(".videoplayer"),model:r,appContext:this.appContext}),n.player.init().then(function(){n}),this.on("destroy",function(){n.player.destroy(),n.player=null}),this))}},ad:{render:function(){var e,t,n;return this.adJSON?t=this.adJSON:(t=this.appContext.adManager.getAdJSON(),this.adJSON=t),n=this.getAdSize(t),e=this.templates("photo-well-ad")({width:n.width,height:n.height,src:t.url,clickUrl:t.clickUrl,brand:t.brand,adsTypeB:this.appContext.flipper.isFlipped("moneyball-ads-type-b")}),this.setContainerHTML(e),this}}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"zoom-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("enable-scrappy-zoom")},disableIfSmall:!0}},initializer:function(e){return this.photoId=e.photoId,this.isAd=!!e.ad,this.ad=e.ad,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){return YUI.Env.isServer||this.set("clientRendered",!0),this.isAd?i.ad.render.call(this):i[this.get("photo").getValue("isVideo")?"video":"photo"].render.call(this),this},handleInterstitialDismissButtonClick:function(t){var n=this,r=this.get("personPreferences"),i=this.get("photo"),s=i.getValue("safetyLevel");e.rapidTracker.beacon(this.name,"restrictedContentInterstitialClick"),r.setValue("safeSearch",s),r.registry.remoteUpdate(n.appContext.auth.user.nsid).then(function(e){var t=i.registry.attributeSearch({needsInterstitial:!0});t.forEach(function(e){i.registry.getValue(e,"safetyLevel")<=r.getValue("safeSearch")&&i.registry.setValue(e,"needsInterstitial",!1)}),n.buildContainer()},function(t){e.Flog.error(t.message),e.Flog.error(t.stack),n.onError(n.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))})},activate:function(){var t=this,n=this.getPhotoForDisplay(),r=this.get("container").one(".main-photo"),i,s;return this.get("photo").getValue("needsInterstitial")||(e.use("global-events",function(e){t.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){t.set("canvasSizeIsDirty",!0),t.buildContainer()}))}),this.registerEventHandler(e.on("flickr:photo-media-well-update",function(e){t.set("canvasSizeIsDirty",!0),t.buildContainer()})),!this.isAd&&(!t.get("clientRendered")||n.width!==Number(r.getAttribute("width"))||n.height!==Number(r.getAttribute("height")))&&t.buildContainer()),this.registerEventHandler(e.on("flickr:display-note-box",function(n){i=e.Node.create('<div class="note-box"></div>'),s=t.get("container").one(".main-photo").getXY(),t.get("container").append(i),i.setStyles({top:n.noteBoxTop+t.get("container").one(".main-photo").getDOMNode().offsetTop,left:n.noteBoxLeft,width:n.noteBoxWidth,height:n.noteBoxHeight})})),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",t.appContext.auth.user.nsid).then(function(e){t.set("personPreferences",e),t.get("photo").getValue("needsInterstitial")&&t.registerEventHandler(t.get("container").one(".restricted-interstitial-message button").on("click",t.handleInterstitialDismissButtonClick,t))}),this},onError:function(t){var n=this;this.fire("subviewViewEvent","getDialogOffset",function(r){var i=e.Views.dialog.getInstance("dialog-alert",{content:t,attrs:{title:n.intlMessage({intlName:"common.ERROR"}),level:"warning",confirmLabel:n.intlMessage({intlName:"common.OK"})},parent:n,offsetLeft:r});i.show()})},getPhotoForDisplay:function(e){var t=this.getCanvasSize(),n=this.getPixelRatio(),r=this.get("photo").getSizeToFit(t,e),i,s;return i=Math.min(t.height/n,r.height),s=Math.min
(t.width/n,r.width/r.height*i),i=Math.min(i,r.height/r.width*s),{width:Math.round(s),height:Math.round(i),url:r.url,pixelRatio:r.width/s}},getAdSize:function(e){var t=this.getCanvasSize(),n=this.getPixelRatio(),r=80,i=140,s,o;return this.appContext.flipper.isFlipped("moneyball-ads-type-b")&&(t.height-=(r+i)*n,t.width-=i*n),s=Math.min(t.height/n,e.height),o=Math.min(t.width/n,e.width/e.height*s),s=Math.min(s,e.height/e.width*o),{width:o,height:s}},getCanvasSize:function(){var e,r=this.getPixelRatio(),i;return this.get("canvasSizeIsDirty")?YUI.Env.isServer||(i=this.get("container").ancestor(),i&&(e=i.get("region"),e.width>0&&e.height>0&&(this.set("canvasSizeIsDirty",!1),this.set("cachedCanvasSize",e),this.appContext.setCookie({remove:!0,cookieName:"photoPW",path:"/photos/",cookieValue:e.width}),this.appContext.setCookie({remove:!0,cookieName:"photoPH",path:"/photos/",cookieValue:e.height}),this.appContext.setCookie({remove:!0,cookieName:"density",path:"/photos/",cookieValue:r})))):e=this.get("cachedCanvasSize"),e||(e={top:0,left:0,bottom:n,right:t,width:parseInt(this.appContext.getCookie("photoPW"),10)||t,height:parseInt(this.appContext.getCookie("photoPH"),10)||n}),e.height*=r,e.width*=r,e},getPixelRatio:function(){return this.appContext.getViewer().getPixelRatio()}},{ATTRS:{canvasSizeIsDirty:{value:!0,setter:function(e){return!!e}},cachedCanvasSize:{getter:function(t){return e.merge(t)},setter:function(t){return e.merge(t)}}}})},"@VERSION@",{requires:["flog","flickr-view","hermes-template-photo-well-media","moment","flickr-video-player","hermes-template-photo-well-ad","zoom-view"],optional:["photo-models"],langBundles:["common","photo-page-scrappy"]});
YUI.add("seo",function(e,t){e.Seo={appContext:{},getSEOTitleForPhoto:function(e,t,n,r){var i=e.getValue("og:title"),s=e.getValue("og:description"),o="",u="| Flickr",a=70,f=a-(i.length+u.length+5);return i==="Untitled"&&(i=r),i.length>50?o=i.slice(0,58)+(i.length<58?" ":"\u2026 "):i.length>20&&i.length<50?s.length>20?o=i+" | "+s.slice(0,f)+(s.length<f?" ":"\u2026 "):o=i+" | "+s.slice(0,f)+(s.length<f?" ":"\u2026 ")+"| "+n+" ":i.length<=20&&(s.length>50?o=i+" | "+s.slice(0,f)+(s.length<f?" ":"\u2026 "):o=i+" | "+s.slice(0,f)+(s.length<f?" ":"\u2026 ")+"| "+n+" "),o},generateSEODescriptionForPhoto:function(e,t,n,r,i){var s=e.getValue("og:title"),o=e.getValue("og:description"),u="",a=160;return s==="Untitled"&&(s=r),o.length>120?u=o.slice(0,120)+(o.length<120?" ":"\u2026 ")+n+" "+i+".":o.length>60&&o.length<120?u=o+(o.slice(o.length-1,o.length)==="."?" ":". ")+s.slice(0,40)+(s.length<40?" ":"\u2026 ")+n+" "+i+".":o.length<=60&&(u=s+(s.slice(s.length-1,s.length)==="."?" ":". ")+o.slice(0,a-s.length)+(o.length<a-s.length?" ":"\u2026 ")+n+" "+i+"."),u}}},"@VERSION@",{requires:[]});
YUI.add("hermes-template-photo-page-scrappy",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["global-nav-view"],u):a.call(t,"outlet",t["global-nav-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["photo-well-view"],u):a.call(t,"outlet",t["photo-well-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["sub-photo-view"],u):a.call(t,"outlet",t["sub-photo-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["signup-footer-view"],u):a.call(t,"outlet",t["signup-footer-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["mini-signup-footer-view"],u):a.call(t,"outlet",t["mini-signup-footer-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["footer-full-view"],u):a.call(t,"outlet",t["footer-full-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["curator-photo-tools-view"],u):a.call(t,"outlet",t["curator-photo-tools-view"],u))),s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-page-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-dialog-tooltip",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" ui-dialog-tooltip-witharrow"}function h(e,t){return" drop-up"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=this,f=n.helperMissing,l=this.escapeExpression;s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-tooltip',o=n["if"].call(t,t.arrow,{hash:{},inverse:a.noop,fn:a.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.dropUp,{hash:{},inverse:a.noop,fn:a.program(3,h,i),data:i});if(o||o===0)s+=o;return s+='" data-action="halt">\n	<span class="ui-dialog-arrow"></span>\n	<div class="ui-dialog-body">\n	',u={hash:{},data:i},s+=l((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,u):f.call(t,"dialogOutlet",t.content,u)))+"\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-tooltip",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-dialog-modal",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-modal">\n	<div class="ui-dialog-body">\n	',u={hash:{},data:i},s+=f((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,u):a.call(t,"dialogOutlet",t.content,u)))+"\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-dialog-alert",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;return s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-alert">\n    <div class="dialog-title">\n		<h3>'+f((o=(o=t.attrs,o==null||o===!1?o:o.title),typeof o===a?o.apply(t):o))+'</h3>\n		<i class="close-alert ui-dialog-button-close" data-action="dismiss"></i>\n    </div>\n    <div class="dialog-content">\n        <i class="ui-icon-modal-error '+f((o=(o=t.attrs,o==null||o===!1?o:o.level),typeof o===a?o.apply(t):o))+'"></i>\n        <div class="alert-dialog-text">\n    	',u={hash:{},data:i},s+=f((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,u):l.call(t,"dialogOutlet",t.content,u)))+'\n    	</div>\n    </div>\n    <button class="ui-button ui-button-cta" data-action="ok">\n        <span>'+f((o=(o=t.attrs,o==null||o===!1?o:o.confirmLabel),typeof o===a?o.apply(t):o))+"</span>\n    </button>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-alert",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-dialog-cta",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return"ui-buttonbar-vertical"}function d(e,t){var n="",r;return n+='\n				<button class="ui-button ui-button-cta" data-action="confirm"><span>'+l((r=(r=e.attrs,r==null||r===!1?r:r.confirmButtonText),typeof r===f?r.apply(e):r))+"</span></button>\n			",n}function v(e,t){var r="",i;r+="\n				",i=n["if"].call(e,e.buttonMarkup,{hash:{},inverse:c.program(8,g,t),fn:c.program(6,m,t),data:t});if(i||i===0)r+=i;return r+="\n			",r}function m(e,t){var n="",r;return n+="\n					"+l((r=e.buttonMarkup,typeof r===f?r.apply(e):r))+"\n				",n}function g(e,t){var r="",i;r+='\n					<button class="ui-button" ',i=n["if"].call(e,e.buttonAction,{hash:{},inverse:c.noop,fn:c.program(9,y,t),data:t});if(i||i===0)r+=i;return r+="><span>"+l((i=e.buttonLabel,typeof i===f?i.apply(e):i))+"</span></button>\n				",r}function y(e,t){var n="",r;return n+='data-action="'+l((r=e.buttonAction,typeof r===f?r.apply(e):r))+'"',n}function b(e,t){var n="",r;return n+='\n				<button class="ui-button" data-action="decline"><span>'+l((r=(r=e.attrs,r==null||r===!1?r:r.cancelButtonText),typeof r===f?r.apply(e):r))+"</span></button>\n			",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-cta">\n	<h1 class="ui-dialog-title">'+l((o=(o=t.attrs,o==null||o===!1?o:o.title),typeof o===f?o.apply(t):o))+'</h1>\n	<div class="ui-dialog-body">\n		<div class="ui-util-paragraph">\n			',a={hash:{},data:i},s+=l((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,a):h.call(t,"dialogOutlet",t.content,a)))+'\n		</div>\n		<div class="ui-buttonbar ',u=n["if"].call(t,(o=t.attrs,o==null||o===!1?o:o.verticalButtonList),{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(u||u===0)s+=u;s+='">\n			',u=n.unless.call(t,(o=t.attrs,o==null||o===!1?o:o.hideConfirmButton),{hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i});if(u||u===0)s+=u;s+="\n			\n			",u=n.each.call(t,(o=t.attrs,o==null||o===!1?o:o.additionalButtons),{hash:{},inverse:c.noop,fn:c.program(5,v,i),data:i});if(u||u===0)s+=u;s+="\n			\n			",u=n["if"].call(t,(o=t.attrs,o==null||o===!1?o:o.useCancelButton),{hash:{},inverse:c.noop,fn:c.program(11,b,i),data:i});if(u||u===0)s+=u;return s+="\n		</div>\n	</div>\n</div>\n\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-cta",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("dialog",function(e){"use strict";var t,n,r={},i=e.config.win,s=e.config.doc;t={css:{state:"c-state-{{state}}",hidden:"ui-util-hidden",loading:"ui-util-loading",working:"ui-util-working",locked:"ui-util-locked",complete:"ui-util-complete",removed:"ui-util-removed",content:"js-content",wrapper:"ui-dialog-wrapper",anchorSelected:"ui-util-selected",curtain:"ui-dialog-modal-curtain",curtainClear:"ui-dialog-modal-curtain-clear",arrow:"ui-dialog-arrow"},transitionTimeout:2e3,debug:!1},n=e.merge(e.flutil,{log:function(){if(!t.debug||!console.log.apply)return;var e=[].slice.call(arguments);e.unshift("DIALOG"),n.dump.apply(null,e)},propagateWrapperAttributes:function(e,n){var r=[],i;return n?(Array.prototype.slice.call(n.getDOMNode().classList).forEach(function(i){if(i===t.css.wrapper)return;n.removeClass(i),e.addClass(i),r.push(i)}),i=n.getAttribute("data-action"),i&&(n.removeAttribute("data-action"),r.push({attr:"data-action",restore:e.getAttribute("data-action")||null}),e.setAttribute("data-action",i)),r):r},rollbackWrapperAttributes:function(e,t){if(!t)return;for(var n=0,r=t.length;n<r;n++)typeof t[n]=="object"?t[1].restore?e.setAttribute(t[n].name,t[n].restore):e.removeAttribute(t[n].name):e.removeClass(t[n])}}),e.namespace("Views").dialog={_dialogs:{},getInstance:function(t,r){var i,s,o;return r.id?s={id:r.id}:(s=e.merge(r),delete s.parent,delete s.rootEl,delete s.template,delete s.appContext,typeof s.content=="object"&&s.content instanceof e.FlickrView?s.content=s.content.get("container").toString():typeof s.content=="function"?s.content=s.content({}):s.content.toString()),i="SGL"+n.createHashCode(s),o=this._dialogs[t+":"+i],o?o:this._new(t,i,r)},getNewInstance:function(e,t){var n="OBJ"+(Object.keys(this._dialogs).length+1)+(new Date).getTime();return this._new(e,n,t)},_new:function(t,n,i){var s,o,u,a,f;if(e.Env.isServer)throw new Error("Dialogs are client-only!");i=e.mix(i||{});if(i.parent)o=i.parent,delete i.parent,a=o.getContainer({subviewName:t,subviewParams:i}),u=o.appContext;else{if(!i.appContext)throw new Error('Either the "appContext" or "parent" parameter is required!');o=null,u=i.appContext,a=e.Node.create("<div/>"),a.addClass("view").addClass(t)}return i.appContext=u,i.container=a,s=new r[t](i),f=t+(n?":"+n:""),s._parent=o,this.registerView(s,f),this._navigateCloseHook||(this._navigateCloseHook=u.flapp.on("navigate",this.close.bind(this))),s},registerView:function(e,t){var n=this;t=t||"REG"+(Object.keys(this._dialogs).length+1),e.manager=this,this._dialogs[t]=e,e.on("destroy",function(){delete n._dialogs[t]})},hide:function(e){this.close(e,"hide")},close:function(e,t){var n=this,r;t=t||"close",typeof e=="string"?r=function(r){if(e!==r.split(/:/)[0])return;n._dialogs[r][t]()}:typeof e=="object"?r=function(r){if(e===n._dialogs[r])return;n._dialogs[r][t]()}:r=function(e){n._dialogs[e].get("autoCloseable")&&n._dialogs[e][t]()},Object.keys(this._dialogs).forEach(r)},isOpen:function(e){},util:n},e.namespace("Views").dialogs=r,r["dialog-base"]=e.Base.create("dialog-base",e.FlickrView,[],{initializer:function(e){return e=e||{},this.state={},this.manager=null,this.appContext=this.appContext||e.appContext,this},render:function(){var n=this.templates(this.get("template"))(this.toJSON());return this.setContainerHTML(n),e.namespace("Views").dialog.util.propagateWrapperAttributes(this.get("container"),this.get("container").one("."+t.css.wrapper)),this.renderContent(),this.activate(),this.get("container").addClass(t.css.hidden),this.anchorToLayout(),this.state.visible=!0,this.hide(),this.state.rendered=!0,this.fire("rendered"),this},renderContent:function(r){var i=this.get("content"),s=this.get("container"),o=s.one("."+t.css.content);e.namespace("Views").dialog.util.rollbackWrapperAttributes(this.get("container"),this._contWrap);if(i instanceof e.FlickrView){i=i.get("container");if(!i)throw new Error("The Content View doesn't have a container");o.setHTML(""),o.appendChild(i)}else i instanceof e.Node?(o.setHTML(""),o.appendChild(i)):typeof i=="function"?(i=i(e.merge(this.toJSON(),r)),o.setHTML(i)):typeof i=="string"&&this.state.rendered&&o.setHTML(i);this._contWrap=n.propagateWrapperAttributes(s,o.one("."+t.css.wrapper))},renderCurtain:function(){var n=this,r,i=e.Number.parse(this.get("tintCurtain"));this.get("curtain")||(r=e.Node.create("<div/>"),r.addClass(t.css.curtain).addClass(t.css.hidden),this.get("visibleShim")||r.addClass(t.css.curtainClear),r.on("click",this.dismiss,this),i&&r.setStyle("backgroundColor","rgba(0, 0, 0, "+i+")"),this.set("curtain",r),this.get("appendCurtainTo")?this.get("appendCurtainTo").appendChild(r):this.get("container").ancestor()&&this.get("container").ancestor().insert(r,"after")),n.get("curtain").removeClass(t.css.hidden)},anchorToLayout:function(){var t=this.get("container"),n=this.get("anchorTo"),r,i=this.get("appendTo")||n||this.get("rootEl");if(!i){var s=new Error("Missing DOM node for anchoring dialog.");throw e.config&&e.config.win&&e.config.win.beaconError&&e.config.win.beaconError("dialogjs.failure "+(this._parent?this._parent.name:""),e.config.win.location.href,s),s}i.appendChild(t),this.get("positioning")?(this.get("dropUp")&&(r="bottomright"),this.refreshPosition(r)):this.manualPosition()},refreshPosition:function(n){var r,s,o,u,a,f,l,c,h=this.get("container"),p=this.get("anchorTo"),d=this.get("offsetLeft")||0,v,m;u=h.getDOMNode().getBoundingClientRect(),this.set("width",h.getComputedStyle("width")),this.set("height",h.getComputedStyle("height")),h.getComputedStyle("position")==="fixed"&&h.setStyles({marginLeft:(-1*u.width/2|0)-d+"px",marginTop:(-1*u.height/2|0)+"px"});if(p){r=p.getDOMNode().getBoundingClientRect(),this.set("anchorWidth",r.width),this.set("anchorHeight",r.height),m=e.merge({top:0,bottom:0,left:0,right:0},this.get("constraints")),c={top:m.top,bottom:i.innerHeight+m.bottom,left:m.left,right:i.innerWidth+m.right},a=[[r.bottom+u.height<c.bottom&&r.right+u.width<c.right,{left:0,top:r.height},"topleft"],[r.bottom+u.height<c.bottom&&r
.left-u.width>c.left,{right:0,top:r.height},"topright"],[r.top>u.height+c.top&&r.right+u.width<c.right,{left:0,bottom:r.height},"bottomleft"],[r.top>u.height+c.top&&r.left-u.width>c.left,{right:0,bottom:r.height},"bottomright"],[!0,{left:Math.round(-1*(u.width-r.width)/2),top:r.height},"topcenter"]],n&&(n=n.toLowerCase(),a=a.filter(function(e){return e[2]===n?(e[0]=!0,!0):!1})||a);while(a.length){l=a.shift();if(l[0]){f=l[1],h.addClass("ui-dialog-tooltip-witharrow-"+l[2]),h.setStyles(e.mix({top:"auto",bottom:"auto",left:"auto",right:"auto"},f,!0));break}}v=h.one("."+t.css.arrow),v&&(s=20,f.left!==0&&f.right!==0?o=Math.round((u.width-s)/2)+"px":o=Math.round((r.width-s)/2)+"px",v.setStyles({right:f.right===undefined?"auto":o,left:f.left===undefined?"auto":o}))}},manualPosition:function(){if(this.get("arrow")){var e=typeof this.get("arrow")=="string"?this.get("arrow"):"topleft";this.get("container").addClass("ui-dialog-tooltip-witharrow-"+e)}},activate:function(){var e={":confirm":this.confirm,":decline":this.decline,":dismiss":this.dismiss,":ok":this.dismiss,":halt":function(e){e.halt()}};return this.attachEvents(e),this},toJSON:function(){var t=this.getAttrs();return Object.keys(t).reduce(function(n,r){var i=t[r];return i instanceof e.Node?n:i instanceof e.FlickrView?n:(i&&i.toJSON&&(i=i.toJSON()),n[r]=i,n)},{})},isVisible:function(){return!!this.state.visible},isLocked:function(){return!!this.state.locked},isWorking:function(){return!!this.state.working},show:function(r){try{var i=this,s=this.get("container"),o=this.get("anchorTo");this.set("dismissing",!1),this.switchToLoading(!1);if(this.state.visible)return;this.state.rendered||this.render(),i.state.visible=!0,s.addClass(this.get("dialogClass")),this.fire("show"),s.removeClass(t.css.removed),setTimeout(function(){n.onTransitionEnd(s,r),s.removeClass(t.css.hidden),o&&o.addClass(t.css.anchorSelected)},10),e.fire("flickr:setKeyEventScope",this.getKeyEventScope())}catch(u){console&&console.error&&console.error("An error occured showing the dialog.")}},handleError:function(e){return function(t){console.error(e,!t.toString||t.toString().match(/^\[object/)?t:t.toString())}},getKeyEventScope:function(){return this.name+this._yuid},close:function(e){if(this._destroyed)return;var t=this;this.set("dismissing",!1),this.fire("close"),this.hide(function(){t.destructor(),e&&e()})},destructor:function(){var t=this.get("container");t.detach(),t.remove(),this.set("container",null),this.set("content",null),this.set("appendTo",null),this.set("anchorTo",null),this.set("rootEl",null),this.set("dialogClass",null),this.manager=null,e.FlickrView.prototype.destroy.call(this),this._destroyed=!0,this.fire("destroy"),this.detachAll()},hide:function(r){e.fire("flickr:removeKeyEventScope",this.getKeyEventScope());if(!this.state.visible)return;var i=this,s=this.get("container"),o=this.get("anchorTo"),u=this.get("curtain"),a=!this.state.rendered;this.state.visible=!1,o&&o.removeClass(t.css.anchorSelected),u?(this.set("curtain",null),u.detach(),n.onTransitionEnd(u,function(){u.remove()}),u.addClass(t.css.hidden)):s.addClass(t.css.removed),e.namespace("Views").dialog.util.onTransitionEnd(s,function(){i.set("dismissing",!1),a||i.fire("hide"),i.state.visible||s.addClass(t.css.removed),r&&r()}),s.addClass(t.css.hidden)},toggle:function(e){this[this.state.visible?"hide":"show"](e),this.fire("toggle",this.state.visible)},switchToLoading:function(e){this.switchToUIState("loading",e)},switchToComplete:function(e){this.switchToUIState("complete",e)},switchToLocked:function(e){this.switchToUIState("locked",e)},switchToWorking:function(e){this.switchToUIState("working",e)},switchToUIState:function(e,n){var r;n=n===!1?!1:!0;if(this.state[e]===n)return;this.state[e]=n,r=t.css[e]||t.css.state.replace(/\{\{state\}\}/,e),this.get("container")[n?"addClass":"removeClass"](r)},confirm:function(t,n){t.halt(),this.fire("confirm",n),this.get("hideOnButtonClick")&&this.hide(),e.namespace("Views").dialog.util.log("CONFIRM")},decline:function(t,n){t.halt(),this.fire("decline",n),this.get("hideOnButtonClick")&&this.hide(),e.namespace("Views").dialog.util.log("DECLINE")},dismiss:function(t,n){if(this.isWorking()||!this.get("hideOnCurtainClick"))if(t.target===this.get("curtain"))return;this.set("dismissing",!0),t.halt(),this.fire("dismiss",n),this.hide(),e.namespace("Views").dialog.util.log("DISMISS")}},{ATTRS:{template:{value:"dialog"},anchorTo:{value:null},offsetLeft:{value:0},appendTo:{value:null},appendCurtainTo:{value:null},hideOnCurtainClick:{value:!0},tintCurtain:{value:0},rootEl:{value:e.Node&&e.one(s&&s.body)},content:{value:null},attrs:{value:{}},stack:{value:!1},hideOnButtonClick:{value:!0},visibleShim:{value:!0},positioning:{value:!0},arrow:{value:!1},dropUp:{value:!1},constraints:{value:{}},dialogClass:{value:""},autoCloseable:{value:!0}}}),r["dialog-tooltip"]=e.Base.create("dialog-tooltip",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager&&this.manager.close&&this.manager.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-tooltip"},offsetLeft:{value:0},visibleShim:{value:!1}}}),r["dialog-modal"]=e.Base.create("dialog-modal",r["dialog-base"],[],{anchorToLayout:function(){this.set("anchorTo",null),r["dialog-base"].prototype.anchorToLayout.apply(this,arguments)},show:function(e,t){var n=t||{},i=n.hideOthers||!1;i?this.get("stack")||this.manager.hide(this):this.get("stack")||this.manager.close(this),r["dialog-base"].prototype.show.call(this,e),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-modal"}}}),r["dialog-alert"]=e.Base.create("dialog-alert",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-alert"},offsetLeft:{value:0},visibleShim:{value:!1}}}),r["dialog-cta"]=e.Base.create("dialog-cta",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager
.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()},hide:function(){this.get("curtain")&&(this.get("curtain").remove(),this.set("curtain",null)),r["dialog-base"].prototype.hide.apply(this,arguments)}},{ATTRS:{template:{value:"dialog-cta"},offsetLeft:{value:0},visibleShim:{value:!1}}}),r["dialog-progress"]=e.Base.create("dialog-progress",r["dialog-base"],[],{},{ATTRS:{template:{value:"dialog-progress"}}}),e.Handlebars.registerHelper("dialogOutlet",function(n){var r=['<div class="'+t.css.content+'">'];return n instanceof e.FlickrView||n instanceof e.Node?r.push("<!--"+(n.name||"DOM-node")+"-->"):r.push((n||"")+""),r.push("</div>"),new e.Handlebars.SafeString(r.join(""))})},"@VERSION@",{requires:["flickr-view","handlebars-base","flutil","hermes-template-dialog-tooltip","hermes-template-dialog-modal","hermes-template-dialog-alert","hermes-template-dialog-cta","flickrui-css"]});
YUI.add("hermes-template-fluid-modal",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" html-modal"}function h(e,t){return" subview-modal"}function p(e,t){return'<div class="close-x"></div>'}function d(e,t){var r="",i;r+='\n		<div class="head">\n			',i=n["if"].call(e,e.navBarView,{hash:{},inverse:l.program(10,m,t),fn:l.program(8,v,t),data:t});if(i||i===0)r+=i;return r+='\n			<div class="extra"></div>\n		</div>\n	',r}function v(e,t){return'\n				<div class="nav"></div>\n			'}function m(e,t){var r="",i;r+='\n				<div class="title">\n					',i=n["if"].call(e,e.title,{hash:{},inverse:l.program(13,y,t),fn:l.program(11,g,t),data:t});if(i||i===0)r+=i;return r+="\n				</div>\n			",r}function g(e,t){var r="",i;return r+="\n						",(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n					",r}function y(e,t){var r="",i,s;return r+="\n						",s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlTitle,s):f.call(e,"renderTrustedMarkup",e.htmlTitle,s)))+"\n					",r}function b(e,t){return" lines"}function w(e,t){var r="",i;r+='\n			<div class="content text-only ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='">\n				',(i=n.textMessage)?i=i.call(e,{hash:{},data:t}):(i=e.textMessage,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n			</div>\n		",r}function E(e,t){return" no-scroll"}function S(e,t){return" has-footer"}function x(e,t){var r="",i,s;r+='\n			<div class="content html-only ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='">\n				',s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlMessage,s):f.call(e,"renderTrustedMarkup",e.htmlMessage,s)))+"\n			</div>\n		",r}function T(e,t){var r="",i;r+='\n			<div class="content subview ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='"></div>\n		',r}function N(e,t){var r="",i,s;r+='\n		<div class="foot">\n			',s=n["if"].call(e,(i=e.buttons,i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(27,C,t),data:t});if(s||s===0)r+=s;return r+="\n		</div>\n	",r}function C(e,t){var r="",i,s;r+='\n			<div class="buttons">\n				',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(28,k,t),data:t});if(s||s===0)r+=s;r+="\n				",s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.cancel),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(33,O,t),data:t});if(s||s===0)r+=s;r+="\n				",s=n["if"].call(e,(i=e.buttons,i==null||i===!1?i:i.flavorText),{hash:{},inverse:l.noop,fn:l.program(35,M,t),data:t});if(s||s===0)r+=s;return r+="\n			</div>\n			",r}function k(e,t){var r="",i,s;r+='<button class="mini ',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.isDangerous),{hash:{},inverse:l.noop,fn:l.program(29,L,t),data:t});if(s||s===0)r+=s;r+=' action"',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.disabled),{hash:{},inverse:l.noop,fn:l.program(31,A,t),data:t});if(s||s===0)r+=s;return r+=">"+a((i=(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.label),typeof i===u?i.apply(e):i))+"</button>",r}function L(e,t){return"danger"}function A(e,t){return' disabled="disabled"'}function O(e,t){var n="",r;return n+='<button class="mini alt cancel">'+a((r=(r=(r=e.buttons,r==null||r===!1?r:r.cancel),r==null||r===!1?r:r.label),typeof r===u?r.apply(e):r))+"</button>",n}function M(e,t){var r="",i,s,o;r+='\n				<div class="flavor-text secondary',s=n.unless.call(e,(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(36,_,t),data:t});if(s||s===0)r+=s;return r+='">',o={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.text),o):f.call(e,"renderTrustedMarkup",(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.text),o)))+"</div>\n				",r}function _(e,t){return" hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;s+='<div class="modal',o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.subview,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=" ",(o=n.classList)?o=o.call(t,{hash:{},data:i}):(o=t.classList,o=typeof o===u?o.apply(t):o),s+=a(o)+'">\n	',o=n["if"].call(t,t.showCancelX,{hash:{},inverse:l.noop,fn:l.program(5,p,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,t.showHeader,{hash:{},inverse:l.noop,fn:l.program(7,d,i),data:i});if(o||o===0)s+=o;s+='\n	<div class="body',o=n["if"].call(t,t.showBodyLines,{hash:{},inverse:l.noop,fn:l.program(15,b,i),data:i});if(o||o===0)s+=o;s+='">\n		',o=n["if"].call(t,t.textMessage,{hash:{},inverse:l.noop,fn:l.program(17,w,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:l.noop,fn:l.program(22,x,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.subview,{hash:{},inverse:l.noop,fn:l.program(24,T,i),data:i});if(o||o===0)s+=o;s+="\n	</div>\n	",o=n["if"].call(t,t.showFooter,{hash:{},inverse:l.noop,fn:l.program(26,N,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials
):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-overlay-manager-view",function(e){"use strict";var t=0,n=e.Base.create("overlayManager",e.Base,[],{add:function(n){var r=this.get("overlay"),i=n.getAttrs(),s=this;this.get("modals").push(n),r?i.dismissOnOverlayClick&&this.set("dismissOnOverlayClick",!0):(r=e.Node.create(this.get("overlayHTML")),e.one("body").append(r),this.set("overlay",r),t++,this.addOverlayClickHandler(r),this.addOverlayKeyHandler(r),i.dismissOnOverlayClick?this.set("dismissOnOverlayClick",!0):this.set("dismissOnOverlayClick",!1)),this.setOverlayStyle(i),i.dismissOnActionClick&&n.on("actionClick",function(){setTimeout(function(){s.close()},0)}),n.name==="fluid-modal-view"&&n.on("cancelClick",function(){setTimeout(function(){s.close()},0)})},setOverlayStyle:function(e){var t="",n="",r="",i=this.get("overlay");e.hideModalOverlay&&(t="transparent"),e.darkOverlay&&(t="dark-overlay"),e.invisibleOverlay&&(n="invisible"),e.overlayClassList&&(r=e.overlayClassList),i.setAttribute("class",this.get("overlayClass")+" "+r+" "+t+" "+n)},addOverlayClickHandler:function(e){e.getDOMNode().addEventListener("click",this.clickHandler.bind(this))},removeOverlayClickHandler:function(e){e.getDOMNode().removeEventListener("click",this.clickHandler.bind(this))},addOverlayKeyHandler:function(t){e.one("body").getDOMNode().addEventListener("keyup",this.keyHandler.bind(this))},removeOverlayKeyHandler:function(t){e.one("body").getDOMNode().removeEventListener("keyup",this.keyHandler.bind(this))},keyHandler:function(e){e.keyCode===27&&this.clickHandler()},clickHandler:function(){var e=this.get("modals").length-2,t="",n="",r="",i,s=this.get("overlay");this.get("dismissOnOverlayClick")&&(this.set("dismissOnOverlayClick",!1),this.close(),e>-1&&this.get("modals").length>0&&(i=this.get("modals")[e].getAttrs(),i.hideModalOverlay&&(t="transparent"),i.invisibleOverlay&&(n="invisible"),i.overlayClassList&&(r=i.overlayClassList),s.setAttribute("class",this.get("overlayClass")+" "+r+" "+t+" "+n),this.set("dismissOnOverlayClick",i.dismissOnOverlayClick)))},remove:function(e){var t=this.get("modals");if(e.isClosed){var n=t.indexOf(e);n>-1?t.splice(n,1):t.length===1&&(n=0,t.splice(n,1)),this.removeOverlay()}},close:function(){var e=this.get("modals").pop();e&&!e.isClosed&&e.close(),this.removeOverlay()},closeAll:function(){var e=this;this.get("modals").forEach(function(t,n){e.close()})},removeOverlay:function(){var e=this.get("overlay");if(this.get("modals").length===0&&e)this.removeOverlayClickHandler(e),this.removeOverlayKeyHandler(e),e.remove(),this.set("overlay",undefined),t--;else{var n=this.get("modals").length-1;n>-1&&this.setOverlayStyle(this.get("modals")[n].getAttrs())}},alreadyShowingModal:function(e){var t=!1;return e||(e="fluid-modal-view"),this.get("modals").forEach(function(n,r){n.name===e&&(t=!0)}),t}},{ATTRS:{modals:{value:[],validator:function(t){return e.Lang.isArray(t)}},overlayHTML:{},overlayClass:{},overlay:{value:undefined},dismissOnOverlayClick:{value:!0,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},validator:function(t){return e.Lang.isBoolean(t)}}}});e.OverlayManager={DroparoundOverlay:new n({overlayHTML:'<div class="fluid-droparound-overlay"></div>',overlayClass:"fluid-droparound-overlay"}),ModalOverlay:new n({overlayHTML:'<div class="fluid-modal-overlay"><div class="balls"></div></div>',overlayClass:"fluid-modal-overlay"}),SignupInterstitialOverlay:new n({overlayHTML:'<div class="signup-interstitial-overlay interstitial-fade"></div>',overlayClass:"signup-interstitial-overlay interstitial-fade"}),ChalkboardOverlay:new n({overlayHTML:'<div class="fluid-chalkboard-overlay"></div>',overlayClass:"fluid-chalkboard-overlay"}),hasOverlay:function(){return t>0}}},"@VERSION@",{requires:["base","flickr-view","attribute-helpers","fluid-css","fluid-balls-css"],optional:[],langBundles:[],optionalRequires:["fluid"]});
YUI.add("fluid",function(e){"use strict";function n(){var n="",r=[];return!t.prefix&&"getComputedStyle"in e.config.win&&(r=Array.prototype.slice.call(e.config.win.getComputedStyle(e.config.doc.documentElement,"")),n=r.join("").match(/-(webkit|moz|ms)-/),n=n&&n.length>1?n[1]:"",t.prefix.raw=n.toLowerCase(),t.prefix.css="-"+n+"-",t.prefix.js=n.charAt(0).toUpperCase()+n.slice(1),t.prefix.dom="WebKit|Moz|MS".match(new RegExp("("+n+")","i"))[1]),t.prefix}function r(t,n){return n=n||e.config.win,new e.Promise(function(r,i){setTimeout(e.bind(function(){r(t.call(n))},n),1)})}function i(e,n,r){return t.prefix.css!==""?r.getDOMNode().style.setProperty(t.prefix.css+e,n,null):r.setStyle(e,n),r}function s(n){var r=!1;return n+="",r=n in e.config.doc.body.style,r||(n=n.charAt(0).toUpperCase()+n.slice(1),r=t.prefix.raw+n in e.config.doc.body.style),r}function o(n,r){return r=r||{timeout:1e4,retry:!1},r.timeout=parseInt(r.timeout,10),isNaN(r.timeout)&&(r.timeout=1e4),new e.Promise(function(e,i){t.loadImage.imageQueue.push({src:n,options:r,done:e,error:i}),u()})}function u(){var e=null;t.loadImage.currentWorkers<t.loadImage.maxWorkers-1&&t.loadImage.imageQueue.length&&(t.loadImage.currentWorkers++,e={image:new Image,work:t.loadImage.imageQueue.shift(),timeout:null,loaded:null,finished:null},e.finished=function(e){return function(n){clearTimeout(e.timeout),e.image.removeEventListener("load",e.finished),e.image.removeEventListener("error",e.finished),e.image.removeEventListener("abort",e.finished),n.type==="load"?e.work.done(e.work.src):e.work.options.retry?o(e.work.src,{retry:!1,timeout:e.work.options.timeout}).then(function(e){return function(t){e(t)}}(e.work.done),function(e){return function(t){e(t)}}(e.work.done)):e.work.error(e.work.src),e.image=null,e=null,t.loadImage.currentWorkers--,u()}}(e),e.image.addEventListener("load",e.finished),e.image.addEventListener("error",e.finished),e.image.addEventListener("abort",e.finished),e.image.src=e.work.src,e.timeout=setTimeout(function(e){return function(){e.finished({type:"error"})}}(e),e.work.options.timeout),e.image.complete&&e.finished({type:"load"}))}function a(n){return n="https:"+n,new e.Promise(function(e,r){t.loadImageFastLane.imageHash[n]={done:e,error:r},t.loadImageFastLane.imageQueue.push(n),f()})}function f(){var e,n;t.loadImageFastLane.currentWorkers<t.loadImageFastLane.maxWorkers&&t.loadImageFastLane.imageQueue.length&&(e=t.loadImageFastLane.imageQueue.shift(),n=l(),n.onmessage=function(e){var n=e.data;t.loadImageFastLane.imageHash[n].done(n),t.loadImageFastLane.currentWorkers--,f()}.bind(this),n.postMessage(e),t.loadImageFastLane.currentWorkers++)}function l(){var e=window.URL||window.webkitURL,t;return t=e.createObjectURL(new Blob(["(",function(){self.onmessage=function(e){var t=new XMLHttpRequest,n=e.data;t.responseType="blob",t.onerror=function(){self.postMessage(n),self.close()},t.onload=function(){self.postMessage(n),self.close()},t.open("GET",n,!0),t.withCredentials=!0,t.send()}}.toString(),")()"],{type:"application/javascript"})),new Worker(t)}function c(t){var n;return t&&(n=e.config.doc.createElement("div"),n.appendChild(e.config.doc.createTextNode(t)),t=n.innerHTML),t}function h(t){var n,r;return e.config.doc.selection?(r=e.config.doc.selection.createRange(),r.moveStart=("character",-t.get("value").length),n=r.text.length):typeof t.get("selectionStart")=="number"&&(n=t.get("selectionStart")),n}function p(){var t="";return typeof e.config.win.getSelection!="undefined"?t=e.config.win.getSelection().toString():typeof e.config.doc.selection!="undefined"&&e.config.doc.selection.type==="Text"&&(t=e.config.doc.selection.createRange().text),t}function d(e){var t={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L"
,"\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u0152":"OE","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u1e9e":"SS","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d"
:"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u0153":"oe","\u0276":"oe","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u017f":"s","\u1e9b":"s","\u00df":"ss","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\uff10":"0","\u2080":"0","\u24ea":"0","\u2070":"0","\u00b9":"1","\u2474":"1","\u2081":"1","\u2776":"1","\u24f5":"1","\u2488":"1","\u2460":"1","\uff11":"1","\u00b2":"2","\u2777":"2","\u2475":"2","\uff12":"2","\u2082":"2","\u24f6":"2","\u2461":"2","\u2489":"2","\u00b3":"3","\uff13":"3","\u248a":"3","\u2476":"3","\u2083":"3","\u2778":"3","\u24f7":"3","\u2462":"3","\u24f8":"4","\u2463":"4","\u248b":"4","\uff14":"4","\u2074":"4","\u2084":"4","\u2779":"4","\u2477":"4","\u248c":"5","\u2085":"5","\u24f9":"5","\u2478":"5","\u277a":"5","\u2464":"5","\uff15":"5","\u2075":"5","\u2479":"6","\u2076":"6","\uff16":"6","\u277b":"6","\u2086":"6","\u2465":"6","\u24fa":"6","\u248d":"6","\uff17":"7","\u2077":"7","\u277c":"7","\u24fb":"7","\u248e":"7","\u2087":"7","\u247a":"7","\u2466":"7","\u2467":"8","\u248f":"8","\u24fc":"8","\u247b":"8","\u2078":"8","\uff18":"8","\u277d":"8","\u2088":"8","\u24fd":"9","\uff19":"9","\u2490":"9","\u277e":"9","\u247c":"9","\u2089":"9","\u2468":"9","\u2079":"9"},n=e.split(""),r=!1,i,s;for(i=n.length-1;i>=0;i--)s=n[i],t.hasOwnProperty(s)&&(n[i]=t[s],r=!0);return r&&(e=n.join("")),e}var t={prefix:{raw:"",css:"",js:"",dom:""},loadImage:{maxWorkers:8,currentWorkers:0,imageQueue:[],workingWorkers:[]},loadImageFastLane:{maxWorkers:8,currentWorkers:0,imageHash:{},imageQueue:[],availabeWorkers:[],workingWorkers:[]}};(function(){n()})(),e.namespace("fluid"),e.mix(e.fluid,{determineBrowserPrefix:n,setStylePrefixed:i,supports:s,prefix:t.prefix,chill:r,loadImage:o,loadImageFastLane:a,escapeHtml:c,getTextFieldCursorPosition:h,getTextFieldSelection:p,removeDiacritics:d})},"@VERSION@",{requires:["flickr-promise"],optional:[],affinity:"client"});
YUI.add("fluid-modal-view",function(e,t){"use strict";var n,r;n={css:{destinationContainer:"body",closeX:".close-x",buttonCancel:"button.cancel",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content"},options:{}},r={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").FluidModal=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.set("isActiveViewAgnostic",!0);var t=this.get("modalOverlayType");return this.alreadyShowingModal=t.alreadyShowingModal(),this.alreadyShowingModal||t.add(this),this},activate:function(){var t=this.get("container"),r=this;return this.get("showCancelX")&&this.registerEventHandler(t.one(n.css.closeX).on("click",e.bind(this.handleCancel,this))),this.get("showFooter")&&this.get("showCancelButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(n.css.buttonCancel).on("click",e.bind(this.handleCancel,this))),this.get("showFooter")&&this.get("showActionButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(n.css.buttonAction).on("click",e.bind(this.handleAction,this))),this.registerEventHandler(this.appContext.flapp.on("activeViewChange",function(e){r.close(e)})),this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){r.reposition()})),this.get("navBarView")&&r.get("navBarView").activate(),this.get("subview")&&(r.get("subview").activate(),r.registerEventHandler(r.get("subview").on("actionClick",e.bind(r.handleAction,r)))),this.fire("activated"),this},show:function(){return this.initialize().then(null,function(t){e.Flog.error("[fluid-modal-view] Error initializing modal: ",t)}),this.isClosed=!1,this.freeze(),e.fire("flickr:setKeyEventScope",this.getKeyEventScope()),this},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})},enableActionButton:function(){var e=this.get("container").one("button.action");e&&e.getAttribute("disabled")&&e.removeAttribute("disabled")},disableActionButton:function(){var e=this.get("container").one("button.action");e&&e.setAttribute("disabled",!0)},showFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.removeClass("hidden")},hideFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.addClass("hidden")},buildContainer:function(){if(!this.alreadyShowingModal){var t=this,i=e.one(n.css.destinationContainer),s;s={showCancelX:this.get("showCancelX"),title:this.get("title"),htmlTitle:this.get("htmlTitle"),navBarView:!!this.get("navBarView"),noScroll:this.get("noScroll"),textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),showBodyLines:this.get("showBodyLines"),hideModalOverlay:this.get("hideModalOverlay"),darkOverlay:this.get("darkOverlay"),showHeader:this.get("showHeader"),showFooter:this.get("showFooter"),buttons:{visible:this.get("showButtons"),action:{visible:this.get("showActionButton"),label:this.get("actionButtonLabel"),disabled:this.get("actionButtonDisabled"),isDangerous:this.get("actionButtonIsDangerous")},cancel:{visible:this.get("showCancelButton"),label:this.get("cancelButtonLabel")}},classList:this.get("classList")},this.get("buttonFlavorText")&&(s.buttons.flavorText={visible:this.get("showButtonFlavorText"),text:this.get("buttonFlavorText")}),this.setContainerHTML(this.templates("fluid-modal")(s)),r.modal.width=this.get("width"),r.modal.minWidth=this.get("minWidth"),r.modal.height=this.get("height"),this.get("navBarView")&&(this.get("navBarView").appContext=t.appContext,this.get("navBarView").initialize().then(function(e){e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("subview")&&e.details[0]==="navigation"?t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)):t.get("subview")&&e.details[0]==="search"&&t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(n.css.navBarContent).appendChild(e.get("container")),t.get("subview")||t.activate()})),this.get("subview")?(this.get("subview").appContext=t.appContext,this.get("subview").set("isActiveViewAgnostic",!0),this.get("subview").initialize().then(function(e){t.on("parentViewEvent",function(t){t&&t.details&&t.details.length&&e.fire.apply(e,["parentViewEvent"].concat(t.details))}),e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("navBarView")&&e.details[0]==="backToList"&&t.get("navBarView").fire.apply(t.get("navBarView"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(n.css.subviewContent).appendChild(e.get("container")),i&&(i.append(t.get("container")),t.reposition()),t.activate()},function(t){e.Flog.error("[fluid-modal-view] Error initializing modal subview: ",t)})):i&&(i.append(this.get("container")),this.reposition())}return this},reposition:function(){var t=this.get("container"),i=t.one(this.get("modalSelector")),s=e.one(e.config.win),o=parseInt(s.get("innerWidth"),10),u=parseInt(s.get("innerHeight"),10),a=r.modal.width?parseInt(r.modal.width,10):parseInt(i.getComputedStyle("width"),10),f,l=20,c={},h,p,d=i.one(".body"),v=0,m=this.get("showFooter")?parseInt(i.one(".foot").getComputedStyle("height"),10):0,g=0,y=parseInt(d.getComputedStyle("borderTopWidth"),10)+parseInt(d.getComputedStyle("borderBottomWidth"),10),b={};r.modal.height&&(v=parseInt(i.one(".head").getComputedStyle("height"),10),g=r.modal.height,i.get("showFooter")&&(m=parseInt(i.one(".foot").getComputedStyle("height"),10)),r.modal.height+v+m+4*l+y>=u&&(u<=700?g=u-v-m-y:g=u-v-m-4*l-y),i.setStyles({maxHeight:"none"}),this.get("fullWindow")?b.height=g+"px":this.get("maxHeight")&&(b.maxHeight=g+"px"),i.one(n.css.modalContent).setStyles(b)),f=parseInt(i.getComputedStyle("height"),10),h=i.getDOMNode().scrollHeight,p=i.getDOMNode
().scrollWidth,c={top:"50%",left:"50%",width:r.modal.width?a+"px":"",marginTop:-(f/2)+"px",marginLeft:-(a/2)+"px",minWidth:r.modal.minWidth?r.modal.minWidth+"px":""},f+2*l>u||h>f+1||a+2*l>o||p>a?(u<=700&&r.modal.height?c.maxHeight=u-10+"px":(c.maxHeight=u-2*l+"px",c.overflow="auto"),c.maxWidth=o-2*l+"px",c.marginTop=-(parseInt(c.maxHeight,10)/2)+"px",c.marginLeft=-(parseInt(c.maxWidth,10)/2)+"px"):(c.maxHeight="inherit",c.maxWidth="inherit",c.overflow="visible"),i.setStyles(c)},handleCancel:function(n){var r=this.get("subview");e.rapidTracker.beacon(t,"modalCancelClick"),r&&r.handleCancel&&r.handleCancel(),this.fire("cancelClick",n),this.close(n)},handleAction:function(e){var t=this.get("subview");this.fire("actionClick",e),t&&t.handleAction&&t.handleAction(),this.get("dismissOnActionClick")&&this.close(e)},close:function(t){e.fire("flickr:removeKeyEventScope",this.getKeyEventScope());var n=this.get("container");this.isClosed=!0,e.one("body").removeClass("scroll-fluid-modal"),this.get("subview")&&this.get("subview").destroy(),this.get("navBarView")&&this.get("navBarView").destroy(),n&&n.remove(!0),this.fire("close",t),this.destroy(),this.get("modalOverlayType").remove(this)},getKeyEventScope:function(){return this.name+this._yuid},destructor:function(){this.unfreeze(),this.detachAll()}},{ATTRS:{showCancelX:{value:!0},showCancelButton:{value:!0},showBodyLines:{value:!1},showActionButton:{value:!0},hideModalOverlay:{value:!1},darkOverlay:{value:!1},actionButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.OK"})}},actionButtonIsDangerous:{value:!1},cancelButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.CANCEL"})}},actionButtonDisabled:{value:!1},showButtons:{value:!0},dismissOnOverlayClick:{value:!1},dismissOnActionClick:{value:!0},title:{value:""},htmlTitle:{value:""},navBarView:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},width:{value:0},minWidth:{value:0},height:{value:0},fullWindow:{value:!1},subview:{value:null},classList:{value:""},buttonFlavorText:{value:""},showButtonFlavorText:{value:!0},showHeader:{value:!0},showFooter:{value:!0},noScroll:{value:!1},maxHeight:{value:!0},modalSelector:{value:".modal"},modalOverlayType:{value:e.OverlayManager.ModalOverlay}}})},"@VERSION@",{requires:["flickr-view","fluid-css","hermes-template-fluid-modal","fluid-overlay-manager-view","flog"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("curation-photomappings-model",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-licensing-curation-photomappings"].run(t,this.appContext)}},attributes:{status:{},ownerStatus:{},category:{},collection:{},useType:{},technical:{},legal:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-licensing-curation-photomappings-fetcher"]});
YUI.add("flickr-licensing-curation-photomappings-fetcher",function(e,t){"use strict";function n(e){var t={};return t}function r(e,t){var n,r,i,s,o,u,a,f,l,c=e[0];r=c.status?c.status.item:null,i=c.ownerStatus?c.ownerStatus:null,s=c.category?c.category.item:null,o=c.collection?c.collection.item:null,a=c.technical?c.technical.item:null,f=c.legal?c.legal.item:null,u=c.useType?c.useType.item:null,n={id:t.id,status:r,ownerStatus:i,category:s,collection:o,useType:u,technical:a,legal:f},l=e[1],l.addOrUpdate(n)}function i(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.licensing.curation.getPhotoMappings",this._processParams(n)),r.getModelRegistry("curation-photomappings-model")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ListFetchers")["flickr-licensing-curation-photomappings"]={run:i,_processResponse:r,_processParams:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["curation-photomappings-model"]});
YUI.add("hermes-template-curator-tool-photo-metadata-form",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing;return s+='<div id="curator-photo-',(o=n.photoId)?o=o.call(t,{hash:{},data:i}):(o=t.photoId,o=typeof o===f?o.apply(t):o),s+=l(o)+'">\n	<div class="photo-preview">\n		<img src="',(o=n.imgUrl)?o=o.call(t,{hash:{},data:i}):(o=t.imgUrl,o=typeof o===f?o.apply(t):o),s+=l(o)+'" alt="" />\n	</div>\n	<div class="photo-metadata">\n		\n		<div class="category-collection">\n			<div class="category">\n				<label for="photo-category-',(o=n.photoId)?o=o.call(t,{hash:{},data:i}):(o=t.photoId,o=typeof o===f?o.apply(t):o),s+=l(o)+'">Category *</label>\n				<div class="field-wrapper">\n					<div class="selectbox">\n						<div class="select-fade"></div>\n						<div class="select-arrow"></div>\n						<select class="photo-category-select" id="photo-category-',(o=n.photoId)?o=o.call(t,{hash:{},data:i}):(o=t.photoId,o=typeof o===f?o.apply(t):o),s+=l(o)+'" name="photo-category-',(o=n.photoId)?o=o.call(t,{hash:{},data:i}):(o=t.photoId,o=typeof o===f?o.apply(t):o),s+=l(o)+"\" required><option value='0'>None</option>",a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,t.categoryOptions,a):c.call(t,"renderTrustedMarkup",t.categoryOptions,a)))+'</select>\n					</div>\n				</div>\n			</div>\n			<div class="collection">\n				<label for="photo-collection-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'">Collection</label>\n				<div class="field-wrapper">\n					<div class="selectbox">\n						<div class="select-fade"></div>\n						<div class="select-arrow"></div>\n						<select class="photo-collection-select" id="photo-collection-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'" name="photo-collection-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'">',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,t.collectionOptions,a):c.call(t,"renderTrustedMarkup",t.collectionOptions,a)))+'</select>\n					</div>\n				</div>\n			</div>\n		</div>\n		\n		<div class="use-type-releases">\n			\n			<div class="use-type">\n				<label for="photo-use-type-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'">Use Type *</label>\n				<div class="field-wrapper">\n					<div class="selectbox">\n						<div class="select-fade"></div>\n						<div class="select-arrow"></div>\n						<select class="photo-use-type-select" id="photo-use-type-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'" name="photo-use-type-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+"\" required><option value='0'>None</option>",a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,t.useTypeOptions,a):c.call(t,"renderTrustedMarkup",t.useTypeOptions,a)))+'</select>\n					</div>\n				</div>\n			</div>\n			<div class="model-releases">\n				<label for="photo-model-releases-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'">Model Releases</label>\n				<div class="field-wrapper">\n					<div class="selectbox">\n						<div class="select-fade"></div>\n						<div class="select-arrow"></div>\n						<select class="photo-model-releases-select" id="photo-model-releases-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'" name="photo-model-releases-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'">',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,t.modelReleasesOptions,a):c.call(t,"renderTrustedMarkup",t.modelReleasesOptions,a)))+'</select>\n					</div>\n				</div>\n			</div>\n			<div class="property-releases">\n				<label for="photo-property-releases-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'">Property Releases</label>\n				<div class="field-wrapper">\n					<div class="selectbox">\n						<div class="select-fade"></div>\n						<div class="select-arrow"></div>\n						<select class="photo-property-releases-select" id="photo-property-releases-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'" name="photo-property-releases-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'">',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,t.propertyReleasesOptions,a):c.call(t,"renderTrustedMarkup",t.propertyReleasesOptions,a)))+'</select>\n					</div>\n				</div>\n			</div>\n		</div>\n		\n		<div class="technical">\n			<label for="photo-technical-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'">Technical</label>\n			<div class="field-wrapper">\n				<div class="selectbox">\n					<div class="select-fade"></div>\n					<div class="select-arrow"></div>\n					<select class="photo-technical-select" id="photo-technical-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'" name="photo-technical-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'">',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,t.technicalOptions,a):c.call(t,"renderTrustedMarkup",t.technicalOptions,a)))+'</select>\n				</div>\n			</div>\n		</div>\n		\n		<div class="legal">\n			<label for="photo-legal-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'">Legal</label>\n			<div class="field-wrapper">\n				<div class="selectbox">\n					<div class="select-fade"></div>\n					<div class="select-arrow"></div>\n					<select class="photo-legal-select" id="photo-legal-'
,(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+'" name="photo-legal-',(u=n.photoId)?u=u.call(t,{hash:{},data:i}):(u=t.photoId,u=typeof u===f?u.apply(t):u),s+=l(u)+"\"><option value='0'>None</option>",a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,t.legalOptions,a):c.call(t,"renderTrustedMarkup",t.legalOptions,a)))+"</select>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/curator-tool-photo-metadata-form",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-curator-control-panel",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i;return r+="\n		<p>Photographer status: <strong>",(i=n.photographerStatus)?i=i.call(e,{hash:{},data:t}):(i=e.photographerStatus,i=typeof i===a?i.apply(e):i),r+=f(i)+'</strong></p>\n		<p>\n			<a href="/god/licensing/curation/editor_1/accounts/',(i=n.ownerId)?i=i.call(e,{hash:{},data:t}):(i=e.ownerId,i=typeof i===a?i.apply(e):i),r+=f(i)+'/">',(i=n.photographerStatusString)?i=i.call(e,{hash:{},data:t}):(i=e.photographerStatusString,i=typeof i===a?i.apply(e):i),r+=f(i)+"</a>\n		</p>\n	",r}function h(e,t){var r="",i,s;r+="\n		",i=n["if"].call(e,e.ownerLocked,{hash:{},inverse:l.program(6,d,t),fn:l.program(4,p,t),data:t});if(i||i===0)r+=i;r+='\n\n		<div id="curator-photo-status">\n		        <p>\n		                Photo status:\n		                <strong>\n		                    '+f((i=(i=e.children,i==null||i===!1?i:i.photoStatus),typeof i===a?i.apply(e):i))+'\n		                </strong>\n		        </p>\n		</div>\n\n		<div id="photographer-claimed-by">\n			 <p>Claimed by: '+f((i=(i=e.children,i==null||i===!1?i:i.photographerClaimedBy),typeof i===a?i.apply(e):i))+"</p>\n		</div>\n\n		",s=n["if"].call(e,(i=e.children,i==null||i===!1?i:i.ownerClaimedByMe),{hash:{},inverse:l.noop,fn:l.program(11,g,t),data:t});if(s||s===0)r+=s;return r+="\n	",r}function p(e,t){return"\n			<p>\n				LOCKED\n			</p>\n		"}function d(e,t){var r="",i;r+="\n			",i=n["if"].call(e,e.addPhotoButton,{hash:{},inverse:l.program(9,m,t),fn:l.program(7,v,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function v(e,t){return'\n				<button id="curator-photo-submit">\n					Add this photo\n				</button>\n			'}function m(e,t){var r="",i;return r+='\n				<p>\n					<a href="',(i=n.updateUrl)?i=i.call(e,{hash:{},data:t}):(i=e.updateUrl,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.updateString)?i=i.call(e,{hash:{},data:t}):(i=e.updateString,i=typeof i===a?i.apply(e):i),r+=f(i)+"</a>\n				</p>\n			",r}function g(e,t){var n="",r;return n+='\n			<div id="curator-photo-count">\n			        <p>\n			                Photo count: <strong>'+f((r=(r=e.children,r==null||r===!1?r:r.photosCount),typeof r===a?r.apply(e):r))+"</strong>\n			        </p>\n			</div>\n		",n}function y(e,t){return'\n	    <!--<img src="https://s.yimg.com/g/images/3mp.gif" alt=""/> -->\n	    <div id="photo-is-three-mp"></div>\n	'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<div id="curator-control-panel">\n	',o=n.unless.call(t,t.ownerEnrolled,{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n\n	",u=n["if"].call(t,(o=t.children,o==null||o===!1?o:o.is3Megapixels),{hash:{},inverse:l.noop,fn:l.program(13,y,i),data:i});if(u||u===0)s+=u;return s+="\n	\n</div>\n \n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/curator-control-panel",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("curator-photo-tools-view",function(e){e.namespace("Views")[this.name]=e.Base.create("curator-photo-tools-view",e.FlickrView,[],{initializer:function(e){return this.nsid=e.nsid,this.photoId=e.photoId,this.isModalOpen=!1,this.modal=null,this.photoStatusId=null,this.photoStatusMap=null,this.photoCount=0,this},subviewConfig:{},loadState:function(){var t=this,n;return n={curationPhotomappingsModel:this.appContext.getModel("curation-photomappings-model",this.nsid),photoModel:this.appContext.getModel("photo-models",this.photoId),nsid:this.nsid,photoStatus:this.getPhotoStatus()},(new e.FlickrPromise(n)).then(function(n){var r,i;t.curationPhotomappingsModel=n.curationPhotomappingsModel,t.photoStatusMap=t.curationPhotomappingsModel.getValue("status"),t.photographerStatusMap=t.curationPhotomappingsModel.getValue("owner_status"),t.photoModel=n.photoModel,t.photoStatusId=n.photoStatusId,t.photoStatusId=parseInt(n.photoStatus.status,10),t.is3Megapixels=n.photoStatus.is3Megapixels?!!n.photoStatus.is3Megapixels:!1,t.ownerAddedForCuration=n.photoStatus.ownerAddedForCuration?!!n.photoStatus.ownerAddedForCuration:!1,t.ownerEnrolled=n.photoStatus.ownerEnrolled?!!n.photoStatus.ownerEnrolled:!1,t.ownerLocked=n.photoStatus.ownerLocked?!!n.photoStatus.ownerLocked:!1,t.ownerClaimedByMe=n.photoStatus.ownerClaimedByMe?!!n.photoStatus.ownerClaimedByMe:!1,t.photoAddedForCuration=n.photoStatus.photoAddedForCuration?!!n.photoStatus.photoAddedForCuration:!1,t.ownerId=n.photoStatus.ownerId?n.photoStatus.ownerId:0,t.ownerStatusId=n.photoStatus.ownerStatus?n.photoStatus.ownerStatus:"None",t.photographerClaimedBy=n.photoStatus.ownerClaimedByByid?n.photoStatus.ownerClaimedByByid:"Who Knows?!",t.photographerStatus=n.photoStatus.ownerStatus?n.photoStatus.ownerStatus:"None",r=e.StorageHelper.getItem("curationPhotoCount_"+n.nsid),n.photoStatus.photosCount?(t.photosCount=n.photoStatus.photosCount,t.addPhotoCount(t.photosCount)):r?t.photosCount=r:t.photosCount=0,i=e.one("#curator-control-panel"),i&&i.remove(!0)},function(e){console.log("Error getting photomapping model or photo model",e)})},getPhotoStatus:function(){var e={photo_id:this.photoId,fetch_photos_count:this.getCountStatus()};return this.appContext.callAPI("flickr.licensing.curation.getPhotoStatus",e).then(function(e){return e.photos.photo.curation[0]},function(){console.error("Error calling API method: flickr.licensing.curation.getPhotoStatus",arguments)})},getCountStatus:function(){var t,n,r,i,s,o=!1,u=900;return i=Math.round((new Date).getTime()/1e3),n="curationPhotoCount_"+this.nsid,s="curationPhotoCountUpdateTime_"+this.nsid,r=e.StorageHelper.getItem(n),r||(o=!0),o||(t=parseInt(e.StorageHelper.getItem(s)),o=i-t>u),o},addPhotoCount:function(t){var n,r,i;return n="curationPhotoCount_"+this.nsid,r="curationPhotoCountUpdateTime_"+this.nsid,i=Math.round((new Date).getTime()/1e3),e.StorageHelper.setItem(r,i),e.StorageHelper.setItem(n,t),!0},buildContainer:function(){return this},activate:function(){var e,t=this;return e=this.appContext.getViewer().prefs.keyboardShortcutsEnabled,this.setupCuratorTools(),e&&this.registerEventHandler(this.attachKeyEvent("down:87",function(e){e.preventDefault(),t.handleAddPhotoClick(e)})),this},destructor:function(){e.one("#curator-control-panel")&&e.one("#curator-control-panel").remove(!0)},setupCuratorTools:function(){if(this.get("destroyed"))return;var t,n=this;e.Array.find(this.photoStatusMap,function(e){if(e.id===n.photoStatusId)return t=e.name,!0}),e.one("#content").appendChild(e.Node.create(this.templates("curator-control-panel")({ownerAddedForCuration:this.ownerAddedForCuration,photographerStatus:this.ownerAddedForCuration?this.photographerStatus:"none",photographerStatusString:this.ownerAddedForCuration?"Update this photographer":"Add this photographer",ownerId:this.ownerId,ownerEnrolled:this.ownerEnrolled,ownerLocked:this.ownerLocked,addPhotoButton:!this.photoAddedForCuration&&this.ownerClaimedByMe,photoClaimedByMe:this.ownerClaimedByMe&&this.photoAddedForCuration,updateUrl:this.ownerClaimedByMe&&this.photoAddedForCuration?"/god/licensing/curation/editor_2/accounts/"+this.ownerId+"/photos/":"/god/licensing/curation/editor_2/accounts/"+this.ownerId,updateString:this.ownerClaimedByMe&&this.photoAddedForCuration?"Update this photographer's photos":"Update this photographer",children:{ownerClaimedByMe:this.ownerClaimedByMe,photoAddedForCuration:this.photoAddedForCuration,photoStatus:this.photoAddedForCuration?t:"none",photosCount:this.photosCount,photographerClaimedBy:this.ownerClaimedByMe?"YOU!":this.photographerClaimedBy,is3Megapixels:this.is3Megapixels}}))),this.registerEventHandler(e.one("#curator-photo-submit").on("click",this.handleAddPhotoClick,this))},updateStatus:function(){var t,n=this;t={photo_id:this.photoId,fetch_photos_count:this.getCountStatus()},this.appContext.callAPI("flickr.licensing.curation.getPhotoStatus",t).then(function(t){var r,i,s=t.photos.photo.curation[0];n.photoStatusId=parseInt(s.status,10),n.is3Megapixels=s.is3Megapixels?!!s.is3Megapixels:!1,n.ownerAddedForCuration=s.ownerAddedForCuration?!!s.ownerAddedForCuration:!1,n.ownerEnrolled=s.ownerEnrolled?!!s.ownerEnrolled:!1,n.ownerLocked=s.ownerLocked?!!s.ownerLocked:!1,n.ownerClaimedByMe=s.ownerClaimedByMe?!!s.ownerClaimedByMe:!1,n.photoAddedForCuration=s.photoAddedForCuration?!!s.photoAddedForCuration:!1,n.ownerId=s.ownerId?s.ownerId:0,n.ownerStatusId=s.ownerStatus?s.ownerStatus:"None",n.photographerClaimedBy=s.ownerClaimedByByid?s.ownerClaimedByByid:"Who Knows?!",n.photographerStatus=s.ownerStatus?s.ownerStatus:"None",n.photosCount=s.photosCount?s.photosCount:0,r=e.StorageHelper.getItem("curationPhotoCount_"+n.nsid),s.photosCount?n.photosCount=s.photosCount:r?n.photosCount=parseInt(r,10)+1:n.photosCount=1,n.addPhotoCount(n.photosCount),i=e.one("#curator-control-panel"),i&&i.remove(!0),n.setupCuratorTools()})},handleAddPhotoClick:function(t){t.preventDefault();var n="",r=this;if(this.isModalOpen&&this.modal){this.modal.close(),this.isModalOpen=!1,this
.modal=null;return}n='<form id="curator-photo-selection-form">',n+=this.buildPhotoCurationForm(this.photoId,this.getImageUrl(this.photoModel)),n+="</form>",this.modal=(new e.Views.FluidModal({appContext:r.appContext,title:"Submit this photo",htmlMessage:n,width:840,height:600,dismissOnActionClick:!1})).show(),this.registerEventHandler(this.modal.on("activated",function(t){this.isModalOpen=!0,e.one("#curator-photo-selection-form .photo-category-select").focus()},this)),this.registerEventHandler(this.modal.on("actionClick",this.handlePhotoSubmission,this)),this.registerEventHandler(this.modal.on("cancelClick",function(e){this.isModalOpen=!1,this.modal=null},this))},buildPhotoCurationForm:function(e,t){var n;return this.photoFormState=this.getPhotoMetadata("curator-photo-form-state"),n=this.templates("curator-tool-photo-metadata-form")({categoryOptions:this.buildOptions("category"),collectionOptions:this.buildOptions("collection"),modelReleasesOptions:this.buildOptions("model-releases"),propertyReleasesOptions:this.buildOptions("property-releases"),technicalOptions:this.buildOptions("technical"),legalOptions:this.buildOptions("legal"),useTypeOptions:this.buildOptions("useType"),photoId:e,imgUrl:t}),n},buildOptions:function(t){var n="",r,i,s,o=this;if(this.photoFormState)try{s=e.JSON.parse(this.photoFormState)}catch(u){console.error("Error parsing JSON from local storage",u)}if(t==="model-releases"||t==="property-releases")for(r=0;r<=20;r++)n+='<option value="'+r+'">'+r+"</option>";else i=this.curationPhotomappingsModel.getValue(t),t==="technical"&&i.unshift({id:0,name:"None"}),e.Array.each(i,function(e){if(t==="technical")if(o.is3Megapixels)switch(parseInt(e.id,10)){case 4:case 5:case 6:case 7:case 9:return}else switch(parseInt(e.id,10)){case 0:case 1:case 2:case 3:case 9:return}if(t==="collection"&&e.name==="Flickr Prime (RM)")return;t==="category"||t==="collection"?s&&s[t]&&parseInt(s[t],10)===e.id?n+='<option value="'+e.id+'" selected>'+e.name+"</option>":n+='<option value="'+e.id+'">'+e.name+"</option>":n+='<option value="'+e.id+'">'+e.name+"</option>"});return n},getImageUrl:function(e){var t=e.getValue("ascendingSizes"),n=Math.min(5,t.length-1);return t[n].url},handlePhotoSubmission:function(t){var n,r,i=this.photoId,s,o=this;n={photos:{photo:[]}},r=e.one("#curator-photo-selection-form");if(!r)return;r.one(".photo-use-type-select").removeClass("error"),r.one(".photo-category-select").removeClass("error"),(r.one(".photo-category-select").get("value")===""||r.one(".photo-category-select").get("value")==="0")&&r.one(".photo-category-select").addClass("error"),(r.one(".photo-use-type-select").get("value")===""||r.one(".photo-use-type-select").get("value")==="0")&&r.one(".photo-use-type-select").addClass("error");if(r.one(".photo-category-select").get("value")===""||r.one(".photo-category-select").get("value")==="0"||r.one(".photo-use-type-select").get("value")===""||r.one(".photo-use-type-select").get("value")==="0")return!1;n.photos.photo.push({id:i,category:r.one(".photo-category-select").get("value"),collection:r.one(".photo-collection-select").get("value"),model_releases:r.one(".photo-model-releases-select").get("value"),property_releases:r.one(".photo-property-releases-select").get("value"),technical_review:r.one(".photo-technical-select").get("value"),legal_review:r.one(".photo-legal-select").get("value"),use_type:r.one(".photo-use-type-select").get("value")}),s={category:r.one(".photo-category-select").get("value"),collection:r.one(".photo-collection-select").get("value")},window&&window.localStorage&&window.localStorage.clear&&e.Object.some(window.localStorage,function(e,t){return t.indexOf("curator-photo-metadata")>-1?(window.localStorage.clear(),!0):!1}),this.savePhotoMetadata("curator-photo-form-state",e.JSON.stringify(s)),n.photos.photo.length>0&&this.appContext.callAPI("flickr.licensing.curation.addPhotos",{json:e.JSON.stringify(n)}).then(function(){o.isModalOpen=!1,o.modal.close(),o.updateStatus(),o.modal=null},function(){o.isModalOpen=!1,o.modal.close(),o.modal=null,console.error("flickr.licensing.curation.addPhotos error",arguments)})},savePhotoMetadata:function(t,n){try{return e.StorageHelper.setItem(t,n),!0}catch(r){return!1}},getPhotoMetadata:function(t){try{return e.StorageHelper.getItem(t)}catch(n){return!1}}},{ATTRS:{}})},"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","fluid-modal-view","fluid-css","products-form-css","products-new-payment-form-css","curator-tools-css","curation-photomappings-model","hermes-template-curator-tool-photo-metadata-form","hermes-template-curator-control-panel"],optional:[]});
